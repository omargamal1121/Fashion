2025-07-24 14:57:05.070 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 14:57:08.707 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 14:57:08.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 14:57:08.797 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 14:57:08.819 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 14:57:08.867 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 14:57:09.312 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 14:57:09.455 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 14:57:09.539 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 14:57:11.006 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 14:57:11.009 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 14:57:11.157 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 14:57:11.230 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 14:57:11.232 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 14:57:11.234 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 14:57:11.235 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 14:57:11.273 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 14:57:11.289 +03:00 [INF] Hosting environment: Development
2025-07-24 14:57:11.290 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 14:57:11.350 +03:00 [INF] Server mrrobot:17788:92ecf972 successfully announced in 63.9792 ms
2025-07-24 14:57:11.380 +03:00 [INF] Server mrrobot:17788:92ecf972 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 14:57:11.476 +03:00 [INF] 2 servers were removed due to timeout
2025-07-24 14:57:11.566 +03:00 [INF] Server mrrobot:17788:92ecf972 all the dispatchers started
2025-07-24 14:57:13.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 14:57:13.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 373.9863ms
2025-07-24 14:57:13.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 14:57:13.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 14:57:13.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 14:57:13.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.2774ms
2025-07-24 14:57:13.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 199.2464ms
2025-07-24 14:57:14.083 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 362.4967ms
2025-07-24 14:57:14.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 14:57:14.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 444.733ms
2025-07-24 14:57:21.668 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-07-24 14:59:50.436 +03:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-07-24 14:59:50.502 +03:00 [INF] Server mrrobot:17788:92ecf972 caught stopping signal...
2025-07-24 14:59:50.505 +03:00 [INF] Server mrrobot:17788:92ecf972 caught stopped signal...
2025-07-24 14:59:50.514 +03:00 [INF] Server mrrobot:17788:92ecf972 All dispatchers stopped
2025-07-24 14:59:50.518 +03:00 [WRN] Server mrrobot:17788:92ecf972 caught shutdown signal...
2025-07-24 14:59:50.537 +03:00 [INF] Server mrrobot:17788:92ecf972 successfully reported itself as stopped in 11.1624 ms
2025-07-24 14:59:50.539 +03:00 [INF] Server mrrobot:17788:92ecf972 has been stopped in total 34.6427 ms
2025-07-24 14:59:56.689 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 14:59:58.675 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 14:59:58.690 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 14:59:58.731 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 14:59:58.751 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 14:59:58.778 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 14:59:59.288 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 14:59:59.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 14:59:59.440 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 15:00:00.357 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 15:00:00.360 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 15:00:00.465 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 15:00:00.520 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 15:00:00.521 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 15:00:00.523 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 15:00:00.529 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 15:00:00.588 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 15:00:00.688 +03:00 [INF] Hosting environment: Development
2025-07-24 15:00:00.690 +03:00 [INF] Server mrrobot:6580:f9b9f85b successfully announced in 31.508 ms
2025-07-24 15:00:00.756 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 15:00:00.763 +03:00 [INF] Server mrrobot:6580:f9b9f85b is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 15:00:00.832 +03:00 [INF] Server mrrobot:6580:f9b9f85b all the dispatchers started
2025-07-24 15:00:01.004 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:00:01.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 195.5717ms
2025-07-24 15:00:01.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:00:01.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 15.6673ms
2025-07-24 15:00:01.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:00:01.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:00:01.373 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 27.2178ms
2025-07-24 15:00:01.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.5202ms
2025-07-24 15:00:01.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:00:01.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.204ms
2025-07-24 15:00:40.498 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - null null
2025-07-24 15:00:43.991 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:00:44.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:00:44.252 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:00:44.316 +03:00 [INF] Route matched with {action = "GetProductsForPublic", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForPublic(Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:00:45.269 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:00:45.279 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_False
2025-07-24 15:00:45.282 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:00:45.609 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - (`d`.`DiscountPercent` * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:00:45.740 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:00:45.786 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce) in 1446.5863ms
2025-07-24 15:00:45.790 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:00:45.800 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - 404 254 application/json; charset=utf-8 5302.3467ms
2025-07-24 15:00:51.013 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:00:51.117 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_False with tags: [product_search]
2025-07-24 15:00:52.492 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - null null
2025-07-24 15:00:52.508 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:00:52.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:00:52.552 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:00:52.564 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:00:52.578 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-07-24 15:00:52.582 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-07-24 15:00:52.585 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:00:52.652 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - (`d`.`DiscountPercent` * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:00:52.711 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:00:52.724 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 154.565ms
2025-07-24 15:00:52.729 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:00:52.734 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - 200 2813 application/json; charset=utf-8 241.2918ms
2025-07-24 15:01:00.949 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-07-24 15:01:00.966 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
2025-07-24 15:04:52.355 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - null null
2025-07-24 15:04:52.379 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:04:52.399 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:04:52.423 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:04:52.426 +03:00 [INF] Route matched with {action = "GetProductsForPublic", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForPublic(Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:04:52.466 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:04:52.475 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_False
2025-07-24 15:04:52.482 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:04:52.515 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - (`d`.`DiscountPercent` * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:04:52.559 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:04:52.563 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce) in 130.4874ms
2025-07-24 15:04:52.565 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:04:52.566 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - 404 254 application/json; charset=utf-8 211.5667ms
2025-07-24 15:05:00.087 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - null null
2025-07-24 15:05:00.102 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:05:00.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:05:00.128 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:05:00.131 +03:00 [INF] Route matched with {action = "GetProductsForPublic", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForPublic(Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:05:00.141 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:05:00.147 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_False
2025-07-24 15:05:00.150 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:05:00.182 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - (`d`.`DiscountPercent` * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:05:00.225 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:05:00.239 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce) in 99.7902ms
2025-07-24 15:05:00.244 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:05:00.246 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - 404 254 application/json; charset=utf-8 158.9312ms
2025-07-24 15:05:01.215 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:05:01.217 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:05:01.222 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_False with tags: [product_search]
2025-07-24 15:05:01.224 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_False with tags: [product_search]
2025-07-24 15:05:18.047 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:05:18.053 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:05:18.059 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:05:18.072 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:05:18.084 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:05:18.103 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:05:18.107 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__False
2025-07-24 15:05:18.116 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:05:18.210 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - (`d`.`DiscountPercent` * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:05:18.249 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:05:18.253 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 153.7538ms
2025-07-24 15:05:18.256 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:05:18.258 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2813 application/json; charset=utf-8 211.3036ms
2025-07-24 15:05:21.250 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__False
2025-07-24 15:05:21.257 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__False with tags: [product_search]
2025-07-24 15:08:07.618 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:08:07.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 55.6199ms
2025-07-24 15:08:07.804 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:08:07.823 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 19.3858ms
2025-07-24 15:08:07.835 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:08:07.842 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:08:07.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.508ms
2025-07-24 15:08:07.870 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.3195ms
2025-07-24 15:08:09.415 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:08:09.812 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 396.8748ms
2025-07-24 15:08:58.935 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:08:58.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 26.8467ms
2025-07-24 15:08:59.074 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:08:59.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 13.3915ms
2025-07-24 15:08:59.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:08:59.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4008ms
2025-07-24 15:08:59.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:08:59.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.231ms
2025-07-24 15:09:00.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:09:00.869 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 296.743ms
2025-07-24 15:09:21.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:09:21.784 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 765.8841ms
2025-07-24 15:09:25.052 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:09:25.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 77.7766ms
2025-07-24 15:09:25.238 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:09:25.280 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:09:25.290 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.5598ms
2025-07-24 15:09:25.321 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 40.8992ms
2025-07-24 15:09:26.157 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:09:26.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 791.1267ms
2025-07-24 15:09:34.948 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:09:35.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 632.1839ms
2025-07-24 15:09:36.594 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:09:36.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 18.1309ms
2025-07-24 15:09:36.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:09:36.735 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.8663ms
2025-07-24 15:09:36.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:09:36.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 4.8728ms
2025-07-24 15:09:42.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:09:43.394 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 772.8807ms
2025-07-24 15:11:32.764 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 15:11:34.775 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 15:11:34.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 15:11:34.850 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 15:11:34.875 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 15:11:34.915 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 15:11:35.390 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 15:11:35.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 15:11:35.563 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 15:11:36.459 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 15:11:36.472 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 15:11:36.622 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 15:11:37.276 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 15:11:37.285 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 15:11:37.287 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 15:11:37.289 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 15:11:37.326 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 15:11:37.336 +03:00 [INF] Hosting environment: Development
2025-07-24 15:11:37.343 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 15:11:37.377 +03:00 [INF] Server mrrobot:15028:d37aaff9 successfully announced in 32.5334 ms
2025-07-24 15:11:37.405 +03:00 [INF] Server mrrobot:15028:d37aaff9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 15:11:37.727 +03:00 [INF] Server mrrobot:15028:d37aaff9 all the dispatchers started
2025-07-24 15:11:38.232 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 15:11:39.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1037.917ms
2025-07-24 15:11:39.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 15:11:39.349 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 15.128ms
2025-07-24 15:11:39.363 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 15:11:39.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 15:11:39.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.4175ms
2025-07-24 15:11:39.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 155.8455ms
2025-07-24 15:11:40.245 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 15:11:41.208 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 962.9906ms
2025-07-24 15:11:42.079 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:11:42.370 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:11:42.546 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:11:42.744 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:42.851 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:11:44.078 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:11:44.093 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__False
2025-07-24 15:11:44.108 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:11:46.007 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:11:46.477 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:11:46.590 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 3713.5582ms
2025-07-24 15:11:46.607 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:46.651 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 4572.0511ms
2025-07-24 15:11:48.388 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__False
2025-07-24 15:11:48.709 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__False with tags: [product_search]
2025-07-24 15:11:54.043 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:11:54.061 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:11:54.090 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:11:54.138 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:54.145 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:11:54.171 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:11:54.182 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__False
2025-07-24 15:11:54.217 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:11:54.225 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 68.4511ms
2025-07-24 15:11:54.234 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:54.237 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 193.9746ms
2025-07-24 15:11:59.325 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:11:59.347 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:11:59.359 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:11:59.383 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:59.404 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:11:59.505 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:11:59.510 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__False
2025-07-24 15:11:59.512 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:11:59.524 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 115.5935ms
2025-07-24 15:11:59.526 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:11:59.558 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 232.9416ms
2025-07-24 15:12:04.642 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:12:04.658 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:12:04.670 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:12:04.678 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:04.681 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:12:04.694 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:12:04.700 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__False
2025-07-24 15:12:04.706 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:12:04.711 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 18.8192ms
2025-07-24 15:12:04.725 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:04.735 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 92.6918ms
2025-07-24 15:12:06.586 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:12:06.597 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:12:06.612 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:12:06.637 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:06.640 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:12:06.655 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:12:06.667 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__False
2025-07-24 15:12:06.675 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:12:06.684 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 38.0654ms
2025-07-24 15:12:06.693 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:06.695 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 109.5915ms
2025-07-24 15:12:13.745 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:12:13.752 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:12:13.765 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:12:13.785 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:13.795 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:12:13.817 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:12:13.911 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__False
2025-07-24 15:12:13.927 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:12:13.944 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 132.1176ms
2025-07-24 15:12:13.957 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:12:13.967 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 218.4156ms
2025-07-24 15:13:47.268 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=true&includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:13:47.281 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:13:47.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:13:47.300 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:13:47.310 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:13:47.338 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:13:47.340 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_False
2025-07-24 15:13:47.344 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:13:47.613 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:13:47.687 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:13:47.706 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 376.7197ms
2025-07-24 15:13:47.782 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:13:47.790 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=true&includeDeleted=false&page=1&pageSize=10 - 404 254 application/json; charset=utf-8 522.0785ms
2025-07-24 15:13:48.040 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:13:48.065 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_False with tags: [product_search]
2025-07-24 15:14:00.079 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=false&includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:14:00.097 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:14:00.114 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:14:00.147 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:14:00.153 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:14:00.171 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_False_False
2025-07-24 15:14:00.178 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_False_False
2025-07-24 15:14:00.185 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:14:00.406 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE NOT (`p`.`IsActive`) AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:14:00.594 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:14:00.607 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 443.5249ms
2025-07-24 15:14:00.620 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:14:00.629 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=false&includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 550.0916ms
2025-07-24 15:14:08.044 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_False_False
2025-07-24 15:14:08.054 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_False_False with tags: [product_search]
2025-07-24 15:16:37.570 +03:00 [INF] 1 servers were removed due to timeout
2025-07-24 15:24:00.871 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - null null
2025-07-24 15:24:00.879 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:24:00.893 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:24:00.900 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:24:00.910 +03:00 [INF] Route matched with {action = "GetProductsForPublic", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForPublic(Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:24:00.915 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:24:00.918 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_False
2025-07-24 15:24:00.920 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:24:00.944 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:24:00.970 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:24:00.974 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce) in 60.3133ms
2025-07-24 15:24:00.978 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForPublic (E-Commerce)'
2025-07-24 15:24:00.979 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/public/list?page=1&pageSize=10 - 404 254 application/json; charset=utf-8 108.2283ms
2025-07-24 15:24:08.815 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_False
2025-07-24 15:24:08.820 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_False with tags: [product_search]
2025-07-24 15:24:28.128 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - null null
2025-07-24 15:24:28.135 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:24:28.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:24:28.145 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:24:28.147 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:24:28.153 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-07-24 15:24:28.156 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-07-24 15:24:28.159 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:24:28.203 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:24:28.238 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:24:28.242 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 90.8669ms
2025-07-24 15:24:28.246 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:24:28.249 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 120.4792ms
2025-07-24 15:24:28.843 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-07-24 15:24:28.848 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
2025-07-24 15:25:01.031 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - null null
2025-07-24 15:25:01.038 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:25:01.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:25:01.046 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:25:01.049 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:25:01.054 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-07-24 15:25:01.056 +03:00 [INF] Cache hit for key: advsearch__________False_1_10__
2025-07-24 15:25:01.058 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:25:01.061 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 7.1768ms
2025-07-24 15:25:01.069 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:25:01.073 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 42.0271ms
2025-07-24 15:26:09.877 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-24 15:26:09.884 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 15:26:09.888 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 15:26:09.891 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:26:09.895 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-24 15:26:09.899 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__False
2025-07-24 15:26:09.901 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__False
2025-07-24 15:26:09.902 +03:00 [INF] Execute GetAll for entity Product
2025-07-24 15:26:09.929 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`t`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `t`.`Price`))
    ELSE `t`.`Price`
END, `t`.`fitType`, `d`.`Id`, `t0`.`Id`, `t0`.`Url`, CASE
    WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
    ELSE NULL
END, CASE
    WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
    ELSE 0.0
END, `t`.`IsActive`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-24 15:26:09.956 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 15:26:09.962 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 63.2652ms
2025-07-24 15:26:09.964 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-24 15:26:09.966 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?includeDeleted=false&page=1&pageSize=10 - 200 2810 application/json; charset=utf-8 88.8256ms
2025-07-24 15:26:18.963 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__False
2025-07-24 15:26:18.966 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__False with tags: [product_search]
2025-07-24 22:35:00.308 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 22:35:02.498 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:35:02.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:35:02.591 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 22:35:02.615 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 22:35:02.655 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 22:35:03.048 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:35:03.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:35:03.189 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 22:35:04.479 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 22:35:04.482 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 22:35:04.616 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 22:35:04.656 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 22:35:04.673 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 22:35:04.686 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 22:35:04.748 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 22:35:04.841 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 22:35:04.861 +03:00 [INF] Hosting environment: Development
2025-07-24 22:35:04.863 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 22:35:04.865 +03:00 [INF] Server mrrobot:9324:4a9f76e6 successfully announced in 24.5504 ms
2025-07-24 22:35:04.878 +03:00 [INF] Server mrrobot:9324:4a9f76e6 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 22:35:04.887 +03:00 [INF] 1 servers were removed due to timeout
2025-07-24 22:35:04.998 +03:00 [INF] Server mrrobot:9324:4a9f76e6 all the dispatchers started
2025-07-24 22:35:06.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:35:07.179 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 632.4365ms
2025-07-24 22:35:07.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:35:07.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:35:07.281 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.7712ms
2025-07-24 22:35:07.305 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:35:07.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 48.164ms
2025-07-24 22:35:07.745 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 440.3844ms
2025-07-24 22:35:07.879 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:35:08.329 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - E_Commerce.Controllers.CollectionController.GetCollectionsAdmin (E-Commerce). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.PrepareGenerateOperation(IGrouping`2 group)
   at System.Linq.Enumerable.IteratorSelectIterator`2.MoveNext()
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-24 22:35:08.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 564.2276ms
2025-07-24 22:35:30.308 +03:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-07-24 22:35:30.346 +03:00 [INF] Server mrrobot:9324:4a9f76e6 caught stopping signal...
2025-07-24 22:35:30.348 +03:00 [INF] Server mrrobot:9324:4a9f76e6 caught stopped signal...
2025-07-24 22:35:30.360 +03:00 [WRN] Server mrrobot:9324:4a9f76e6 caught shutdown signal...
2025-07-24 22:35:30.365 +03:00 [WRN] Server mrrobot:9324:4a9f76e6 stopped non-gracefully due to ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler. Outstanding work on those dispatchers could be aborted, and there can be delays in background processing. This server instance will be incorrectly shown as active for a while. To avoid non-graceful shutdowns, investigate what prevents from stopping gracefully and add CancellationToken support for those methods.
2025-07-24 22:35:30.414 +03:00 [INF] Server mrrobot:9324:4a9f76e6 successfully reported itself as stopped in 14.4201 ms
2025-07-24 22:35:30.415 +03:00 [INF] Server mrrobot:9324:4a9f76e6 has been stopped in total 67.4051 ms
2025-07-24 22:36:05.047 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 22:36:07.062 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:36:07.080 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:36:07.108 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 22:36:07.125 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 22:36:07.164 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 22:36:07.597 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:36:07.682 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:36:07.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 22:36:08.474 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 22:36:08.477 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 22:36:08.591 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 22:36:08.616 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 22:36:08.618 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 22:36:08.626 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 22:36:08.628 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 22:36:08.651 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 22:36:08.669 +03:00 [INF] Hosting environment: Development
2025-07-24 22:36:08.740 +03:00 [INF] Server mrrobot:10412:1910b91e successfully announced in 78.7606 ms
2025-07-24 22:36:08.742 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 22:36:08.752 +03:00 [INF] Server mrrobot:10412:1910b91e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 22:36:08.887 +03:00 [INF] Server mrrobot:10412:1910b91e all the dispatchers started
2025-07-24 22:36:09.009 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:36:09.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 186.8377ms
2025-07-24 22:36:09.264 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:36:09.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:36:09.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:36:09.280 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 15.6108ms
2025-07-24 22:36:09.298 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 30.7369ms
2025-07-24 22:36:09.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.0767ms
2025-07-24 22:36:09.580 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:36:09.645 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Collection/admin" for actions - E_Commerce.Controllers.CollectionController.GetCollectionsAdmin (E-Commerce), E_Commerce.Controllers.CollectionController.GetCollections (E-Commerce). Actions require a unique method/path combination for Swagger/OpenAPI 2.0 and 3.0. Use ConflictingActionsResolver as a workaround or provide your own implementation of PathGroupSelector.
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.PrepareGenerateOperation(IGrouping`2 group)
   at System.Linq.Enumerable.IteratorSelectIterator`2.MoveNext()
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-24 22:36:09.652 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 71.8967ms
2025-07-24 22:36:31.178 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:36:31.198 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 21.5331ms
2025-07-24 22:36:31.235 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:36:31.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:36:31.250 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:36:31.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.0262ms
2025-07-24 22:36:31.295 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 58.9682ms
2025-07-24 22:36:31.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.5947ms
2025-07-24 22:36:31.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:36:31.567 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET api/Collection/admin" for actions - E_Commerce.Controllers.CollectionController.GetCollectionsAdmin (E-Commerce), E_Commerce.Controllers.CollectionController.GetCollections (E-Commerce). Actions require a unique method/path combination for Swagger/OpenAPI 2.0 and 3.0. Use ConflictingActionsResolver as a workaround or provide your own implementation of PathGroupSelector.
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.PrepareGenerateOperation(IGrouping`2 group)
   at System.Linq.Enumerable.IteratorSelectIterator`2.MoveNext()
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-24 22:36:31.581 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 183.162ms
2025-07-24 22:36:42.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:36:42.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 13.063ms
2025-07-24 22:36:42.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:36:42.125 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:36:42.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 12.186ms
2025-07-24 22:36:42.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:36:42.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.986ms
2025-07-24 22:36:42.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.6932ms
2025-07-24 22:36:42.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:36:42.410 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commerce.Controllers.CollectionController.AddMainImageToCollection (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Error reading parameter(s) for action E_Commerce.Controllers.CollectionController.AddMainImageToCollection (E-Commerce) as [FromForm] attribute used with IFormFile. Please refer to https://github.com/domaindrivendev/Swashbuckle.AspNetCore#handle-forms-and-file-uploads for more information
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository, Func`3 parameterGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-24 22:36:42.418 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 140.7964ms
2025-07-24 22:42:25.888 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 22:42:28.460 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:42:28.490 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:42:28.538 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 22:42:28.586 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 22:42:28.658 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 22:42:30.090 +03:00 [INF] Executed DbCommand (116ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:42:30.243 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:42:30.326 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 22:42:31.475 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 22:42:31.524 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 22:42:31.688 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 22:42:31.791 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 22:42:31.904 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 22:42:31.911 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 22:42:31.923 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 22:42:31.941 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 22:42:31.946 +03:00 [INF] Hosting environment: Development
2025-07-24 22:42:31.959 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 22:42:31.960 +03:00 [INF] Server mrrobot:14836:592b65b9 successfully announced in 14.6977 ms
2025-07-24 22:42:31.971 +03:00 [INF] Server mrrobot:14836:592b65b9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 22:42:32.092 +03:00 [INF] Server mrrobot:14836:592b65b9 all the dispatchers started
2025-07-24 22:43:43.659 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:43:43.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 270.985ms
2025-07-24 22:43:43.982 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:43:44.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:43:44.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:43:44.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 207.8052ms
2025-07-24 22:43:44.196 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 189.1931ms
2025-07-24 22:43:44.263 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 239.3773ms
2025-07-24 22:43:44.364 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:43:44.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 509.7749ms
2025-07-24 22:44:49.403 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 22:44:50.998 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:44:51.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:44:51.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 22:44:51.060 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 22:44:51.096 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 22:44:51.486 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:44:51.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:44:51.579 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 22:44:52.199 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 22:44:52.203 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 22:44:52.292 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 22:44:52.309 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 22:44:52.311 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 22:44:52.312 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 22:44:52.315 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 22:44:52.330 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 22:44:52.333 +03:00 [INF] Hosting environment: Development
2025-07-24 22:44:52.334 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 22:44:52.350 +03:00 [INF] Server mrrobot:14544:60694d06 successfully announced in 13.55 ms
2025-07-24 22:44:52.358 +03:00 [INF] Server mrrobot:14544:60694d06 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 22:44:52.550 +03:00 [INF] Server mrrobot:14544:60694d06 all the dispatchers started
2025-07-24 22:49:52.414 +03:00 [INF] 2 servers were removed due to timeout
2025-07-24 22:55:07.790 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 22:55:09.896 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:55:09.911 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 22:55:09.945 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 22:55:09.964 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 22:55:10.003 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 22:55:10.424 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:55:10.546 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 22:55:10.581 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 22:55:11.397 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 22:55:11.414 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 22:55:11.566 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 22:55:11.649 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 22:55:11.715 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 22:55:11.719 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 22:55:11.723 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 22:55:11.746 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 22:55:11.767 +03:00 [INF] Hosting environment: Development
2025-07-24 22:55:11.769 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 22:55:11.772 +03:00 [INF] Server mrrobot:5444:c52b8a8e successfully announced in 23.2767 ms
2025-07-24 22:55:11.780 +03:00 [INF] Server mrrobot:5444:c52b8a8e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 22:55:11.840 +03:00 [INF] Server mrrobot:5444:c52b8a8e all the dispatchers started
2025-07-24 22:55:12.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 22:55:12.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 299.2358ms
2025-07-24 22:55:12.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 22:55:12.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 22:55:12.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 22:55:13.014 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 192.3291ms
2025-07-24 22:55:13.231 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 318.1216ms
2025-07-24 22:55:13.322 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 352.7159ms
2025-07-24 22:55:13.408 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 22:55:14.198 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 789.7672ms
2025-07-24 23:00:11.880 +03:00 [INF] 1 servers were removed due to timeout
2025-07-24 23:13:54.834 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 23:13:57.749 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:13:57.787 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:13:57.833 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:13:57.861 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 23:13:57.909 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 23:13:58.375 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:13:58.496 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:13:58.539 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:13:59.336 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 23:13:59.349 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 23:13:59.457 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 23:13:59.495 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 23:13:59.498 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 23:13:59.500 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 23:13:59.502 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 23:13:59.527 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 23:13:59.535 +03:00 [INF] Hosting environment: Development
2025-07-24 23:13:59.597 +03:00 [INF] Server mrrobot:424:8ee0bc54 successfully announced in 62.1589 ms
2025-07-24 23:13:59.613 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 23:13:59.629 +03:00 [INF] Server mrrobot:424:8ee0bc54 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 23:13:59.749 +03:00 [INF] Server mrrobot:424:8ee0bc54 all the dispatchers started
2025-07-24 23:13:59.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:14:00.135 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 225.162ms
2025-07-24 23:14:00.186 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:14:00.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:14:00.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 24.4632ms
2025-07-24 23:14:00.229 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:14:00.246 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.9975ms
2025-07-24 23:14:00.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.5036ms
2025-07-24 23:14:01.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:14:02.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 466.5116ms
2025-07-24 23:18:59.728 +03:00 [INF] 1 servers were removed due to timeout
2025-07-24 23:23:45.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:23:45.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 16.6905ms
2025-07-24 23:23:54.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:23:54.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 383.7165ms
2025-07-24 23:23:54.730 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/favicon.ico - null null
2025-07-24 23:23:55.654 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:23:55.674 +03:00 [INF] No cached response available for this request.
2025-07-24 23:23:55.720 +03:00 [INF] The response could not be cached for this request.
2025-07-24 23:23:55.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/favicon.ico - 404 0 null 995.8727ms
2025-07-24 23:23:55.734 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/favicon.ico, Response status code: 404
2025-07-24 23:24:06.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:24:06.655 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.3166ms
2025-07-24 23:33:57.723 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:33:58.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 328.8444ms
2025-07-24 23:37:45.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:37:45.951 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 299.7067ms
2025-07-24 23:39:11.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:39:11.947 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 360.9927ms
2025-07-24 23:40:04.857 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:40:05.296 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/17/2025 6:16:17 PM', Current time (UTC): '7/24/2025 8:40:05 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-24 23:40:05.324 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/17/2025 6:16:17 PM', Current time (UTC): '7/24/2025 8:40:05 PM'.
2025-07-24 23:40:05.327 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:40:05.600 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:40:05.681 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 401 null application/json 823.7836ms
2025-07-24 23:41:30.351 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/login - application/json 72
2025-07-24 23:41:30.401 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:41:30.622 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:41:30.690 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-24 23:41:30.832 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-07-24 23:41:31.630 +03:00 [INF] In LoginAsync Method 
2025-07-24 23:41:31.655 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:41:31.886 +03:00 [INF] 🔐 Generating Access Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:41:32.141 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-24 23:41:32.199 +03:00 [INF] ✅ Access Token generated successfully for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:41:32.204 +03:00 [INF] 🔑 Generating Refresh Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:41:32.232 +03:00 [INF] RefreshToken Generated
2025-07-24 23:41:32.336 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:41:32.406 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1552.7674ms
2025-07-24 23:41:32.421 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-24 23:41:32.436 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/login - 200 1408 application/json; charset=utf-8 2085.3928ms
2025-07-24 23:42:03.256 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:42:03.271 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-24 23:42:03.276 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-24 23:42:03.280 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:42:03.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:42:03.311 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-24 23:42:03.335 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 23:42:03.337 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 401 0 null 80.9118ms
2025-07-24 23:42:21.594 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:42:21.614 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-24 23:42:21.640 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-24 23:42:21.643 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:42:21.661 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:42:21.688 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-24 23:42:21.693 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-24 23:42:21.696 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 401 0 null 101.9032ms
2025-07-24 23:43:04.997 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:43:05.042 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:43:05.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:43:05.064 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:43:05.080 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:43:05.134 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:43:05.151 +03:00 [INF] Creating collection: collection1
2025-07-24 23:43:05.214 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:43:05.318 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:43:05.332 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:43:05.495 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:43:05.498 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:43:05.501 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:43:05.564 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:43:05.850 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:43:05.980 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.NextResultAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 90
   at MySqlConnector.MySqlDataReader.NextResultAsync(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 49
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.NextResultAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 90
   at MySqlConnector.MySqlDataReader.NextResultAsync(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 49
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:43:06.035 +03:00 [ERR] Error creating collection: An error occurred while saving the entity changes. See the inner exception for details.
2025-07-24 23:43:06.278 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:43:06.298 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 1213.631ms
2025-07-24 23:43:06.317 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:43:06.381 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 248 application/json; charset=utf-8 1383.8541ms
2025-07-24 23:43:41.866 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:43:42.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 222.0045ms
2025-07-24 23:43:42.921 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:43:42.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 63.9627ms
2025-07-24 23:43:43.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:43:43.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 48.2267ms
2025-07-24 23:43:43.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:43:43.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 162.0853ms
2025-07-24 23:43:51.783 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:43:51.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 199.8564ms
2025-07-24 23:44:22.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:44:23.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 447.2969ms
2025-07-24 23:44:23.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:44:23.827 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 221.1457ms
2025-07-24 23:44:24.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:44:25.010 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/login - application/json 72
2025-07-24 23:44:27.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 2915.6827ms
2025-07-24 23:44:27.410 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:44:28.172 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:44:28.222 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-24 23:44:28.378 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-07-24 23:44:29.375 +03:00 [INF] In LoginAsync Method 
2025-07-24 23:44:29.388 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:44:30.108 +03:00 [INF] 🔐 Generating Access Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:44:30.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:44:30.276 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-24 23:44:30.327 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 173.8886ms
2025-07-24 23:44:30.358 +03:00 [INF] ✅ Access Token generated successfully for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:44:30.371 +03:00 [INF] 🔑 Generating Refresh Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-24 23:44:30.377 +03:00 [INF] RefreshToken Generated
2025-07-24 23:44:30.394 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:44:30.410 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 1086.2551ms
2025-07-24 23:44:30.424 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-24 23:44:30.427 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/login - 200 1408 application/json; charset=utf-8 5417.248ms
2025-07-24 23:44:35.010 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:44:40.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5722.587ms
2025-07-24 23:44:42.693 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:44:42.876 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:44:42.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:44:42.905 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:44:42.913 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:44:42.926 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:44:42.938 +03:00 [INF] Creating collection: collection1
2025-07-24 23:44:42.961 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:44:42.972 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:44:42.994 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:44:43.163 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:44:43.192 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:44:43.219 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:44:43.221 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:44:43.223 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:44:43.266 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:44:43.296 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:44:43.685 +03:00 [ERR] Error creating collection: An error occurred while saving the entity changes. See the inner exception for details.
2025-07-24 23:44:43.745 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:44:43.754 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 831.9548ms
2025-07-24 23:44:43.796 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:44:43.865 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 248 application/json; charset=utf-8 1170.2114ms
2025-07-24 23:45:23.977 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 23:45:27.046 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:45:27.119 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:45:27.160 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:45:27.230 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 23:45:27.280 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 23:45:27.959 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:45:28.063 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:45:28.112 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:45:30.167 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 23:45:30.174 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 23:45:30.310 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 23:45:30.527 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 23:45:30.625 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 23:45:30.627 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 23:45:30.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:45:30.630 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 23:45:30.678 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 23:45:30.728 +03:00 [INF] Server mrrobot:12004:cbb5078c successfully announced in 33.4827 ms
2025-07-24 23:45:30.817 +03:00 [INF] Hosting environment: Development
2025-07-24 23:45:30.850 +03:00 [INF] Server mrrobot:12004:cbb5078c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 23:45:30.861 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 23:45:31.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 732.8516ms
2025-07-24 23:45:31.477 +03:00 [INF] Server mrrobot:12004:cbb5078c all the dispatchers started
2025-07-24 23:45:31.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:45:31.633 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 48.4097ms
2025-07-24 23:45:31.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:45:31.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:45:31.768 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 49.8157ms
2025-07-24 23:45:31.799 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.0738ms
2025-07-24 23:45:32.259 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:45:33.182 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 923.4853ms
2025-07-24 23:45:38.111 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:45:38.288 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:45:38.375 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:45:38.449 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:45:38.497 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:45:39.218 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:45:39.227 +03:00 [INF] Creating collection: collection1
2025-07-24 23:45:39.278 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:45:39.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:45:39.363 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:45:39.465 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:45:39.633 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:45:39.695 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:45:39.700 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:45:39.736 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:45:40.060 +03:00 [ERR] Failed executing DbCommand (273ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:45:40.986 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:45:41.033 +03:00 [ERR] Error creating collection: An error occurred while saving the entity changes. See the inner exception for details.
2025-07-24 23:45:41.166 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:45:41.211 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 2704.3339ms
2025-07-24 23:45:41.224 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:45:41.247 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 248 application/json; charset=utf-8 3136.4198ms
2025-07-24 23:46:37.809 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 23:46:41.635 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:46:41.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:46:41.705 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:46:41.749 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 23:46:41.807 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 23:46:44.040 +03:00 [INF] Executed DbCommand (1,342ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:46:44.301 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:46:44.396 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:46:48.306 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 23:46:48.311 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 23:46:48.624 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 23:46:48.874 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 23:46:48.888 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 23:46:48.893 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 23:46:48.906 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 23:46:49.225 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 23:46:49.750 +03:00 [INF] Hosting environment: Development
2025-07-24 23:46:50.671 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 23:46:50.836 +03:00 [INF] Server mrrobot:15624:bdabe193 successfully announced in 1551.1547 ms
2025-07-24 23:46:51.594 +03:00 [INF] Server mrrobot:15624:bdabe193 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 23:46:51.788 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:46:51.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:46:53.389 +03:00 [INF] Server mrrobot:15624:bdabe193 all the dispatchers started
2025-07-24 23:46:54.961 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:46:55.672 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 3897.2459ms
2025-07-24 23:46:55.704 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:46:56.032 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:46:56.101 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:46:56.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:46:56.151 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 14.4236ms
2025-07-24 23:46:56.439 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:46:56.453 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:46:56.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 26.7219ms
2025-07-24 23:46:56.606 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.8956ms
2025-07-24 23:46:57.138 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:46:57.186 +03:00 [INF] Creating collection: collection1
2025-07-24 23:46:57.276 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:46:57.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:46:57.419 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:46:57.543 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:46:57.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:46:57.787 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:46:57.890 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:46:57.893 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:46:57.990 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:46:58.074 +03:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:46:58.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 468.0814ms
2025-07-24 23:46:58.195 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:47:27.234 +03:00 [ERR] Error creating collection: An error occurred while saving the entity changes. See the inner exception for details.
2025-07-24 23:47:27.470 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:47:27.523 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 31407.2814ms
2025-07-24 23:47:27.528 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:47:27.544 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 248 application/json; charset=utf-8 35785.6892ms
2025-07-24 23:47:31.702 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:47:31.806 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:47:31.825 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:47:31.843 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:47:31.846 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:47:31.869 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:47:31.912 +03:00 [INF] Creating collection: collection1
2025-07-24 23:47:31.944 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:47:31.948 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:47:31.963 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:47:31.970 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:47:32.028 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:47:32.043 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:47:32.066 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:47:32.080 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:47:32.110 +03:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:47:32.133 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:47:45.266 +03:00 [ERR] Error creating collection: An error occurred while saving the entity changes. See the inner exception for details.
2025-07-24 23:47:45.346 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:47:45.355 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 13493.8621ms
2025-07-24 23:47:45.359 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:47:45.362 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 248 application/json; charset=utf-8 13661.9675ms
2025-07-24 23:47:48.753 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:47:48.767 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:47:48.781 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:47:48.793 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:47:48.795 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:47:48.815 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:47:48.817 +03:00 [INF] Creating collection: collection1
2025-07-24 23:47:48.839 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:47:48.844 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:47:48.860 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:47:48.863 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:47:57.181 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:48:16.494 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:48:16.538 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:48:16.562 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:48:30.366 +03:00 [ERR] Failed executing DbCommand (244ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:48:30.435 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'E_Commerce.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`fashion_site`.`adminoperationslogs`, CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `aspnetusers` (`Id`))
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-24 23:49:10.799 +03:00 [ERR] Error in CreateCollection: Object reference not set to an instance of an object.
2025-07-24 23:49:10.806 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:49:11.254 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 82447.2892ms
2025-07-24 23:49:11.287 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:49:11.289 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 500 228 application/json; charset=utf-8 82529.8117ms
2025-07-24 23:49:17.624 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection - application/json 97
2025-07-24 23:49:17.766 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:49:17.782 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:49:17.789 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:49:17.805 +03:00 [INF] Route matched with {action = "CreateCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]] CreateCollection(E_Commerce.DtoModels.CollectionDtos.CreateCollectionDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:49:17.822 +03:00 [INF] Executing CreateCollection: collection1
2025-07-24 23:49:17.824 +03:00 [INF] Creating collection: collection1
2025-07-24 23:49:17.833 +03:00 [INF] Method System.Func`2[System.Int32,System.Threading.Tasks.Task`1[System.Boolean]] :Name collection1
2025-07-24 23:49:17.839 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE LOWER(`c`.`Name`) = @__ToLower_0)
2025-07-24 23:49:17.844 +03:00 [INF] Executing CreateAsync for entity Collection
2025-07-24 23:49:17.851 +03:00 [INF] Collection added successfully (pending save)
2025-07-24 23:49:26.440 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Collections` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Collections`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:49:26.450 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:49:26.454 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:49:26.457 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:49:29.410 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:49:29.452 +03:00 [INF] Removing cache by tag: collection
2025-07-24 23:49:29.476 +03:00 [WRN] No cache entries found for tag: collection
2025-07-24 23:49:29.501 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:49:29.560 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce) in 11749.5845ms
2025-07-24 23:49:29.568 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.CreateCollection (E-Commerce)'
2025-07-24 23:49:29.572 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection - 201 344 application/json; charset=utf-8 11946.9024ms
2025-07-24 23:50:37.309 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/public/7 - null null
2025-07-24 23:50:37.316 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:50:37.325 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:50:37.347 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce)'
2025-07-24 23:50:37.362 +03:00 [INF] Route matched with {action = "GetCollectionByIdPublic", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionDto]]] GetCollectionByIdPublic(Int32) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:50:37.374 +03:00 [INF] Executing GetCollectionByIdPublic for ID: 7
2025-07-24 23:50:37.381 +03:00 [INF] Getting collection by ID: 7
2025-07-24 23:50:37.387 +03:00 [INF] Getting cache for key: CollectionWithProduct_id_7_IsActive_True_IsDeleted_False
2025-07-24 23:50:37.396 +03:00 [WRN] Cache miss for key: CollectionWithProduct_id_7_IsActive_True_IsDeleted_False
2025-07-24 23:50:37.398 +03:00 [INF] Execute GetAll for entity Collection
2025-07-24 23:50:37.766 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-24 23:50:37.842 +03:00 [ERR] Failed executing DbCommand (48ms) [Parameters=[@__collectionId_0='?' (DbType = Int32), @__IsActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`Quantity`, `t0`.`Gender`, `t0`.`SubCategoryId`, `t0`.`Price`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`c`, `t0`.`fitType`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`, `t0`.`Id2`, `t0`.`Url`, `t0`.`c0`, `t0`.`c1`, `t0`.`c2`, `t0`.`IsActive`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    WHERE ((`c`.`Id` = @__collectionId_0) AND (`c`.`IsActive` = @__IsActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p1`.`Name`, `p1`.`Description`, `p1`.`Quantity`, `p1`.`Gender`, `p1`.`SubCategoryId`, `p1`.`Price`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p1`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p1`.`Price`))
        ELSE `p1`.`Price`
    END AS `c`, `p1`.`fitType`, `p0`.`ProductId`, `p0`.`CollectionId`, `p1`.`Id` AS `Id0`, `d`.`Id` AS `Id1`, `t1`.`Id` AS `Id2`, `t1`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p1`.`IsActive`
    FROM `ProductCollections` AS `p0`
    INNER JOIN `Products` AS `p1` ON `p0`.`ProductId` = `p1`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p1`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t1` ON `p1`.`Id` = `t1`.`ProductId`
) AS `t0` ON `t`.`Id` = `t0`.`CollectionId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`
2025-07-24 23:50:37.864 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
MySqlConnector.MySqlException (0x80004005): Unknown column 'p0.Id' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Unknown column 'p0.Id' in 'field list'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-07-24 23:50:38.649 +03:00 [ERR] Error getting collection 7: Unknown column 'p0.Id' in 'field list'
2025-07-24 23:50:38.698 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:50:38.714 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce) in 1348.483ms
2025-07-24 23:50:38.831 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce)'
2025-07-24 23:50:38.834 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/public/7 - 500 252 application/json; charset=utf-8 1524.9486ms
2025-07-24 23:51:52.011 +03:00 [INF] 2 servers were removed due to timeout
2025-07-24 23:53:50.895 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:53:50.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:53:50.990 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:53:51.010 +03:00 [INF] Applying migration '20250724205318_last'.
2025-07-24 23:53:51.298 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProductCollections` ADD `CreatedAt` datetime(6) NULL;
2025-07-24 23:53:51.308 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProductCollections` ADD `DeletedAt` datetime(6) NULL;
2025-07-24 23:53:51.320 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProductCollections` ADD `Id` int NOT NULL DEFAULT 0;
2025-07-24 23:53:51.347 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProductCollections` ADD `ModifiedAt` datetime(6) NULL;
2025-07-24 23:53:51.353 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250724205318_last', '8.0.13');
2025-07-24 23:54:05.236 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 23:54:07.551 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:54:07.586 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:54:07.621 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:54:07.646 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 23:54:07.690 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 23:54:08.192 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:54:08.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:54:08.350 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:54:09.381 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 23:54:09.384 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 23:54:09.509 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 23:54:09.540 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 23:54:09.542 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 23:54:09.544 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 23:54:09.557 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 23:54:09.649 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 23:54:09.685 +03:00 [INF] Hosting environment: Development
2025-07-24 23:54:09.699 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 23:54:10.040 +03:00 [INF] Server mrrobot:21484:8223389e successfully announced in 385.6437 ms
2025-07-24 23:54:10.054 +03:00 [INF] Server mrrobot:21484:8223389e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 23:54:10.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:54:10.894 +03:00 [INF] Server mrrobot:21484:8223389e all the dispatchers started
2025-07-24 23:54:11.866 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 726.2775ms
2025-07-24 23:54:11.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:54:12.075 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:54:12.077 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:54:13.160 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 1284.8016ms
2025-07-24 23:54:13.259 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 1183.0707ms
2025-07-24 23:54:14.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1932.4546ms
2025-07-24 23:54:14.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:54:15.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1112.317ms
2025-07-24 23:54:23.766 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/public/7 - null null
2025-07-24 23:54:24.197 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:54:24.317 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:54:24.457 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce)'
2025-07-24 23:54:24.526 +03:00 [INF] Route matched with {action = "GetCollectionByIdPublic", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionDto]]] GetCollectionByIdPublic(Int32) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:54:25.290 +03:00 [INF] Executing GetCollectionByIdPublic for ID: 7
2025-07-24 23:54:25.301 +03:00 [INF] Getting collection by ID: 7
2025-07-24 23:54:25.306 +03:00 [INF] Getting cache for key: CollectionWithProduct_id_7_IsActive_True_IsDeleted_False
2025-07-24 23:54:25.324 +03:00 [WRN] Cache miss for key: CollectionWithProduct_id_7_IsActive_True_IsDeleted_False
2025-07-24 23:54:25.328 +03:00 [INF] Execute GetAll for entity Collection
2025-07-24 23:54:25.705 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-24 23:54:25.862 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__collectionId_0='?' (DbType = Int32), @__IsActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`Quantity`, `t0`.`Gender`, `t0`.`SubCategoryId`, `t0`.`Price`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`c`, `t0`.`fitType`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`, `t0`.`Id2`, `t0`.`Url`, `t0`.`c0`, `t0`.`c1`, `t0`.`c2`, `t0`.`IsActive`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    WHERE ((`c`.`Id` = @__collectionId_0) AND (`c`.`IsActive` = @__IsActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p1`.`Name`, `p1`.`Description`, `p1`.`Quantity`, `p1`.`Gender`, `p1`.`SubCategoryId`, `p1`.`Price`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p1`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p1`.`Price`))
        ELSE `p1`.`Price`
    END AS `c`, `p1`.`fitType`, `p0`.`ProductId`, `p0`.`CollectionId`, `p1`.`Id` AS `Id0`, `d`.`Id` AS `Id1`, `t1`.`Id` AS `Id2`, `t1`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p1`.`IsActive`
    FROM `ProductCollections` AS `p0`
    INNER JOIN `Products` AS `p1` ON `p0`.`ProductId` = `p1`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p1`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t1` ON `p1`.`Id` = `t1`.`ProductId`
) AS `t0` ON `t`.`Id` = `t0`.`CollectionId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`
2025-07-24 23:54:25.875 +03:00 [INF] Collection with ID 7 not found
2025-07-24 23:54:25.907 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:54:26.038 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce) in 1433.1831ms
2025-07-24 23:54:26.076 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdPublic (E-Commerce)'
2025-07-24 23:54:26.089 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/public/7 - 404 202 application/json; charset=utf-8 2323.0798ms
2025-07-24 23:54:48.803 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/admin/7?isActive&isDeleted - null null
2025-07-24 23:54:48.815 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:54:48.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:54:48.849 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce)'
2025-07-24 23:54:48.874 +03:00 [INF] Route matched with {action = "GetCollectionByIdAdmin", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionDto]]] GetCollectionByIdAdmin(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:54:48.906 +03:00 [INF] Executing GetCollectionByIdAdmin for ID: 7
2025-07-24 23:54:48.908 +03:00 [INF] Getting collection by ID: 7
2025-07-24 23:54:48.911 +03:00 [INF] Getting cache for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:54:48.914 +03:00 [WRN] Cache miss for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:54:48.922 +03:00 [INF] Execute GetAll for entity Collection
2025-07-24 23:54:49.004 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-24 23:54:49.093 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__collectionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`Quantity`, `t0`.`Gender`, `t0`.`SubCategoryId`, `t0`.`Price`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`c`, `t0`.`fitType`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`, `t0`.`Id2`, `t0`.`Url`, `t0`.`c0`, `t0`.`c1`, `t0`.`c2`, `t0`.`IsActive`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    WHERE `c`.`Id` = @__collectionId_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p1`.`Name`, `p1`.`Description`, `p1`.`Quantity`, `p1`.`Gender`, `p1`.`SubCategoryId`, `p1`.`Price`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p1`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p1`.`Price`))
        ELSE `p1`.`Price`
    END AS `c`, `p1`.`fitType`, `p0`.`ProductId`, `p0`.`CollectionId`, `p1`.`Id` AS `Id0`, `d`.`Id` AS `Id1`, `t1`.`Id` AS `Id2`, `t1`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p1`.`IsActive`
    FROM `ProductCollections` AS `p0`
    INNER JOIN `Products` AS `p1` ON `p0`.`ProductId` = `p1`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p1`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t1` ON `p1`.`Id` = `t1`.`ProductId`
) AS `t0` ON `t`.`Id` = `t0`.`CollectionId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`
2025-07-24 23:54:49.131 +03:00 [INF] Setting cache for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:54:49.228 +03:00 [INF] Cache set successfully for key: CollectionWithProduct_id_7_IsActive__IsDeleted_ with tags: [collection]
2025-07-24 23:54:49.235 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:54:49.247 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce) in 369.2332ms
2025-07-24 23:54:49.262 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce)'
2025-07-24 23:54:49.264 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/admin/7?isActive&isDeleted - 200 355 application/json; charset=utf-8 461.6812ms
2025-07-24 23:55:35.664 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection//images - multipart/form-data; boundary=--------------------------196031671978932285924124 341526
2025-07-24 23:55:35.729 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:55:35.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:55:35.748 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection//images - 404 0 null 83.8716ms
2025-07-24 23:55:35.754 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7288/api/Collection//images, Response status code: 404
2025-07-24 23:55:35.770 +03:00 [INF] Connection id "0HNEAUGUCGGBA", Request id "0HNEAUGUCGGBA:00000003": the application completed without reading the entire request body.
2025-07-24 23:56:01.417 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - multipart/form-data; boundary=--------------------------703414183674124688247724 341526
2025-07-24 23:56:01.435 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:56:01.450 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:56:01.470 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:56:01.488 +03:00 [INF] Route matched with {action = "AddImagesToCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCollection(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:56:01.617 +03:00 [WRN] ModelState errors: The Images field is required.
2025-07-24 23:56:01.620 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:56:01.623 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce) in 121.5004ms
2025-07-24 23:56:01.639 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:56:01.655 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - 400 210 application/json; charset=utf-8 237.8322ms
2025-07-24 23:56:22.007 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - multipart/form-data; boundary=--------------------------628518518313010477828250 361918
2025-07-24 23:56:22.043 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:56:22.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:56:22.073 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:56:22.075 +03:00 [INF] Route matched with {action = "AddImagesToCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCollection(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:56:22.101 +03:00 [WRN] ModelState errors: The Images field is required.
2025-07-24 23:56:22.103 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:56:22.106 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce) in 22.4638ms
2025-07-24 23:56:22.108 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:56:22.185 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - 400 210 application/json; charset=utf-8 178.0849ms
2025-07-24 23:57:14.189 +03:00 [INF] DB tables already exist. Exit install
2025-07-24 23:57:16.831 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:57:16.861 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-24 23:57:16.897 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-24 23:57:16.925 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-24 23:57:16.968 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-24 23:57:17.396 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:57:17.482 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-24 23:57:17.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-24 23:57:18.491 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-24 23:57:18.493 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-24 23:57:18.610 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-24 23:57:18.661 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-24 23:57:18.672 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-24 23:57:18.674 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-24 23:57:18.680 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-24 23:57:18.698 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-24 23:57:18.704 +03:00 [INF] Hosting environment: Development
2025-07-24 23:57:18.710 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-24 23:57:18.728 +03:00 [INF] Server mrrobot:7376:be7a601c successfully announced in 21.2874 ms
2025-07-24 23:57:18.787 +03:00 [INF] Server mrrobot:7376:be7a601c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-24 23:57:18.797 +03:00 [INF] 1 servers were removed due to timeout
2025-07-24 23:57:18.964 +03:00 [INF] Server mrrobot:7376:be7a601c all the dispatchers started
2025-07-24 23:57:19.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:57:19.377 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 242.7459ms
2025-07-24 23:57:19.462 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:57:19.496 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 34.3394ms
2025-07-24 23:57:19.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:57:19.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:57:19.605 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.3749ms
2025-07-24 23:57:19.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 41.257ms
2025-07-24 23:57:21.879 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - multipart/form-data; boundary=--------------------------527901315042476845993806 361918
2025-07-24 23:57:22.358 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:57:22.473 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:57:22.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:57:22.678 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:57:22.747 +03:00 [INF] Route matched with {action = "AddImagesToCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCollection(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:57:23.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 632.7203ms
2025-07-24 23:57:23.658 +03:00 [INF] Executing AddImagesToCollectionAsync for categoryId: 7
2025-07-24 23:57:23.722 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-24 23:57:23.762 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 23:57:23.816 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce) in 1026.9272ms
2025-07-24 23:57:23.897 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:57:24.911 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - 404 222 application/json; charset=utf-8 3031.6132ms
2025-07-24 23:58:08.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-24 23:58:08.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 69.66ms
2025-07-24 23:58:08.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-24 23:58:08.985 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-24 23:58:08.992 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-24 23:58:08.995 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 12.518ms
2025-07-24 23:58:09.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.1741ms
2025-07-24 23:58:09.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 62.1133ms
2025-07-24 23:58:12.362 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-24 23:58:12.652 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 289.9769ms
2025-07-24 23:58:20.971 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - multipart/form-data; boundary=--------------------------953359587763712063269297 361918
2025-07-24 23:58:21.363 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:58:21.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:58:21.401 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:58:21.416 +03:00 [INF] Route matched with {action = "AddImagesToCollection", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddImagesToCollection(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:58:21.466 +03:00 [INF] Executing AddImagesToCollectionAsync for categoryId: 7
2025-07-24 23:58:21.514 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Collections` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-24 23:58:21.534 +03:00 [INF] 📥 Saving 2 images to CollectionPhotos
2025-07-24 23:58:21.545 +03:00 [INF] 📥 Saving image to CollectionPhotos
2025-07-24 23:58:21.588 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-24 23:58:21.848 +03:00 [INF] Image added successfully (pending save)
2025-07-24 23:58:22.422 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:58:22.705 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:58:22.710 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:58:22.782 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:58:22.786 +03:00 [INF] ✅ Image saved: /CollectionPhotos/86d7251c-475c-4dfa-92cc-f624c2cea4c7.jpg
2025-07-24 23:58:22.795 +03:00 [INF] 📥 Saving image to CollectionPhotos
2025-07-24 23:58:22.882 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-24 23:58:22.886 +03:00 [INF] Image added successfully (pending save)
2025-07-24 23:58:22.965 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:58:22.983 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-24 23:58:22.986 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-24 23:58:22.988 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-24 23:58:22.994 +03:00 [INF] ✅ Image saved: /CollectionPhotos/0da7a342-5c6c-429a-949c-badedc687ba1.webp
2025-07-24 23:58:22.998 +03:00 [INF] Execute Update for entity Image
2025-07-24 23:58:23.013 +03:00 [INF] Image marked for update (pending save)
2025-07-24 23:58:23.043 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p35='?' (DbType = Int32), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int64), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (DbType = Boolean), @p28='?' (DbType = DateTime), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (Size = 4000), @p32='?' (DbType = DateTime), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p36='?' (Size = 255), @p37='?' (DbType = DateTime), @p38='?' (DbType = DateTime), @p39='?' (Size = 4000), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `AltText` = @p0, `CategoryId` = @p1, `CollectionId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `FileSize` = @p5, `FileType` = @p6, `Folder` = @p7, `Height` = @p8, `IsMain` = @p9, `ModifiedAt` = @p10, `ProductId` = @p11, `SubCategoryId` = @p12, `Title` = @p13, `UploadDate` = @p14, `Url` = @p15, `Width` = @p16
WHERE `Id` = @p17;
SELECT ROW_COUNT();

UPDATE `Images` SET `AltText` = @p18, `CategoryId` = @p19, `CollectionId` = @p20, `CreatedAt` = @p21, `DeletedAt` = @p22, `FileSize` = @p23, `FileType` = @p24, `Folder` = @p25, `Height` = @p26, `IsMain` = @p27, `ModifiedAt` = @p28, `ProductId` = @p29, `SubCategoryId` = @p30, `Title` = @p31, `UploadDate` = @p32, `Url` = @p33, `Width` = @p34
WHERE `Id` = @p35;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-24 23:58:23.149 +03:00 [INF] Removing cache by tags: [collection, CollectionWithProduct]
2025-07-24 23:58:23.162 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 23:58:23.188 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce) in 1760.9052ms
2025-07-24 23:58:23.343 +03:00 [INF] Removed 1 cache entries for tags: [collection, CollectionWithProduct]
2025-07-24 23:58:24.171 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.AddImagesToCollection (E-Commerce)'
2025-07-24 23:58:24.908 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Collection/7/images - 200 357 application/json; charset=utf-8 3936.7761ms
2025-07-24 23:58:33.419 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/admin/7?isActive&isDeleted - null null
2025-07-24 23:58:33.434 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:58:33.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:58:33.455 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce)'
2025-07-24 23:58:33.468 +03:00 [INF] Route matched with {action = "GetCollectionByIdAdmin", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CollectionDtos.CollectionDto]]] GetCollectionByIdAdmin(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:58:33.506 +03:00 [INF] Executing GetCollectionByIdAdmin for ID: 7
2025-07-24 23:58:33.516 +03:00 [INF] Getting collection by ID: 7
2025-07-24 23:58:33.520 +03:00 [INF] Getting cache for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:58:33.527 +03:00 [WRN] Cache miss for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:58:33.530 +03:00 [INF] Execute GetAll for entity Collection
2025-07-24 23:58:33.794 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-24 23:58:33.866 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__collectionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`Quantity`, `t0`.`Gender`, `t0`.`SubCategoryId`, `t0`.`Price`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`c`, `t0`.`fitType`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`, `t0`.`Id2`, `t0`.`Url`, `t0`.`c0`, `t0`.`c1`, `t0`.`c2`, `t0`.`IsActive`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    WHERE `c`.`Id` = @__collectionId_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p1`.`Name`, `p1`.`Description`, `p1`.`Quantity`, `p1`.`Gender`, `p1`.`SubCategoryId`, `p1`.`Price`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p1`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p1`.`Price`))
        ELSE `p1`.`Price`
    END AS `c`, `p1`.`fitType`, `p0`.`ProductId`, `p0`.`CollectionId`, `p1`.`Id` AS `Id0`, `d`.`Id` AS `Id1`, `t1`.`Id` AS `Id2`, `t1`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p1`.`IsActive`
    FROM `ProductCollections` AS `p0`
    INNER JOIN `Products` AS `p1` ON `p0`.`ProductId` = `p1`.`Id`
    LEFT JOIN `Discount` AS `d` ON `p1`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t1` ON `p1`.`Id` = `t1`.`ProductId`
) AS `t0` ON `t`.`Id` = `t0`.`CollectionId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`ProductId`, `t0`.`CollectionId`, `t0`.`Id0`, `t0`.`Id1`
2025-07-24 23:58:33.892 +03:00 [INF] Setting cache for key: CollectionWithProduct_id_7_IsActive__IsDeleted_
2025-07-24 23:58:33.953 +03:00 [INF] Cache set successfully for key: CollectionWithProduct_id_7_IsActive__IsDeleted_ with tags: [collection]
2025-07-24 23:58:33.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CollectionDtos.CollectionDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-24 23:58:33.979 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce) in 506.7766ms
2025-07-24 23:58:33.986 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.GetCollectionByIdAdmin (E-Commerce)'
2025-07-24 23:58:33.988 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/admin/7?isActive&isDeleted - 200 583 application/json; charset=utf-8 568.4568ms
2025-07-24 23:59:01.541 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/admin/search?searchTerm=c&isActive&isDeleted&page&pageSize - null null
2025-07-24 23:59:01.574 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:59:01.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:59:01.621 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce)'
2025-07-24 23:59:01.634 +03:00 [INF] Route matched with {action = "SearchCollectionsAdmin", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]]] SearchCollectionsAdmin(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:59:01.646 +03:00 [INF] Executing SearchCollectionsAdmin for term: c with pagination: page 1, size 10
2025-07-24 23:59:01.650 +03:00 [INF] Searching collections with term: c
2025-07-24 23:59:01.654 +03:00 [INF] Getting collection by name: c
2025-07-24 23:59:01.748 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__name_0_contains='?' (Size = 4000), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    WHERE `c`.`Name` LIKE @__name_0_contains
    ORDER BY `c`.`DisplayOrder`, `c`.`CreatedAt`
    LIMIT @__p_1 OFFSET @__p_1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
ORDER BY `t`.`DisplayOrder`, `t`.`CreatedAt`, `t`.`Id`
2025-07-24 23:59:01.754 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 23:59:01.763 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce) in 125.1523ms
2025-07-24 23:59:01.770 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce)'
2025-07-24 23:59:01.773 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/admin/search?searchTerm=c&isActive&isDeleted&page&pageSize - 200 142 application/json; charset=utf-8 313.5143ms
2025-07-24 23:59:16.390 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Collection/admin/search?searchTerm=&isActive&isDeleted&page&pageSize - null null
2025-07-24 23:59:16.400 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-24 23:59:16.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-07-24 23:59:16.411 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce)'
2025-07-24 23:59:16.418 +03:00 [INF] Route matched with {action = "SearchCollectionsAdmin", controller = "Collection"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto]]]] SearchCollectionsAdmin(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.CollectionController (E-Commerce).
2025-07-24 23:59:16.424 +03:00 [INF] Executing SearchCollectionsAdmin for term:  with pagination: page 1, size 10
2025-07-24 23:59:16.426 +03:00 [INF] Searching collections with term: 
2025-07-24 23:59:16.431 +03:00 [INF] Getting collection by name: 
2025-07-24 23:59:16.476 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`Id`, `t`.`IsActive`, `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `t`.`Name`, `t`.`c`
FROM (
    SELECT `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`Id`, `c`.`IsActive`, `c`.`Name`, (
        SELECT COUNT(*)
        FROM `ProductCollections` AS `p`
        WHERE `c`.`Id` = `p`.`CollectionId`) AS `c`
    FROM `Collections` AS `c`
    ORDER BY `c`.`DisplayOrder`, `c`.`CreatedAt`
    LIMIT @__p_0 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CollectionId`
ORDER BY `t`.`DisplayOrder`, `t`.`CreatedAt`, `t`.`Id`
2025-07-24 23:59:16.486 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CollectionDtos.CollectionSummaryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-24 23:59:16.489 +03:00 [INF] Executed action E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce) in 67.0445ms
2025-07-24 23:59:16.525 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CollectionController.SearchCollectionsAdmin (E-Commerce)'
2025-07-24 23:59:16.537 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Collection/admin/search?searchTerm=&isActive&isDeleted&page&pageSize - 200 142 application/json; charset=utf-8 147.1539ms
