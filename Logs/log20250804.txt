2025-08-04 15:53:32.823 +03:00 [INF] DB tables already exist. Exit install
2025-08-04 15:53:34.967 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 15:53:34.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 15:53:35.051 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-04 15:53:35.075 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-04 15:53:35.112 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-04 15:53:35.496 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 15:53:35.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 15:53:35.622 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-04 15:53:37.061 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-04 15:53:37.227 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-08-04 15:53:37.285 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-08-04 15:53:37.288 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-04 15:53:37.302 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-04 15:53:37.351 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-04 15:53:37.375 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-04 15:53:37.408 +03:00 [INF] Server mrrobot:18000:13651043 successfully announced in 25.551 ms
2025-08-04 15:53:37.409 +03:00 [INF] Hosting environment: Development
2025-08-04 15:53:37.428 +03:00 [INF] Server mrrobot:18000:13651043 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-04 15:53:37.430 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-04 15:53:37.462 +03:00 [INF] 1 servers were removed due to timeout
2025-08-04 15:53:37.723 +03:00 [INF] Server mrrobot:18000:13651043 all the dispatchers started
2025-08-04 15:53:40.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 15:53:41.443 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 905.3012ms
2025-08-04 15:53:41.509 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 15:53:41.525 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 15:53:41.527 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 17.4231ms
2025-08-04 15:53:41.562 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 36.7334ms
2025-08-04 15:53:41.675 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 15:53:41.841 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 165.6564ms
2025-08-04 15:53:41.923 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 15:53:42.374 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 450.8762ms
2025-08-04 15:53:45.795 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 15:53:46.307 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 511.7889ms
2025-08-04 15:53:46.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/favicon.ico - null null
2025-08-04 15:53:46.544 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-04 15:53:47.959 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-08-04 15:53:48.469 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 15:53:48.483 +03:00 [INF] No cached response available for this request.
2025-08-04 15:53:48.489 +03:00 [INF] The response could not be cached for this request.
2025-08-04 15:53:48.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/favicon.ico - 404 0 null 1954.0117ms
2025-08-04 15:53:48.503 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5069/favicon.ico, Response status code: 404
2025-08-04 15:58:21.875 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 15:58:21.887 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 11.843ms
2025-08-04 15:58:21.946 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 15:58:21.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 15:58:21.956 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 9.9463ms
2025-08-04 15:58:21.975 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.7136ms
2025-08-04 15:58:21.984 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 15:58:21.988 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 4.2638ms
2025-08-04 15:58:22.350 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 15:58:22.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.6293ms
2025-08-04 16:13:49.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 16:13:49.966 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 18.1952ms
2025-08-04 16:13:50.011 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 16:13:50.015 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 4.6596ms
2025-08-04 16:13:50.029 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 16:13:50.033 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 4.5654ms
2025-08-04 16:13:50.046 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 16:13:50.056 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.3756ms
2025-08-04 16:13:50.460 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 16:13:50.604 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 144.0679ms
2025-08-04 16:14:52.109 +03:00 [INF] DB tables already exist. Exit install
2025-08-04 16:14:53.889 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 16:14:53.905 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 16:14:53.936 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-04 16:14:53.953 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-04 16:14:53.992 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-04 16:14:54.290 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 16:14:54.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 16:14:54.376 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-04 16:14:55.090 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-04 16:14:55.172 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-08-04 16:14:55.190 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-08-04 16:14:55.196 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-04 16:14:55.199 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-04 16:14:55.201 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-04 16:14:55.218 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-04 16:14:55.224 +03:00 [INF] Hosting environment: Development
2025-08-04 16:14:55.225 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-04 16:14:55.258 +03:00 [INF] Server mrrobot:8276:36f5d493 successfully announced in 23.9364 ms
2025-08-04 16:14:55.260 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 16:14:55.311 +03:00 [INF] Server mrrobot:8276:36f5d493 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-04 16:14:55.417 +03:00 [INF] Server mrrobot:8276:36f5d493 all the dispatchers started
2025-08-04 16:14:55.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 256.4145ms
2025-08-04 16:14:55.532 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 16:14:55.539 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 6.737ms
2025-08-04 16:14:55.547 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 16:14:55.558 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 16:14:55.564 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 5.9816ms
2025-08-04 16:14:55.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.9213ms
2025-08-04 16:14:55.915 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 16:14:56.110 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.0591ms
2025-08-04 16:16:21.542 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 16:16:21.558 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 16.3396ms
2025-08-04 16:16:21.578 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 16:16:21.579 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 16:16:21.585 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 6.3642ms
2025-08-04 16:16:21.587 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 16:16:21.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.4727ms
2025-08-04 16:16:21.599 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 12.7713ms
2025-08-04 16:16:21.730 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 16:16:21.927 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 197.1193ms
2025-08-04 16:16:52.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 16:16:53.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 297.6307ms
2025-08-04 16:19:55.363 +03:00 [INF] 1 servers were removed due to timeout
2025-08-04 16:24:54.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069//api/Account/login - application/json 70
2025-08-04 16:24:54.749 +03:00 [WRN] Failed to determine the https port for redirect.
2025-08-04 16:24:55.059 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-08-04 16:24:55.076 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-08-04 16:24:55.096 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:24:55.144 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069//api/Account/login - 404 0 null 462.159ms
2025-08-04 16:24:55.180 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5069//api/Account/login, Response status code: 404
2025-08-04 16:25:02.390 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/Account/login - application/json 70
2025-08-04 16:25:02.408 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-08-04 16:25:02.413 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-08-04 16:25:02.415 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:25:02.420 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-04 16:25:02.485 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-08-04 16:25:02.968 +03:00 [INF] In LoginAsync Method 
2025-08-04 16:25:03.006 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-04 16:25:03.160 +03:00 [INF] ðŸ” Generating Access Token for User ID: 5159b4b3-dbf3-4369-b2c5-e2cff9cf0f32
2025-08-04 16:25:03.325 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-08-04 16:25:03.374 +03:00 [INF] âœ… Access Token generated successfully for User ID: 5159b4b3-dbf3-4369-b2c5-e2cff9cf0f32
2025-08-04 16:25:03.378 +03:00 [INF] ðŸ”‘ Generating Refresh Token for User ID: 5159b4b3-dbf3-4369-b2c5-e2cff9cf0f32
2025-08-04 16:25:03.395 +03:00 [INF] RefreshToken Generated
2025-08-04 16:25:03.436 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:25:03.476 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 976.7282ms
2025-08-04 16:25:03.481 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-08-04 16:25:03.509 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/Account/login - 200 1403 application/json; charset=utf-8 1118.79ms
2025-08-04 16:25:31.186 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories?search=strin&page=1&pageSize=10 - null null
2025-08-04 16:25:31.227 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-08-04 16:25:31.250 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-08-04 16:25:31.276 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:25:31.277 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetCategories (E-Commerce)'
2025-08-04 16:25:31.326 +03:00 [INF] Route matched with {action = "GetCategories", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]]] GetCategories(System.String, Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:25:31.703 +03:00 [INF] Executing GetCategories with search: strin, page: 1
2025-08-04 16:25:31.711 +03:00 [INF] Executing FilterAsync with filters
2025-08-04 16:25:31.717 +03:00 [INF] Getting cache for key: category_all_strin_True_False_1_10
2025-08-04 16:25:31.725 +03:00 [WRN] Cache miss for key: category_all_strin_True_False_1_10
2025-08-04 16:25:31.738 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:25:31.803 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-04 16:25:31.806 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-04 16:25:31.991 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean), @__Format_2='?' (Size = 20), @__Format_2_1='?' (Size = 50), @__p_4='?' (DbType = Int32), @__p_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`DisplayOrder`, `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE ((`c`.`IsActive` = @__isActive_Value_0) AND `c`.`DeletedAt` IS NULL) AND ((`c`.`Name` LIKE @__Format_2) OR (`c`.`Description` LIKE @__Format_2_1))
    LIMIT @__p_4 OFFSET @__p_3
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
ORDER BY `t`.`Id`
2025-08-04 16:25:32.146 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:25:32.154 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetCategories (E-Commerce) in 790.1751ms
2025-08-04 16:25:32.157 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetCategories (E-Commerce)'
2025-08-04 16:25:32.160 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories?search=strin&page=1&pageSize=10 - 200 274 application/json; charset=utf-8 974.2398ms
2025-08-04 16:25:38.670 +03:00 [INF] Setting cache for key: category_all_strin_True_False_1_10
2025-08-04 16:25:38.720 +03:00 [INF] Cache set successfully for key: category_all_strin_True_False_1_10 with tags: [category]
2025-08-04 16:25:48.371 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories/admin?search=strin&page=1&pageSize=10 - null null
2025-08-04 16:25:48.378 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-08-04 16:25:48.383 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-08-04 16:25:48.385 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:25:48.394 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-08-04 16:25:48.402 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-04 16:25:48.405 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories/admin?search=strin&page=1&pageSize=10 - 401 0 null 34.2032ms
2025-08-04 16:26:08.064 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories/admin?page=1&pageSize=10 - null null
2025-08-04 16:26:08.112 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:26:08.149 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:26:08.157 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoriesAdmin (E-Commerce)'
2025-08-04 16:26:08.171 +03:00 [INF] Route matched with {action = "GetCategoriesAdmin", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]]] GetCategoriesAdmin(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:26:08.183 +03:00 [INF] Executing GetCategoriesAdmin with search: , isActive: , isDeleted: , page: 1
2025-08-04 16:26:08.184 +03:00 [INF] Executing FilterAsync with filters
2025-08-04 16:26:08.188 +03:00 [INF] Getting cache for key: category_all____1_10
2025-08-04 16:26:08.197 +03:00 [WRN] Cache miss for key: category_all____1_10
2025-08-04 16:26:08.198 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:26:08.201 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-04 16:26:08.203 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-08-04 16:26:08.242 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`DisplayOrder`, `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
ORDER BY `t`.`Id`
2025-08-04 16:26:08.275 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:26:08.281 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetCategoriesAdmin (E-Commerce) in 103.2862ms
2025-08-04 16:26:08.283 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoriesAdmin (E-Commerce)'
2025-08-04 16:26:08.288 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories/admin?page=1&pageSize=10 - 200 407 application/json; charset=utf-8 224.3209ms
2025-08-04 16:26:08.730 +03:00 [INF] Setting cache for key: category_all____1_10
2025-08-04 16:26:08.738 +03:00 [INF] Cache set successfully for key: category_all____1_10 with tags: [category]
2025-08-04 16:26:44.001 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - null 0
2025-08-04 16:26:44.009 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:26:44.018 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:26:44.042 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-04 16:26:44.049 +03:00 [INF] Route matched with {action = "ActivateCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:26:44.074 +03:00 [INF] Executing ActivateCategoryAsync for id: 1
2025-08-04 16:26:44.115 +03:00 [INF] [ActivateCategory] Start activation for CategoryId: 1
2025-08-04 16:26:44.116 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:26:44.135 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`IsActive`, EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`c`.`Id` = `s`.`CategoryId`) AND (`s`.`IsActive` AND (`s`.`DeletedAt` IS NULL))) AS `HasActiveSubCategories`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`c`.`Id` = `i`.`CategoryId`) AND `i`.`DeletedAt` IS NULL) AS `HasImages`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__categoryId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-04 16:26:44.143 +03:00 [WRN] [ActivateCategory] Category 1 has no active subcategories.
2025-08-04 16:26:44.163 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:26:44.169 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce) in 114.2417ms
2025-08-04 16:26:44.177 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-04 16:26:44.179 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - 400 1209 application/json; charset=utf-8 178.0281ms
2025-08-04 16:27:04.771 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories/admin?page=1&pageSize=10 - null null
2025-08-04 16:27:04.777 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:27:04.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:27:04.785 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce)'
2025-08-04 16:27:04.795 +03:00 [INF] Route matched with {action = "GetAllForAdmin", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:27:04.804 +03:00 [INF] Executing GetAllForAdmin with isActive=, isDeleted=, page=1, pageSize=10
2025-08-04 16:27:04.810 +03:00 [INF] Executing GetAllSubCategoriesAsync in SubCategoryService with isActive: , isDeleted: , page: 1, pageSize: 10
2025-08-04 16:27:04.812 +03:00 [INF] Getting cache for key: subcategory_all___1_10
2025-08-04 16:27:04.814 +03:00 [WRN] Cache miss for key: subcategory_all___1_10
2025-08-04 16:27:04.818 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-04 16:27:04.902 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-08-04 16:27:04.931 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:27:04.939 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce) in 140.6719ms
2025-08-04 16:27:04.944 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce)'
2025-08-04 16:27:04.945 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories/admin?page=1&pageSize=10 - 200 400 application/json; charset=utf-8 173.9586ms
2025-08-04 16:27:08.886 +03:00 [INF] Setting cache for key: subcategory_all___1_10
2025-08-04 16:27:08.894 +03:00 [INF] Cache set successfully for key: subcategory_all___1_10 with tags: [subcategory]
2025-08-04 16:27:22.569 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/subcategories/1/activate - null 0
2025-08-04 16:27:22.579 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:27:22.585 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:27:22.595 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Activate (E-Commerce)'
2025-08-04 16:27:22.603 +03:00 [INF] Route matched with {action = "Activate", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] Activate(Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:27:22.611 +03:00 [INF] Executing Activate for id: 1
2025-08-04 16:27:22.630 +03:00 [INF] Activating subcategory 1
2025-08-04 16:27:22.634 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-04 16:27:22.679 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`IsActive`, EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE (`s`.`Id` = `p`.`SubCategoryId`) AND (`p`.`IsActive` AND (`p`.`DeletedAt` IS NULL))) AS `HasActiveProduct`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`s`.`Id` = `i`.`SubCategoryId`) AND `i`.`DeletedAt` IS NULL) AS `HasImages`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-08-04 16:27:22.690 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 1
2025-08-04 16:27:22.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-08-04 16:27:22.848 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `SubCategories` SET `IsActive` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();
2025-08-04 16:27:22.901 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:27:22.904 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Activate (E-Commerce) in 295.655ms
2025-08-04 16:27:22.908 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Activate (E-Commerce)'
2025-08-04 16:27:22.913 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/subcategories/1/activate - 200 298 application/json; charset=utf-8 344.1051ms
2025-08-04 16:27:28.895 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-08-04 16:27:28.913 +03:00 [INF] Removed 3 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-08-04 16:27:43.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - null null
2025-08-04 16:27:43.207 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:27:43.214 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:27:43.220 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:27:43.227 +03:00 [INF] Route matched with {action = "GetByIdForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdForUser(Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:27:43.237 +03:00 [INF] Executing GetByIdForUser for id: 1
2025-08-04 16:27:43.241 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: True, isDeleted: False
2025-08-04 16:27:43.243 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:27:43.245 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:27:43.248 +03:00 [INF] Executing privateGetSubCategoryByIdAsync for id: 1
2025-08-04 16:27:43.250 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-04 16:27:43.303 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-04 16:27:43.364 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`Price`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`c`, `t1`.`fitType`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`c0`, `t1`.`c1`, `t1`.`c2`, `t1`.`IsActive`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`IsActive`) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`Price`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`fitType`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-08-04 16:27:43.373 +03:00 [INF] Category with id: 1 exists
2025-08-04 16:27:43.415 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:27:43.425 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce) in 192.9423ms
2025-08-04 16:27:43.430 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:27:43.432 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - 200 3949 application/json; charset=utf-8 234.8593ms
2025-08-04 16:27:49.004 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:27:49.025 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:True_deleted:False with tags: [subcategorydata]
2025-08-04 16:34:29.592 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories/1 - null null
2025-08-04 16:34:29.665 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:34:29.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:34:29.709 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:34:29.715 +03:00 [INF] Route matched with {action = "GetCategoryById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetCategoryById(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:34:29.728 +03:00 [INF] Executing GetCategoryById for id: 1
2025-08-04 16:34:29.732 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: False
2025-08-04 16:34:29.736 +03:00 [INF] Getting cache for key: categoryid:1_active:True_deleted:False
2025-08-04 16:34:29.739 +03:00 [WRN] Cache miss for key: categoryid:1_active:True_deleted:False
2025-08-04 16:34:29.745 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-08-04 16:34:29.747 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:34:29.780 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-04 16:34:29.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`DisplayOrder`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`IsActive`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`Id0`, `t0`.`Url`, `t0`.`IsMain`, `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `i`.`Id` AS `Id0`, `i`.`Url`, `i`.`IsMain`, `s`.`CategoryId`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i` ON `s`.`Id` = `i`.`SubCategoryId`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN `Images` AS `i0` ON `t`.`Id` = `i0`.`CategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`
2025-08-04 16:34:29.804 +03:00 [WRN] Category with id: 1 doesn't exist
2025-08-04 16:34:29.811 +03:00 [WRN] Category with id: 1 not found
2025-08-04 16:34:29.823 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:34:29.829 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce) in 106.2298ms
2025-08-04 16:34:29.831 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:34:29.832 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories/1 - 404 1078 application/json; charset=utf-8 240.5888ms
2025-08-04 16:34:57.193 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - null null
2025-08-04 16:34:57.197 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:34:57.202 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:34:57.207 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:34:57.209 +03:00 [INF] Route matched with {action = "GetByIdForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdForUser(Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:34:57.321 +03:00 [INF] Executing GetByIdForUser for id: 1
2025-08-04 16:34:57.326 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: True, isDeleted: False
2025-08-04 16:34:57.345 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:34:57.348 +03:00 [INF] Cache hit for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:34:57.373 +03:00 [INF] Cache hit for subcategory 1 with filters
2025-08-04 16:34:57.393 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:34:57.395 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce) in 75.7423ms
2025-08-04 16:34:57.400 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:34:57.405 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - 200 3958 application/json; charset=utf-8 212.2007ms
2025-08-04 16:38:43.823 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 16:38:44.075 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 251.8051ms
2025-08-04 16:38:46.814 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 16:38:46.824 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 10.0115ms
2025-08-04 16:38:47.068 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 16:38:47.106 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.2199ms
2025-08-04 16:38:47.132 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 16:38:47.137 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 5.7682ms
2025-08-04 16:38:49.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 16:38:49.675 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.1592ms
2025-08-04 16:41:03.314 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - null null
2025-08-04 16:41:03.328 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:41:03.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:41:03.348 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:41:03.362 +03:00 [INF] Route matched with {action = "GetByIdForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdForUser(Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:41:03.368 +03:00 [INF] Executing GetByIdForUser for id: 1
2025-08-04 16:41:03.369 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: True, isDeleted: False
2025-08-04 16:41:03.371 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:41:03.380 +03:00 [INF] Cache hit for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:41:03.406 +03:00 [INF] Cache hit for subcategory 1 with filters
2025-08-04 16:41:03.414 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:41:03.417 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce) in 51.5525ms
2025-08-04 16:41:03.419 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:41:03.433 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - 200 3958 application/json; charset=utf-8 119.0269ms
2025-08-04 16:41:23.771 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - null 0
2025-08-04 16:41:23.783 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:41:23.787 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:41:23.792 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-04 16:41:23.801 +03:00 [INF] Route matched with {action = "ActivateCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:41:23.807 +03:00 [INF] Executing ActivateCategoryAsync for id: 1
2025-08-04 16:41:23.836 +03:00 [INF] [ActivateCategory] Start activation for CategoryId: 1
2025-08-04 16:41:23.837 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:41:23.850 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`IsActive`, EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`c`.`Id` = `s`.`CategoryId`) AND (`s`.`IsActive` AND (`s`.`DeletedAt` IS NULL))) AS `HasActiveSubCategories`, EXISTS (
    SELECT 1
    FROM `Images` AS `i`
    WHERE (`c`.`Id` = `i`.`CategoryId`) AND `i`.`DeletedAt` IS NULL) AS `HasImages`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__categoryId_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-08-04 16:41:23.856 +03:00 [INF] Activating category with ID: 1
2025-08-04 16:41:23.893 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__categoryId_0) AND NOT (`c`.`IsActive`)
LIMIT 1
2025-08-04 16:41:23.992 +03:00 [INF] Category 1 set to active. Saving...
2025-08-04 16:41:23.998 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-04 16:41:24.004 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-04 16:41:24.065 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-04 16:41:24.139 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `IsActive` = @p0, `ModifiedAt` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-04 16:41:24.216 +03:00 [INF] [ActivateCategory] Category 1 activated successfully.
2025-08-04 16:41:24.221 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:41:24.223 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce) in 418.2996ms
2025-08-04 16:41:24.226 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategoryAsync (E-Commerce)'
2025-08-04 16:41:24.228 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5069/api/categories/1/activate - 200 1052 application/json; charset=utf-8 456.8031ms
2025-08-04 16:41:30.244 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-08-04 16:41:30.256 +03:00 [INF] Removed 2 cache entries for tags: [category, categorywithdata]
2025-08-04 16:41:38.365 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories/1 - null null
2025-08-04 16:41:38.371 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:41:38.391 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:41:38.396 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:41:38.422 +03:00 [INF] Route matched with {action = "GetCategoryById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetCategoryById(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:41:38.426 +03:00 [INF] Executing GetCategoryById for id: 1
2025-08-04 16:41:38.428 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: False
2025-08-04 16:41:38.430 +03:00 [INF] Getting cache for key: categoryid:1_active:True_deleted:False
2025-08-04 16:41:38.433 +03:00 [WRN] Cache miss for key: categoryid:1_active:True_deleted:False
2025-08-04 16:41:38.435 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-08-04 16:41:38.436 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:41:38.472 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`DisplayOrder`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`IsActive`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`Id0`, `t0`.`Url`, `t0`.`IsMain`, `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `i`.`Id` AS `Id0`, `i`.`Url`, `i`.`IsMain`, `s`.`CategoryId`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i` ON `s`.`Id` = `i`.`SubCategoryId`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN `Images` AS `i0` ON `t`.`Id` = `i0`.`CategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`
2025-08-04 16:41:38.477 +03:00 [INF] Category with id: 1 exists
2025-08-04 16:41:38.511 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:41:38.516 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce) in 90.8857ms
2025-08-04 16:41:38.518 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:41:38.520 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories/1 - 200 1611 application/json; charset=utf-8 155.0805ms
2025-08-04 16:41:40.309 +03:00 [INF] Setting cache for key: categoryid:1_active:True_deleted:False
2025-08-04 16:41:40.327 +03:00 [INF] Cache set successfully for key: categoryid:1_active:True_deleted:False with tags: [categorywithdata]
2025-08-04 16:47:08.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - null null
2025-08-04 16:47:08.050 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:47:08.060 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:47:08.064 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce)'
2025-08-04 16:47:08.071 +03:00 [INF] Route matched with {action = "GetAllForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForUser(Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:47:08.081 +03:00 [INF] Executing GetAllForUser with page=1, pageSize=10
2025-08-04 16:47:08.082 +03:00 [INF] Executing GetAllSubCategoriesAsync in SubCategoryService with isActive: True, isDeleted: False, page: 1, pageSize: 10
2025-08-04 16:47:08.084 +03:00 [INF] Getting cache for key: subcategory_all_True_False_1_10
2025-08-04 16:47:08.086 +03:00 [WRN] Cache miss for key: subcategory_all_True_False_1_10
2025-08-04 16:47:08.091 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-04 16:47:08.152 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE `s`.`IsActive` AND (`s`.`DeletedAt` IS NULL)
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-08-04 16:47:08.179 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:47:08.181 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce) in 106.6678ms
2025-08-04 16:47:08.183 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce)'
2025-08-04 16:47:08.185 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - 200 399 application/json; charset=utf-8 140.9272ms
2025-08-04 16:47:10.625 +03:00 [INF] Setting cache for key: subcategory_all_True_False_1_10
2025-08-04 16:47:10.628 +03:00 [INF] Cache set successfully for key: subcategory_all_True_False_1_10 with tags: [subcategory]
2025-08-04 16:47:19.693 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - null null
2025-08-04 16:47:19.743 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:47:19.748 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:47:19.764 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce)'
2025-08-04 16:47:19.766 +03:00 [INF] Route matched with {action = "GetAllForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForUser(Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:47:19.770 +03:00 [INF] Executing GetAllForUser with page=1, pageSize=10
2025-08-04 16:47:19.772 +03:00 [INF] Executing GetAllSubCategoriesAsync in SubCategoryService with isActive: True, isDeleted: False, page: 1, pageSize: 10
2025-08-04 16:47:19.773 +03:00 [INF] Getting cache for key: subcategory_all_True_False_1_10
2025-08-04 16:47:19.775 +03:00 [INF] Cache hit for key: subcategory_all_True_False_1_10
2025-08-04 16:47:19.779 +03:00 [INF] Cache hit for GetAllSubCategoriesAsync with key: subcategory_all_True_False_1_10
2025-08-04 16:47:19.781 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 16:47:19.784 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce) in 14.3938ms
2025-08-04 16:47:19.786 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForUser (E-Commerce)'
2025-08-04 16:47:19.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories?page=1&pageSize=10 - 200 410 application/json; charset=utf-8 95.2215ms
2025-08-04 16:47:43.233 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/subcategories - multipart/form-data; boundary=--------------------------251357550299105537527675 470
2025-08-04 16:47:43.299 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:47:43.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:47:43.338 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:47:43.361 +03:00 [INF] Route matched with {action = "Create", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] Create(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:47:43.404 +03:00 [INF] Executing Create
2025-08-04 16:47:43.408 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:47:43.415 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Create (E-Commerce) in 49.3914ms
2025-08-04 16:47:43.417 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:47:43.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/subcategories - 400 379 application/json; charset=utf-8 185.0151ms
2025-08-04 16:47:57.742 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/subcategories - multipart/form-data; boundary=--------------------------843047693863841929608366 398
2025-08-04 16:47:57.751 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:47:57.755 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:47:57.761 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:47:57.763 +03:00 [INF] Route matched with {action = "Create", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] Create(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:47:57.770 +03:00 [INF] Executing Create
2025-08-04 16:47:57.772 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:47:57.775 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Create (E-Commerce) in 8.0263ms
2025-08-04 16:47:57.776 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:47:57.779 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/subcategories - 400 231 application/json; charset=utf-8 36.3677ms
2025-08-04 16:48:02.647 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5069/api/subcategories - multipart/form-data; boundary=--------------------------202403008262255406935631 406
2025-08-04 16:48:02.719 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:48:02.760 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:48:02.842 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:48:02.852 +03:00 [INF] Route matched with {action = "Create", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] Create(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:48:02.862 +03:00 [INF] Executing Create
2025-08-04 16:48:02.872 +03:00 [INF] Execute CreateAsync
2025-08-04 16:48:02.899 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-08-04 16:48:02.904 +03:00 [INF] Executing IsExsistByNameAsync for name: dfdsffddfds
2025-08-04 16:48:02.913 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-08-04 16:48:02.917 +03:00 [INF] Category with name: dfdsffddfds does not exist
2025-08-04 16:48:02.920 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-08-04 16:48:02.933 +03:00 [INF] SubCategory added successfully (pending save)
2025-08-04 16:48:02.949 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-08-04 16:48:02.959 +03:00 [INF] Execute AddAdminOpreationAsync
2025-08-04 16:48:02.965 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-08-04 16:48:02.968 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-08-04 16:48:02.995 +03:00 [INF] Successfully mapped subcategory to DTO
2025-08-04 16:48:03.000 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:48:03.002 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.Create (E-Commerce) in 146.5081ms
2025-08-04 16:48:03.103 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.Create (E-Commerce)'
2025-08-04 16:48:03.293 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5069/api/subcategories - 201 433 application/json; charset=utf-8 645.6407ms
2025-08-04 16:48:10.768 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-08-04 16:48:10.776 +03:00 [INF] Removed 3 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-08-04 16:48:11.693 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - null null
2025-08-04 16:48:11.785 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:48:11.796 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:48:11.816 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:48:11.817 +03:00 [INF] Route matched with {action = "GetByIdForUser", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdForUser(Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-08-04 16:48:11.821 +03:00 [INF] Executing GetByIdForUser for id: 1
2025-08-04 16:48:11.823 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: True, isDeleted: False
2025-08-04 16:48:11.825 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:48:11.827 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:48:11.829 +03:00 [INF] Executing privateGetSubCategoryByIdAsync for id: 1
2025-08-04 16:48:11.831 +03:00 [INF] Execute GetAll for entity SubCategory
2025-08-04 16:48:11.860 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-04 16:48:11.910 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`Price`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`c`, `t1`.`fitType`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`c0`, `t1`.`c1`, `t1`.`c2`, `t1`.`IsActive`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`IsActive`) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`Price`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND `d`.`DeletedAt` IS NULL) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN ROUND(`p`.`Price` - ((`d`.`DiscountPercent` / 100.0) * `p`.`Price`))
        ELSE `p`.`Price`
    END AS `c`, `p`.`fitType`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, CASE
        WHEN ((`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP())) AND `d`.`IsActive` THEN `d`.`EndDate`
        ELSE NULL
    END AS `c0`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`Name`
        ELSE NULL
    END AS `c1`, CASE
        WHEN (`d`.`Id` IS NOT NULL AND `d`.`IsActive`) AND (`d`.`EndDate` > UTC_TIMESTAMP()) THEN `d`.`DiscountPercent`
        ELSE 0.0
    END AS `c2`, `p`.`IsActive`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NULL)
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-08-04 16:48:11.916 +03:00 [INF] Category with id: 1 exists
2025-08-04 16:48:11.937 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:48:11.941 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce) in 120.8993ms
2025-08-04 16:48:11.949 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdForUser (E-Commerce)'
2025-08-04 16:48:11.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/subcategories/1 - 200 1781 application/json; charset=utf-8 257.1647ms
2025-08-04 16:48:12.416 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:True_deleted:False
2025-08-04 16:48:12.422 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:True_deleted:False with tags: [subcategorydata]
2025-08-04 16:49:17.420 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/categories/1 - null null
2025-08-04 16:49:17.437 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 16:49:17.441 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 16:49:17.445 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:49:17.446 +03:00 [INF] Route matched with {action = "GetCategoryById", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetCategoryById(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-08-04 16:49:17.451 +03:00 [INF] Executing GetCategoryById for id: 1
2025-08-04 16:49:17.452 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: False
2025-08-04 16:49:17.453 +03:00 [INF] Getting cache for key: categoryid:1_active:True_deleted:False
2025-08-04 16:49:17.455 +03:00 [WRN] Cache miss for key: categoryid:1_active:True_deleted:False
2025-08-04 16:49:17.457 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-08-04 16:49:17.459 +03:00 [INF] Execute GetAll for entity Category
2025-08-04 16:49:17.500 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`ModifiedAt`, `t`.`DisplayOrder`, `t0`.`Id`, `t0`.`Name`, `t0`.`Description`, `t0`.`IsActive`, `t0`.`CreatedAt`, `t0`.`ModifiedAt`, `t0`.`DeletedAt`, `t0`.`Id0`, `t0`.`Url`, `t0`.`IsMain`, `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`ModifiedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `i`.`Id` AS `Id0`, `i`.`Url`, `i`.`IsMain`, `s`.`CategoryId`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i` ON `s`.`Id` = `i`.`SubCategoryId`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN `Images` AS `i0` ON `t`.`Id` = `i0`.`CategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t0`.`Id0`
2025-08-04 16:49:17.507 +03:00 [INF] Category with id: 1 exists
2025-08-04 16:49:17.529 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-04 16:49:17.532 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce) in 81.4154ms
2025-08-04 16:49:17.536 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetCategoryById (E-Commerce)'
2025-08-04 16:49:17.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/categories/1 - 200 1779 application/json; charset=utf-8 116.7896ms
2025-08-04 16:49:20.981 +03:00 [INF] Setting cache for key: categoryid:1_active:True_deleted:False
2025-08-04 16:49:20.989 +03:00 [INF] Cache set successfully for key: categoryid:1_active:True_deleted:False with tags: [categorywithdata]
2025-08-04 17:00:10.589 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/api/products/1/variants - null null
2025-08-04 17:00:11.341 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-08-04 17:00:12.087 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (Size = 255), @__tokenSecurityStamp_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `AspNetUsers` AS `a`
    WHERE (`a`.`Discriminator` = 'Customer') AND ((`a`.`Id` = @__userId_0) AND (`a`.`SecurityStamp` = @__tokenSecurityStamp_1)))
2025-08-04 17:00:13.139 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-04 17:00:14.441 +03:00 [INF] Route matched with {action = "GetProductVariants", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]]] GetProductVariants(Int32) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-08-04 17:00:15.323 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-08-04 17:00:17.387 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__productId_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`Size`, `p`.`Waist`, `p`.`Length`, `p`.`Quantity`, `p`.`ProductId`, `p`.`IsActive`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`ModifiedAt`
FROM `ProductVariants` AS `p`
WHERE ((`p`.`ProductId` = @__productId_0) AND (`p`.`IsActive` = @__isActive_Value_1)) AND `p`.`DeletedAt` IS NULL
2025-08-04 17:00:18.188 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-04 17:00:19.482 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce) in 4694.08ms
2025-08-04 17:00:20.557 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.GetProductVariants (E-Commerce)'
2025-08-04 17:00:21.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/api/products/1/variants - 200 318 application/json; charset=utf-8 11043.8815ms
2025-08-04 17:02:19.521 +03:00 [INF] DB tables already exist. Exit install
2025-08-04 17:02:23.476 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 17:02:23.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-08-04 17:02:23.557 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-08-04 17:02:23.998 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-08-04 17:02:24.046 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-04 17:02:24.521 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 17:02:24.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-08-04 17:02:24.644 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-08-04 17:02:25.629 +03:00 [INF] Now listening on: http://localhost:5069
2025-08-04 17:02:25.816 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-08-04 17:02:25.969 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-08-04 17:02:25.972 +03:00 [INF] Using the following options for SQL Server job storage:
2025-08-04 17:02:25.974 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-08-04 17:02:25.975 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-08-04 17:02:26.037 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-04 17:02:26.039 +03:00 [INF] Hosting environment: Development
2025-08-04 17:02:26.041 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-08-04 17:02:26.101 +03:00 [INF] Server mrrobot:7080:eff3e32e successfully announced in 36.1668 ms
2025-08-04 17:02:26.107 +03:00 [INF] Server mrrobot:7080:eff3e32e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-08-04 17:02:26.169 +03:00 [INF] Server mrrobot:7080:eff3e32e all the dispatchers started
2025-08-04 17:02:29.021 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.html - null null
2025-08-04 17:02:30.395 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.html - 200 null text/html;charset=utf-8 1375.0495ms
2025-08-04 17:02:30.446 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_vs/browserLink - null null
2025-08-04 17:02:30.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/index.js - null null
2025-08-04 17:02:30.477 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - null null
2025-08-04 17:02:30.559 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/index.js - 200 null application/javascript;charset=utf-8 111.9162ms
2025-08-04 17:02:30.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_framework/aspnetcore-browser-refresh.js - 200 16504 application/javascript; charset=utf-8 97.348ms
2025-08-04 17:02:30.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/_vs/browserLink - 200 null text/javascript; charset=UTF-8 247.0008ms
2025-08-04 17:02:30.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - null null
2025-08-04 17:02:31.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5069/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 670.7293ms
2025-08-04 17:07:26.134 +03:00 [INF] 1 servers were removed due to timeout
2025-08-04 17:16:00.535 +03:00 [WRN] Stopping the server due to DomainUnload or ProcessExit event...
2025-08-04 17:16:00.543 +03:00 [INF] Server mrrobot:7080:eff3e32e caught stopping signal...
2025-08-04 17:16:01.440 +03:00 [INF] Server mrrobot:7080:eff3e32e caught stopped signal...
2025-08-04 17:16:01.866 +03:00 [INF] Server mrrobot:7080:eff3e32e All dispatchers stopped
2025-08-04 17:16:02.019 +03:00 [WRN] Server mrrobot:7080:eff3e32e caught shutdown signal...
