2025-07-06 00:00:08.191 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------565619686714745899067992 69721
2025-07-06 00:00:08.208 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:00:08.220 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:00:08.237 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:00:08.247 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:00:08.262 +03:00 [INF] Executing CreateAsync
2025-07-06 00:00:10.525 +03:00 [INF] Execute CreateAsync
2025-07-06 00:00:10.541 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:00:10.546 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:00:10.587 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:00:10.734 +03:00 [ERR] ❌ Exception in CreateAsync: Missing type map configuration or unsupported mapping.

Mapping types:
CreateSubCategoryDto -> SubCategory
E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto -> E_Commers.Models.SubCategory
2025-07-06 00:00:10.767 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:00:10.772 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 2514.7547ms
2025-07-06 00:00:10.775 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:00:10.777 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 415 application/json; charset=utf-8 2586.5219ms
2025-07-06 00:01:42.388 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------940301047762281516660699 69721
2025-07-06 00:01:42.412 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:01:42.428 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:01:42.462 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:01:42.465 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:01:42.472 +03:00 [INF] Executing CreateAsync
2025-07-06 00:01:44.833 +03:00 [INF] Execute CreateAsync
2025-07-06 00:01:48.348 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:01:48.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:02:04.456 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:02:19.071 +03:00 [ERR] ❌ Exception in CreateAsync: Missing type map configuration or unsupported mapping.

Mapping types:
CreateSubCategoryDto -> SubCategory
E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto -> E_Commers.Models.SubCategory
2025-07-06 00:02:19.109 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:02:19.113 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 36644.9437ms
2025-07-06 00:02:19.119 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:02:19.129 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 415 application/json; charset=utf-8 36741.9766ms
2025-07-06 00:09:56.404 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 00:09:58.075 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 00:09:58.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 00:09:58.137 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 00:09:58.167 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 00:09:58.215 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 00:09:58.595 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 00:09:58.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 00:09:58.744 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 00:09:59.884 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 00:09:59.890 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 00:09:59.989 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 00:10:00.033 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 00:10:00.036 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 00:10:00.040 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 00:10:00.041 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 00:10:00.059 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 00:10:00.061 +03:00 [INF] Hosting environment: Development
2025-07-06 00:10:00.063 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 00:10:00.083 +03:00 [INF] Server mrrobot:15072:bb06c32a successfully announced in 15.321 ms
2025-07-06 00:10:00.090 +03:00 [INF] Server mrrobot:15072:bb06c32a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 00:10:00.101 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 00:10:00.191 +03:00 [INF] Server mrrobot:15072:bb06c32a all the dispatchers started
2025-07-06 00:10:00.738 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 00:10:01.309 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 610.7179ms
2025-07-06 00:10:01.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 00:10:01.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 00:10:01.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 00:10:01.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.3276ms
2025-07-06 00:10:01.399 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 23.88ms
2025-07-06 00:10:01.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 128.771ms
2025-07-06 00:10:01.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 00:10:01.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.24ms
2025-07-06 00:10:21.271 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------003648311605118704161046 69721
2025-07-06 00:10:21.470 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:10:21.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:10:21.645 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:10:21.692 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:10:22.195 +03:00 [INF] Executing CreateAsync
2025-07-06 00:10:22.207 +03:00 [INF] Execute CreateAsync
2025-07-06 00:10:22.211 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:10:22.236 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:10:22.428 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:10:22.482 +03:00 [ERR] ❌ Exception in CreateAsync: Missing type map configuration or unsupported mapping.

Mapping types:
CreateSubCategoryDto -> SubCategory
E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto -> E_Commers.Models.SubCategory
2025-07-06 00:10:22.680 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:10:22.733 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 1023.4452ms
2025-07-06 00:10:22.737 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:10:22.750 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 415 application/json; charset=utf-8 1479.1434ms
2025-07-06 00:10:47.136 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 00:10:49.423 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 00:10:49.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 00:10:49.483 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 00:10:49.508 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 00:10:49.563 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 00:10:50.193 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 00:10:50.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 00:10:50.350 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 00:10:51.584 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 00:10:51.588 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 00:10:51.767 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 00:10:52.728 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 00:10:52.741 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 00:10:52.751 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 00:10:52.756 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 00:10:52.891 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 00:10:52.958 +03:00 [INF] Hosting environment: Development
2025-07-06 00:10:52.970 +03:00 [INF] Server mrrobot:14640:b921511e successfully announced in 75.8769 ms
2025-07-06 00:10:53.010 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 00:10:53.063 +03:00 [INF] Server mrrobot:14640:b921511e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 00:10:53.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 00:10:54.084 +03:00 [INF] Server mrrobot:14640:b921511e all the dispatchers started
2025-07-06 00:10:54.366 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 00:10:54.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 00:10:54.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 00:10:54.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1212.4297ms
2025-07-06 00:10:54.417 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 50.669ms
2025-07-06 00:10:54.393 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 24.8746ms
2025-07-06 00:10:54.611 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 242.6934ms
2025-07-06 00:10:54.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 00:10:55.039 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 340.735ms
2025-07-06 00:11:07.598 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------337307652057459663555033 69721
2025-07-06 00:11:07.938 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:11:08.015 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:11:08.199 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:11:08.258 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:11:08.943 +03:00 [INF] Executing CreateAsync
2025-07-06 00:11:10.900 +03:00 [INF] Execute CreateAsync
2025-07-06 00:11:10.920 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:11:10.960 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:11:11.195 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:11:13.211 +03:00 [ERR] ❌ Exception in CreateAsync: Missing type map configuration or unsupported mapping.

Mapping types:
CreateSubCategoryDto -> SubCategory
E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto -> E_Commers.Models.SubCategory
2025-07-06 00:11:13.421 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:11:13.482 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 5209.1265ms
2025-07-06 00:11:13.490 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:11:13.518 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 415 application/json; charset=utf-8 5920.0474ms
2025-07-06 00:11:30.083 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------023925830228696167421827 69721
2025-07-06 00:11:30.096 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 9:06:28 PM', Current time (UTC): '7/5/2025 9:11:30 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 00:11:30.104 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 9:06:28 PM', Current time (UTC): '7/5/2025 9:11:30 PM'.
2025-07-06 00:11:30.107 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:11:30.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:11:30.135 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 00:11:30.151 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 00:11:30.154 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 401 0 null 71.1944ms
2025-07-06 00:11:30.206 +03:00 [INF] Connection id "0HNDS11M5MUBL", Request id "0HNDS11M5MUBL:00000002": the application completed without reading the entire request body.
2025-07-06 00:12:02.090 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - application/json 167
2025-07-06 00:12:02.096 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:12:02.100 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 00:12:02.119 +03:00 [INF] Route matched with {action = "RefreshTokenAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] RefreshTokenAsync(E_Commers.DtoModels.RefreshTokenDto) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 00:12:02.225 +03:00 [INF] In RefreshTokenAsync Method
2025-07-06 00:12:02.281 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-07-06 00:12:02.291 +03:00 [INF] In ValidateRefreshTokenAsync Method
2025-07-06 00:12:02.315 +03:00 [INF] Valid Refreshtoken
2025-07-06 00:12:02.341 +03:00 [INF] 🔄 RefreshToken() started for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 00:12:02.362 +03:00 [INF] Successfully removed RefreshToken for User 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 00:12:02.368 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 00:12:02.428 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 00:12:02.457 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 00:12:02.465 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 00:12:02.477 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce) in 350.6345ms
2025-07-06 00:12:02.533 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 00:12:02.538 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - 200 1240 application/json; charset=utf-8 448.0393ms
2025-07-06 00:13:05.549 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------022606928724825714347175 69721
2025-07-06 00:13:05.564 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:13:05.586 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:13:05.608 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:13:05.611 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:13:05.622 +03:00 [INF] Executing CreateAsync
2025-07-06 00:13:05.624 +03:00 [INF] Execute CreateAsync
2025-07-06 00:13:05.626 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:13:05.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:13:05.668 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:13:16.034 +03:00 [ERR] ❌ Exception in CreateAsync: Missing type map configuration or unsupported mapping.

Mapping types:
CreateSubCategoryDto -> SubCategory
E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto -> E_Commers.Models.SubCategory
2025-07-06 00:13:16.088 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:13:16.095 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 10478.6321ms
2025-07-06 00:13:16.099 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:13:16.108 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 415 application/json; charset=utf-8 10566.1002ms
2025-07-06 00:15:41.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 00:15:41.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 21.2633ms
2025-07-06 00:15:41.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 00:15:41.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 00:15:41.669 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 6.4708ms
2025-07-06 00:15:41.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.3757ms
2025-07-06 00:15:41.712 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 00:15:41.718 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.8408ms
2025-07-06 00:15:42.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 00:15:43.120 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.8536ms
2025-07-06 00:15:53.332 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 00:16:02.004 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------819041977749620904194026 69721
2025-07-06 00:16:02.012 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 00:16:02.035 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 00:16:02.047 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:16:02.059 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 00:16:02.085 +03:00 [INF] Executing CreateAsync
2025-07-06 00:16:02.094 +03:00 [INF] Execute CreateAsync
2025-07-06 00:16:02.097 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 00:16:02.104 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 00:16:02.175 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 00:16:02.194 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 00:16:02.323 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 00:16:02.529 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategory` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategory`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 00:16:02.599 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 00:16:02.628 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 00:16:02.715 +03:00 [INF] Image added successfully (pending save)
2025-07-06 00:16:02.757 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 00:16:02.777 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 00:16:02.783 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 00:16:02.825 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 00:16:02.829 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/f90826fa-bf78-43e7-b880-da11e95af040.png
2025-07-06 00:16:02.833 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 00:16:02.885 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 00:16:02.889 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 00:16:02.893 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 00:16:02.910 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 00:16:02.917 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 00:16:02.929 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 00:16:02.965 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 00:16:03.006 +03:00 [INF] Retrieving subcategory with ID 1 after creation
2025-07-06 00:16:03.024 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 00:16:03.071 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 00:16:03.172 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 00:16:03.457 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 00:16:03.474 +03:00 [INF] Successfully retrieved subcategory: Id=1, Name=subcategory1
2025-07-06 00:16:03.476 +03:00 [INF] SubCategory has 1 images
2025-07-06 00:16:03.477 +03:00 [INF] Mapping subcategory with 1 images
2025-07-06 00:16:03.776 +03:00 [ERR] Mapping error: Missing type map configuration or unsupported mapping.

Mapping types:
SubCategory -> SubCategoryDto
E_Commers.Models.SubCategory -> E_Commers.DtoModels.CategoryDtos.SubCategoryDto
2025-07-06 00:16:03.777 +03:00 [ERR] SubCategory data: Id=1, Name=subcategory1, Images count=1
2025-07-06 00:16:03.855 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 00:16:03.860 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 1793.1191ms
2025-07-06 00:16:04.978 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 00:16:05.179 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 500 419 application/json; charset=utf-8 3175.4644ms
2025-07-06 15:14:52.392 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 15:14:54.084 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:14:54.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:14:54.166 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 15:14:54.184 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 15:14:54.215 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 15:14:54.548 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:14:54.621 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:14:54.650 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:14:55.770 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 15:14:55.775 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 15:14:55.882 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 15:14:55.900 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 15:14:55.903 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 15:14:55.906 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 15:14:55.908 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 15:14:55.931 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 15:14:55.951 +03:00 [INF] Hosting environment: Development
2025-07-06 15:14:55.957 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 15:14:55.957 +03:00 [INF] Server mrrobot:3948:b1d76166 successfully announced in 24.4534 ms
2025-07-06 15:14:55.975 +03:00 [INF] Server mrrobot:3948:b1d76166 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 15:14:56.304 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 15:14:56.636 +03:00 [INF] Server mrrobot:3948:b1d76166 all the dispatchers started
2025-07-06 15:14:56.992 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:14:57.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 281.0439ms
2025-07-06 15:14:57.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:14:57.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:14:57.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:14:57.346 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 19.5789ms
2025-07-06 15:14:57.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 25.2457ms
2025-07-06 15:14:57.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 142.2722ms
2025-07-06 15:14:57.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:14:57.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 275.578ms
2025-07-06 15:15:03.673 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 15:15:05.032 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:15:05.087 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 15:15:05.122 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 15:15:05.377 +03:00 [INF] In LoginAsync Method 
2025-07-06 15:15:05.388 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:15:05.502 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:15:05.575 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 15:15:05.655 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:15:05.659 +03:00 [INF] 🔑 Generating Refresh Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:15:05.668 +03:00 [INF] RefreshToken Generated
2025-07-06 15:15:05.701 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:15:05.726 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 594.859ms
2025-07-06 15:15:05.729 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 15:15:05.737 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 2064.393ms
2025-07-06 15:15:07.119 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-07-06 15:15:31.517 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------636100161311136458696227 69721
2025-07-06 15:15:31.563 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:15:31.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:15:31.596 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:15:31.607 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:15:31.649 +03:00 [INF] Executing CreateAsync
2025-07-06 15:15:31.658 +03:00 [INF] Execute CreateAsync
2025-07-06 15:15:31.662 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:15:31.676 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:15:31.760 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:15:31.865 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:15:31.873 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 261.439ms
2025-07-06 15:15:31.880 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:15:31.887 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 409 415 application/json; charset=utf-8 369.7225ms
2025-07-06 15:15:38.301 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------857676804132640574926336 69723
2025-07-06 15:15:38.313 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:15:38.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:15:38.327 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:15:38.329 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:15:38.336 +03:00 [INF] Executing CreateAsync
2025-07-06 15:15:38.337 +03:00 [INF] Execute CreateAsync
2025-07-06 15:15:38.344 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:15:38.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:15:38.371 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:15:38.394 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 15:15:38.431 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 15:15:38.522 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategory` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategory`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:15:38.560 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 15:15:38.572 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:15:38.584 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:15:38.612 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:15:38.626 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:15:38.630 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:15:38.651 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:15:38.653 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/a5544d00-0d92-42ac-8f92-c15afeab896d.png
2025-07-06 15:15:38.656 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 15:15:38.686 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 15:15:38.688 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:15:38.692 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:15:38.695 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:15:38.700 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:15:38.707 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 15:15:38.724 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (Size = 255), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:15:38.744 +03:00 [INF] Retrieving subcategory with ID 2 after creation
2025-07-06 15:15:38.748 +03:00 [INF] Executing GetSubCategoryById for id: 2
2025-07-06 15:15:38.777 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:15:38.826 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:15:38.850 +03:00 [INF] SubCategory with id: 2 exists
2025-07-06 15:15:38.851 +03:00 [INF] Successfully retrieved subcategory: Id=2, Name=subcategory1sa
2025-07-06 15:15:38.853 +03:00 [INF] SubCategory has 1 images
2025-07-06 15:15:38.854 +03:00 [INF] Mapping subcategory with 1 images
2025-07-06 15:15:38.867 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-06 15:15:38.871 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:15:38.880 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 547.6549ms
2025-07-06 15:15:38.884 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:15:38.886 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 531 application/json; charset=utf-8 584.3482ms
2025-07-06 15:17:14.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:17:14.913 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 37.8588ms
2025-07-06 15:17:15.012 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:17:15.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 4.1313ms
2025-07-06 15:17:15.028 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:17:15.034 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.9012ms
2025-07-06 15:17:15.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:17:15.089 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.7082ms
2025-07-06 15:17:16.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:17:16.305 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.2584ms
2025-07-06 15:18:03.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/SubCategoryPhotos/a5544d00-0d92-42ac-8f92-c15afeab896d.png - null null
2025-07-06 15:18:04.056 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:18:04.064 +03:00 [INF] No cached response available for this request.
2025-07-06 15:18:04.097 +03:00 [INF] Sending file. Request path: '/SubCategoryPhotos/a5544d00-0d92-42ac-8f92-c15afeab896d.png'. Physical path: 'D:\fashion\Projcet\E-Commers\E-Commers\wwwroot\SubCategoryPhotos\a5544d00-0d92-42ac-8f92-c15afeab896d.png'
2025-07-06 15:18:04.099 +03:00 [INF] The response could not be cached for this request.
2025-07-06 15:18:04.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/SubCategoryPhotos/a5544d00-0d92-42ac-8f92-c15afeab896d.png - 200 68893 image/png 136.5166ms
2025-07-06 15:18:04.162 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/favicon.ico - null null
2025-07-06 15:18:04.203 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:18:04.205 +03:00 [INF] No cached response available for this request.
2025-07-06 15:18:04.207 +03:00 [INF] The response could not be cached for this request.
2025-07-06 15:18:04.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/favicon.ico - 404 0 null 47.0729ms
2025-07-06 15:18:04.223 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7288/favicon.ico, Response status code: 404
2025-07-06 15:18:53.115 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------849261697845017751513661 590235622
2025-07-06 15:18:53.124 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:18:53.131 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:18:53.137 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:18:53.143 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:18:53.160 +03:00 [INF] Executing CreateAsync
2025-07-06 15:18:53.166 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:18:53.169 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 22.8553ms
2025-07-06 15:18:53.171 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:18:53.173 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 400 283 application/json; charset=utf-8 57.7205ms
2025-07-06 15:19:13.945 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------288506976173125487949749 457059
2025-07-06 15:19:13.957 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:19:13.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:19:13.972 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:19:13.974 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:19:13.989 +03:00 [INF] Executing CreateAsync
2025-07-06 15:19:13.997 +03:00 [INF] Execute CreateAsync
2025-07-06 15:19:13.998 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:19:14.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:19:14.026 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:19:14.041 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 15:19:14.043 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 15:19:14.049 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategory` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategory`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:19:14.057 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 15:19:14.060 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:19:14.068 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:19:14.072 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:19:14.076 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:19:14.081 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:19:14.084 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:19:14.086 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:19:14.087 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/7d5f8ef6-da09-4af5-80ba-e9c7485322f0.png
2025-07-06 15:19:14.089 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:19:14.091 +03:00 [ERR] ❌ Failed to save image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:19:14.092 +03:00 [WRN] Some images failed to save: Image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:19:14.094 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 15:19:14.105 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:19:14.107 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:19:14.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:19:14.117 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:19:14.118 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:19:14.119 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:19:14.121 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/5508c2d4-6d7f-44b1-ab9d-6d53d34031b4.png
2025-07-06 15:19:14.123 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 15:19:14.125 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 15:19:14.126 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:19:14.129 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:19:14.131 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:19:14.135 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:19:14.137 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 15:19:14.141 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `SubCategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:19:14.152 +03:00 [INF] Retrieving subcategory with ID 3 after creation
2025-07-06 15:19:14.153 +03:00 [INF] Executing GetSubCategoryById for id: 3
2025-07-06 15:19:14.191 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:19:14.198 +03:00 [INF] SubCategory with id: 3 exists
2025-07-06 15:19:14.200 +03:00 [INF] Successfully retrieved subcategory: Id=3, Name=subcategory1sas
2025-07-06 15:19:14.201 +03:00 [INF] SubCategory has 2 images
2025-07-06 15:19:14.202 +03:00 [INF] Mapping subcategory with 2 images
2025-07-06 15:19:14.204 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-06 15:19:14.206 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:19:14.208 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 232.8109ms
2025-07-06 15:19:14.211 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:19:14.223 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 719 application/json; charset=utf-8 277.9513ms
2025-07-06 15:20:43.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 15:20:43.269 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:20:43.271 +03:00 [INF] No cached response available for this request.
2025-07-06 15:20:43.313 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 15:20:43.322 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 15:20:43.325 +03:00 [INF] The response could not be cached for this request.
2025-07-06 15:20:43.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 401 0 null 61.4682ms
2025-07-06 15:21:06.372 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 15:21:06.377 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:21:06.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:21:06.402 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:21:06.408 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:21:06.418 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:21:06.423 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:21:06.424 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:21:06.427 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:21:06.433 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:21:06.444 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
ORDER BY `s`.`Id`
LIMIT @__p_1 OFFSET @__p_0
2025-07-06 15:21:06.460 +03:00 [INF] Setting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:21:06.490 +03:00 [INF] Cache set successfully for key: subcategory_filtered__False_p1_ps10_ with tags: [subcategory]
2025-07-06 15:21:06.494 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:21:06.500 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 89.3667ms
2025-07-06 15:21:06.504 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:21:06.505 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 200 820 application/json; charset=utf-8 133.4739ms
2025-07-06 15:24:00.092 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:24:00.130 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 37.6315ms
2025-07-06 15:24:00.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:24:00.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:24:00.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:24:00.237 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 36.1543ms
2025-07-06 15:24:00.240 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 38.8764ms
2025-07-06 15:24:00.251 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3644ms
2025-07-06 15:24:00.514 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:24:00.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.3089ms
2025-07-06 15:24:23.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:24:23.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 11.2084ms
2025-07-06 15:24:23.442 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:24:23.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:24:23.451 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:24:23.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.9177ms
2025-07-06 15:24:23.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 21.8722ms
2025-07-06 15:24:23.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0513ms
2025-07-06 15:24:23.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:24:23.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.634ms
2025-07-06 15:24:49.159 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=true&page=1&pageSize=10 - null null
2025-07-06 15:24:49.183 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:24:49.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:24:49.193 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:24:49.199 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:24:49.203 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:24:49.211 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:24:49.212 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:24:49.275 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`DeletedAt` IS NOT NULL
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:24:49.280 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:24:49.283 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 81.6914ms
2025-07-06 15:24:49.285 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:24:49.298 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=true&page=1&pageSize=10 - 404 365 application/json; charset=utf-8 139.0208ms
2025-07-06 15:24:57.973 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 15:24:57.981 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:24:57.994 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:24:58.000 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:24:58.002 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:24:58.007 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:24:58.011 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:24:58.012 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:24:58.061 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:24:58.068 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:24:58.072 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 66.3811ms
2025-07-06 15:24:58.075 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:24:58.077 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - 200 823 application/json; charset=utf-8 103.3512ms
2025-07-06 15:26:02.305 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:26:02.750 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 444.8635ms
2025-07-06 15:26:02.890 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:26:02.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:26:02.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:26:02.905 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.7139ms
2025-07-06 15:26:02.911 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 13.7036ms
2025-07-06 15:26:02.964 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.6516ms
2025-07-06 15:26:03.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:26:03.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.8431ms
2025-07-06 15:27:26.040 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 15:27:28.182 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:27:28.199 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:27:28.263 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 15:27:28.287 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 15:27:28.338 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 15:27:28.885 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:27:28.974 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:27:29.001 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:27:29.952 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 15:27:29.957 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 15:27:30.058 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 15:27:30.100 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 15:27:30.102 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 15:27:30.103 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 15:27:30.104 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 15:27:30.127 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 15:27:30.157 +03:00 [INF] Hosting environment: Development
2025-07-06 15:27:30.180 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 15:27:30.180 +03:00 [INF] Server mrrobot:17780:c97f696a successfully announced in 49.8487 ms
2025-07-06 15:27:30.323 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:27:30.328 +03:00 [INF] Server mrrobot:17780:c97f696a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 15:27:30.505 +03:00 [INF] Server mrrobot:17780:c97f696a all the dispatchers started
2025-07-06 15:27:30.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 265.2496ms
2025-07-06 15:27:30.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:27:30.656 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:27:30.656 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:27:30.661 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 37.4377ms
2025-07-06 15:27:30.683 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 27.1159ms
2025-07-06 15:27:30.716 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.2182ms
2025-07-06 15:27:30.783 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:27:31.020 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.9755ms
2025-07-06 15:27:55.061 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1 - null null
2025-07-06 15:27:55.174 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:27:55.236 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:27:55.292 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:27:55.323 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:27:55.603 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-06 15:27:55.608 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-06 15:27:55.612 +03:00 [INF] Getting cache for key: subcategoryid:1_active:_deleted:False
2025-07-06 15:27:55.621 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:_deleted:False
2025-07-06 15:27:55.625 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 15:27:55.744 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:27:55.800 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:27:55.893 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 15:27:55.906 +03:00 [INF] Setting cache for key: subcategoryid:1_active:_deleted:False
2025-07-06 15:27:55.940 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:_deleted:False with tags: [subcategory]
2025-07-06 15:27:55.987 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:27:56.030 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 695.1745ms
2025-07-06 15:27:56.035 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:27:56.040 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1 - 200 1318 application/json; charset=utf-8 978.8457ms
2025-07-06 15:28:07.335 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------072860555540473338981044 457062
2025-07-06 15:28:07.342 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:28:07.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:28:07.369 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:28:07.377 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:28:07.441 +03:00 [INF] Executing CreateAsync
2025-07-06 15:28:07.450 +03:00 [INF] Execute CreateAsync
2025-07-06 15:28:07.454 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:28:07.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:28:07.521 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:28:07.531 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:28:07.536 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 153.1985ms
2025-07-06 15:28:07.538 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:28:07.552 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 409 421 application/json; charset=utf-8 216.75ms
2025-07-06 15:28:12.120 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------571770106105349077581780 457064
2025-07-06 15:28:12.131 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:28:12.155 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:28:12.163 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:28:12.165 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:28:12.188 +03:00 [INF] Executing CreateAsync
2025-07-06 15:28:12.189 +03:00 [INF] Execute CreateAsync
2025-07-06 15:28:12.191 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:28:12.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:28:12.230 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:28:12.259 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 15:28:12.306 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 15:28:12.417 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategory` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategory`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:28:12.452 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 15:28:12.456 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:28:12.469 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:28:12.484 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:28:12.508 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:28:12.520 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:28:12.522 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:28:12.554 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:28:12.556 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/15d5fd2a-0df6-4530-bd97-39b5ada05d48.png
2025-07-06 15:28:12.558 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:28:12.572 +03:00 [ERR] ❌ Failed to save image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:28:12.573 +03:00 [WRN] Some images failed to save: Image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:28:12.580 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 15:28:12.589 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:28:12.591 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:28:12.619 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:28:12.629 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:28:12.631 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:28:12.633 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:28:12.635 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/46e08968-56f8-4656-a94f-3dc41c70f799.png
2025-07-06 15:28:12.638 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 15:28:12.655 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 15:28:12.656 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:28:12.658 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:28:12.661 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:28:12.669 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:28:12.682 +03:00 [INF] Removed 2 cache entries for tag: subcategory
2025-07-06 15:28:12.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `SubCategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:28:12.708 +03:00 [INF] Retrieving subcategory with ID 4 after creation
2025-07-06 15:28:12.709 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:28:12.726 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:28:12.759 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:28:12.767 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 15:28:12.768 +03:00 [INF] Successfully retrieved subcategory: Id=4, Name=subcategorysa1sas
2025-07-06 15:28:12.770 +03:00 [INF] SubCategory has 2 images
2025-07-06 15:28:12.771 +03:00 [INF] Mapping subcategory with 2 images
2025-07-06 15:28:12.773 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-06 15:28:12.776 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:28:12.787 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 618.5069ms
2025-07-06 15:28:12.801 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:28:12.806 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 724 application/json; charset=utf-8 685.7309ms
2025-07-06 15:28:30.934 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4 - null null
2025-07-06 15:28:30.939 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:28:30.943 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:28:30.950 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:28:30.952 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:28:30.957 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: , includeDeleted: False
2025-07-06 15:28:30.958 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: , includeDeleted: False
2025-07-06 15:28:30.960 +03:00 [INF] Getting cache for key: subcategoryid:4_active:_deleted:False
2025-07-06 15:28:30.965 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:_deleted:False
2025-07-06 15:28:30.966 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:28:31.008 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:28:31.022 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 15:28:31.023 +03:00 [INF] Setting cache for key: subcategoryid:4_active:_deleted:False
2025-07-06 15:28:31.026 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:_deleted:False with tags: [subcategory]
2025-07-06 15:28:31.035 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:28:31.037 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 81.389ms
2025-07-06 15:28:31.039 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:28:31.041 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4 - 200 1443 application/json; charset=utf-8 107.016ms
2025-07-06 15:28:41.272 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 15:28:41.306 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:28:41.370 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:28:41.374 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:28:41.381 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:28:41.391 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:28:41.397 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:28:41.399 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:28:41.441 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:28:41.458 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:28:41.466 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 81.2633ms
2025-07-06 15:28:41.468 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:28:41.470 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - 200 823 application/json; charset=utf-8 198.3333ms
2025-07-06 15:29:49.457 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 15:29:51.375 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:29:51.389 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:29:51.414 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 15:29:51.432 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 15:29:51.460 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 15:29:51.850 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:29:51.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:29:51.962 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:29:52.593 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 15:29:52.601 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 15:29:52.695 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 15:29:52.710 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 15:29:52.711 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 15:29:52.714 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 15:29:52.716 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 15:29:52.729 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 15:29:52.733 +03:00 [INF] Hosting environment: Development
2025-07-06 15:29:52.736 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 15:29:52.754 +03:00 [INF] Server mrrobot:18412:f434b50e successfully announced in 16.9728 ms
2025-07-06 15:29:52.766 +03:00 [INF] Server mrrobot:18412:f434b50e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 15:29:52.951 +03:00 [INF] Server mrrobot:18412:f434b50e all the dispatchers started
2025-07-06 15:29:53.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:29:53.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 188.7848ms
2025-07-06 15:29:53.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:29:53.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:29:53.358 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:29:53.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 30.0429ms
2025-07-06 15:29:53.396 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 41.8053ms
2025-07-06 15:29:53.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.2318ms
2025-07-06 15:29:53.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:29:53.656 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 166.4534ms
2025-07-06 15:30:22.299 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------401193630817712821120933 457065
2025-07-06 15:30:22.406 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:30:22.465 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:30:22.531 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:30:22.567 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:30:22.913 +03:00 [INF] Executing CreateAsync
2025-07-06 15:30:22.924 +03:00 [INF] Execute CreateAsync
2025-07-06 15:30:22.928 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 13
2025-07-06 15:30:22.948 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:30:23.100 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:30:23.129 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 15:30:23.202 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 15:30:23.318 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategory` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategory`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:30:23.360 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 15:30:23.365 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:30:23.378 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:30:23.491 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:30:23.524 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:30:23.541 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:30:23.544 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:30:23.576 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:30:23.578 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/a541c22d-e5c1-4d29-b79f-ff6f051d754e.png
2025-07-06 15:30:23.584 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 15:30:23.586 +03:00 [ERR] ❌ Failed to save image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:30:23.588 +03:00 [WRN] Some images failed to save: Image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 15:30:23.592 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 15:30:23.596 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 15:30:23.602 +03:00 [INF] Image added successfully (pending save)
2025-07-06 15:30:23.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:30:23.641 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:30:23.643 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:30:23.644 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:30:23.646 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/46b42233-88f4-472d-9fbd-596b09af9943.png
2025-07-06 15:30:23.650 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 15:30:23.672 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 15:30:23.674 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:30:23.675 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:30:23.677 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:30:23.681 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:30:23.703 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 15:30:23.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `SubCategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:30:23.728 +03:00 [INF] Retrieving subcategory with ID 5 after creation
2025-07-06 15:30:23.733 +03:00 [INF] Executing GetSubCategoryById for id: 5
2025-07-06 15:30:23.766 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:30:23.805 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:30:23.816 +03:00 [INF] SubCategory with id: 5 exists
2025-07-06 15:30:23.818 +03:00 [INF] Successfully retrieved subcategory: Id=5, Name=subcategorysas1sas
2025-07-06 15:30:23.819 +03:00 [INF] SubCategory has 2 images
2025-07-06 15:30:23.821 +03:00 [INF] Mapping subcategory with 2 images
2025-07-06 15:30:23.826 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-06 15:30:23.828 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:30:23.832 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 15:30:23.873 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:30:23.924 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 1341.8801ms
2025-07-06 15:30:23.929 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 15:30:23.986 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 725 application/json; charset=utf-8 1687.323ms
2025-07-06 15:30:31.493 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 15:30:31.544 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:30:31.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:30:31.566 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:30:31.582 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:30:31.595 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:30:31.602 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:30:31.604 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:30:31.661 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:30:31.685 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:30:31.693 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 107.1464ms
2025-07-06 15:30:31.695 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:30:31.707 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - 200 823 application/json; charset=utf-8 214.3197ms
2025-07-06 15:33:23.476 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:33:23.497 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 21.0834ms
2025-07-06 15:33:23.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:33:23.591 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:33:23.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 5.3298ms
2025-07-06 15:33:23.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:33:23.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.7285ms
2025-07-06 15:33:23.611 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.7698ms
2025-07-06 15:33:24.046 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:33:24.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.6432ms
2025-07-06 15:34:33.530 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/5 - null null
2025-07-06 15:34:33.542 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:34:33.559 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:34:33.568 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:34:33.584 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:34:33.615 +03:00 [INF] Executing GetByIdAsync for id: 5, isActive: , includeDeleted: False
2025-07-06 15:34:33.618 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 5, isActive: , includeDeleted: False
2025-07-06 15:34:33.630 +03:00 [INF] Getting cache for key: subcategoryid:5_active:_deleted:False
2025-07-06 15:34:33.635 +03:00 [WRN] Cache miss for key: subcategoryid:5_active:_deleted:False
2025-07-06 15:34:33.643 +03:00 [INF] Executing GetSubCategoryById for id: 5
2025-07-06 15:34:33.668 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:34:33.797 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:34:33.832 +03:00 [INF] SubCategory with id: 5 exists
2025-07-06 15:34:33.836 +03:00 [INF] Setting cache for key: subcategoryid:5_active:_deleted:False
2025-07-06 15:34:33.867 +03:00 [INF] Cache set successfully for key: subcategoryid:5_active:_deleted:False with tags: [subcategory]
2025-07-06 15:34:33.884 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:34:33.889 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 301.7322ms
2025-07-06 15:34:33.901 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:34:33.903 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/5 - 200 1444 application/json; charset=utf-8 372.6478ms
2025-07-06 15:34:52.798 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 15:36:21.717 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 15:36:21.735 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 12:36:21 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 15:36:21.740 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 12:36:21 PM'.
2025-07-06 15:36:21.752 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:36:21.759 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:36:21.766 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 15:36:21.784 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 15:36:21.788 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - 401 0 null 71.3797ms
2025-07-06 15:36:44.376 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - application/json 167
2025-07-06 15:36:44.380 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:36:44.389 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 15:36:44.397 +03:00 [INF] Route matched with {action = "RefreshTokenAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] RefreshTokenAsync(E_Commers.DtoModels.RefreshTokenDto) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 15:36:44.444 +03:00 [INF] In RefreshTokenAsync Method
2025-07-06 15:36:44.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-07-06 15:36:44.472 +03:00 [INF] In ValidateRefreshTokenAsync Method
2025-07-06 15:36:44.475 +03:00 [INF] Valid Refreshtoken
2025-07-06 15:36:44.482 +03:00 [INF] 🔄 RefreshToken() started for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:36:44.487 +03:00 [INF] Successfully removed RefreshToken for User 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:36:44.490 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:36:44.719 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 15:36:44.754 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:36:44.825 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:36:44.830 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce) in 429.7103ms
2025-07-06 15:36:44.833 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 15:36:44.836 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - 200 1240 application/json; charset=utf-8 460.2284ms
2025-07-06 15:37:03.464 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 15:37:03.583 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:37:03.596 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:37:03.601 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:37:03.615 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:37:03.619 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:37:03.620 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:37:03.622 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:37:03.688 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:37:03.716 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:37:03.718 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 100.4571ms
2025-07-06 15:37:03.721 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:37:03.724 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=2 - 200 823 application/json; charset=utf-8 260.103ms
2025-07-06 15:39:38.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:39:38.582 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 16.7884ms
2025-07-06 15:39:38.625 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:39:38.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:39:38.629 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 4.4988ms
2025-07-06 15:39:38.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:39:38.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.2682ms
2025-07-06 15:39:38.644 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.9713ms
2025-07-06 15:39:39.003 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:39:39.157 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.3218ms
2025-07-06 15:39:49.146 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 15:39:49.151 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:39:49.159 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:39:49.163 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:39:49.171 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:39:49.175 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 15:39:49.177 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 15:39:49.178 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 15:39:49.179 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:39:49.183 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:39:49.211 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 15:39:49.217 +03:00 [INF] Setting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 15:39:49.223 +03:00 [INF] Cache set successfully for key: subcategory_filtered__False_p1_ps10_ with tags: [subcategory]
2025-07-06 15:39:49.226 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:39:49.228 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 54.5008ms
2025-07-06 15:39:49.235 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 15:39:49.241 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 200 1989 application/json; charset=utf-8 95.8771ms
2025-07-06 15:41:46.608 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - null null
2025-07-06 15:41:46.612 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:41:46.618 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:41:46.625 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:41:46.631 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] DeleteAsync(Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:41:46.641 +03:00 [INF] Executing DeleteAsync for id: 4
2025-07-06 15:41:46.646 +03:00 [INF] Executing DeleteAsync for subCategoryId: 4
2025-07-06 15:41:46.659 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 4
2025-07-06 15:41:46.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:41:46.706 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND EXISTS (
        SELECT 1
        FROM `Products` AS `p`
        WHERE (`s`.`Id` = `p`.`SubCategoryId`) AND `p`.`DeletedAt` IS NULL))
2025-07-06 15:41:46.717 +03:00 [INF] Execute SoftDeleteAsync for entity SubCategory with ID: 4
2025-07-06 15:41:46.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 15:41:46.729 +03:00 [INF] SubCategory with ID: 4 soft deleted.
2025-07-06 15:41:46.730 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 15:41:46.732 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 15:41:46.734 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 15:41:46.741 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `SubCategory` SET `CategoryId` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `Description` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 15:41:46.748 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 15:41:46.754 +03:00 [INF] Removed 2 cache entries for tag: subcategory
2025-07-06 15:41:46.757 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:41:46.760 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce) in 121.9347ms
2025-07-06 15:41:46.762 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:41:46.764 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - 200 304 application/json; charset=utf-8 156.7778ms
2025-07-06 15:42:32.137 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 15:42:32.142 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 12:42:32 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 15:42:32.146 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 12:42:32 PM'.
2025-07-06 15:42:32.147 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:42:32.155 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:42:32.159 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 15:42:32.161 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 15:42:32.163 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 401 0 null 25.5274ms
2025-07-06 15:42:40.717 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 15:42:40.899 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:42:40.930 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 15:42:40.939 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 15:42:40.958 +03:00 [INF] In LoginAsync Method 
2025-07-06 15:42:40.965 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:42:41.068 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:42:41.080 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 15:42:41.085 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:42:41.088 +03:00 [INF] 🔑 Generating Refresh Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 15:42:41.091 +03:00 [INF] RefreshToken Generated
2025-07-06 15:42:41.094 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:42:41.100 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 157.9073ms
2025-07-06 15:42:41.104 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 15:42:41.105 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 389.3102ms
2025-07-06 15:42:57.290 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - null null
2025-07-06 15:42:57.299 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:42:57.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:42:57.309 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:42:57.311 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] DeleteAsync(Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:42:57.314 +03:00 [INF] Executing DeleteAsync for id: 4
2025-07-06 15:42:57.315 +03:00 [INF] Executing DeleteAsync for subCategoryId: 4
2025-07-06 15:42:57.323 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 4
2025-07-06 15:42:57.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:42:57.332 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND EXISTS (
        SELECT 1
        FROM `Products` AS `p`
        WHERE (`s`.`Id` = `p`.`SubCategoryId`) AND `p`.`DeletedAt` IS NULL))
2025-07-06 15:42:57.338 +03:00 [INF] Execute SoftDeleteAsync for entity SubCategory with ID: 4
2025-07-06 15:42:57.341 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 15:42:57.345 +03:00 [WRN] SubCategory with ID: 4 not found or already deleted.
2025-07-06 15:42:57.355 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:42:57.361 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce) in 47.2831ms
2025-07-06 15:42:57.364 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:42:57.366 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - 500 377 application/json; charset=utf-8 75.4025ms
2025-07-06 15:43:24.560 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 15:43:24.565 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:43:24.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:43:24.573 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:24.580 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:43:24.587 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:43:24.588 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:43:24.590 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:43:24.592 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:43:24.593 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:43:24.614 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:43:24.618 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:43:24.619 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:43:24.624 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:43:24.626 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 41.5955ms
2025-07-06 15:43:24.629 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:24.631 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 404 1164 application/json; charset=utf-8 70.8121ms
2025-07-06 15:43:33.449 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - null null
2025-07-06 15:43:33.518 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:43:33.521 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:43:33.535 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:33.539 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:43:33.587 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:43:33.588 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:43:33.589 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:43:33.593 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:43:33.595 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:43:33.614 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:43:33.618 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:43:33.621 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:43:33.628 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:43:33.630 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 44.0855ms
2025-07-06 15:43:33.633 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:33.635 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - 404 1164 application/json; charset=utf-8 185.7198ms
2025-07-06 15:43:37.452 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=false&includeDeleted=false - null null
2025-07-06 15:43:37.461 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:43:37.464 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:43:37.468 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:37.471 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:43:37.477 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: False, includeDeleted: False
2025-07-06 15:43:37.478 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: False, includeDeleted: False
2025-07-06 15:43:37.480 +03:00 [INF] Getting cache for key: subcategoryid:4_active:False_deleted:False
2025-07-06 15:43:37.483 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:False_deleted:False
2025-07-06 15:43:37.484 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:43:37.503 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:43:37.511 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:43:37.512 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:43:37.518 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:43:37.521 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 45.8479ms
2025-07-06 15:43:37.524 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:37.526 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=false&includeDeleted=false - 404 1164 application/json; charset=utf-8 73.8832ms
2025-07-06 15:43:42.234 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - null null
2025-07-06 15:43:42.350 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:43:42.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:43:42.415 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:42.416 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:43:42.419 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:43:42.420 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:43:42.421 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:43:42.430 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:43:42.431 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:43:42.498 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:43:42.509 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:43:42.510 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:43:42.514 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:43:42.517 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 98.8269ms
2025-07-06 15:43:42.519 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:43:42.527 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - 404 1164 application/json; charset=utf-8 293.6909ms
2025-07-06 15:44:55.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:44:55.478 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 14.3062ms
2025-07-06 15:44:55.524 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:44:55.528 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:44:55.528 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:44:55.533 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.0206ms
2025-07-06 15:44:55.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 9.9203ms
2025-07-06 15:44:55.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.8815ms
2025-07-06 15:44:55.633 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:44:55.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.1714ms
2025-07-06 15:45:03.712 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - null null
2025-07-06 15:45:03.717 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:45:03.721 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:45:03.726 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:45:03.733 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] DeleteAsync(Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:45:03.737 +03:00 [INF] Executing DeleteAsync for id: 4
2025-07-06 15:45:03.743 +03:00 [INF] Executing DeleteAsync for subCategoryId: 4
2025-07-06 15:45:03.746 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 4
2025-07-06 15:45:03.749 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-06 15:45:03.754 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND EXISTS (
        SELECT 1
        FROM `Products` AS `p`
        WHERE (`s`.`Id` = `p`.`SubCategoryId`) AND `p`.`DeletedAt` IS NULL))
2025-07-06 15:45:03.757 +03:00 [WRN] SubCategory 4 is already deleted
2025-07-06 15:45:03.762 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 15:45:03.765 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce) in 28.7994ms
2025-07-06 15:45:03.767 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 15:45:03.769 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - 400 401 application/json; charset=utf-8 57.3607ms
2025-07-06 15:48:05.124 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 15:48:06.565 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:48:06.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:48:06.604 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 15:48:06.621 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 15:48:06.653 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 15:48:06.963 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:48:07.036 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:48:07.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:48:07.760 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 15:48:07.762 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 15:48:07.852 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 15:48:07.882 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 15:48:07.883 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 15:48:07.885 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 15:48:07.888 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 15:48:07.902 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 15:48:07.905 +03:00 [INF] Hosting environment: Development
2025-07-06 15:48:07.909 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 15:48:07.922 +03:00 [INF] Server mrrobot:6908:e1771fc3 successfully announced in 11.9807 ms
2025-07-06 15:48:07.926 +03:00 [INF] Server mrrobot:6908:e1771fc3 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 15:48:08.109 +03:00 [INF] Server mrrobot:6908:e1771fc3 all the dispatchers started
2025-07-06 15:48:08.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:48:08.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 179.1677ms
2025-07-06 15:48:08.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:48:08.422 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:48:08.423 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:48:08.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.9553ms
2025-07-06 15:48:08.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 28.5562ms
2025-07-06 15:48:08.494 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.673ms
2025-07-06 15:48:08.534 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:48:08.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.1795ms
2025-07-06 15:48:42.388 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - null null
2025-07-06 15:48:42.509 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:48:42.556 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:48:42.608 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:48:42.633 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:48:42.909 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:48:42.915 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: False
2025-07-06 15:48:42.919 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:48:42.926 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:False
2025-07-06 15:48:42.933 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:48:43.042 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:48:43.080 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:48:43.085 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:48:43.086 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:48:43.126 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:48:43.160 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 517.7579ms
2025-07-06 15:48:43.169 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:48:43.175 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=false - 404 1164 application/json; charset=utf-8 786.6369ms
2025-07-06 15:48:51.477 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 15:48:51.872 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:48:51.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:48:51.890 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:48:51.892 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:48:51.900 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:48:51.901 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:48:51.902 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:48:51.904 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:48:51.905 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:48:51.934 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:48:51.938 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:48:51.940 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:48:51.947 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:48:51.950 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 55.1321ms
2025-07-06 15:48:51.952 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:48:51.954 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 404 1164 application/json; charset=utf-8 478.8665ms
2025-07-06 15:49:18.822 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 15:49:18.828 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:49:18.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:49:18.841 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:49:18.844 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:49:18.858 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:49:18.859 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:49:18.860 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:49:18.862 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:49:18.864 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:49:18.907 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`DiscountId`, `t0`.`Gender`, `t0`.`ImageId`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Quantity`, `t0`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`, `i`.`Id`
2025-07-06 15:49:18.911 +03:00 [WRN] SubCategory with id: 4 doesn't exist
2025-07-06 15:49:18.912 +03:00 [WRN] SubCategory with id: 4 not found
2025-07-06 15:49:18.917 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:49:18.920 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 71.3855ms
2025-07-06 15:49:18.922 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:49:18.923 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 404 1164 application/json; charset=utf-8 101.5975ms
2025-07-06 15:51:21.410 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:51:21.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 20.5666ms
2025-07-06 15:51:21.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:51:21.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:51:21.506 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 41.8278ms
2025-07-06 15:51:21.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 38.5663ms
2025-07-06 15:51:21.464 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:51:21.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.8716ms
2025-07-06 15:51:21.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:51:21.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.5469ms
2025-07-06 15:51:43.739 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:51:43.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 9.6208ms
2025-07-06 15:51:43.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:51:43.824 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:51:43.826 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:51:43.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.4082ms
2025-07-06 15:51:43.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 20.8132ms
2025-07-06 15:51:43.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.6222ms
2025-07-06 15:51:44.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:51:44.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.9341ms
2025-07-06 15:51:51.524 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 15:51:52.772 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:51:52.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 15:51:52.812 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 15:51:52.830 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 15:51:52.856 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 15:51:53.207 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:51:53.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 15:51:53.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 15:51:53.846 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 15:51:53.849 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 15:51:53.946 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 15:51:53.958 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 15:51:53.959 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 15:51:53.977 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 15:51:53.978 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 15:51:53.997 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 15:51:53.998 +03:00 [INF] Hosting environment: Development
2025-07-06 15:51:54.008 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 15:51:54.021 +03:00 [INF] Server mrrobot:16788:5cfcf60f successfully announced in 20.4669 ms
2025-07-06 15:51:54.027 +03:00 [INF] Server mrrobot:16788:5cfcf60f is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 15:51:54.034 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 15:51:54.104 +03:00 [INF] Server mrrobot:16788:5cfcf60f all the dispatchers started
2025-07-06 15:51:54.338 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 15:51:54.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 159.1736ms
2025-07-06 15:51:54.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 15:51:54.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 15:51:54.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 15:51:54.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 15.9838ms
2025-07-06 15:51:54.536 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 19.944ms
2025-07-06 15:51:54.574 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.1985ms
2025-07-06 15:51:54.622 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 15:51:54.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.6055ms
2025-07-06 15:51:56.887 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 15:51:56.988 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 15:51:57.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 15:51:57.089 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:51:57.111 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 15:51:57.381 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:51:57.386 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 15:51:57.389 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:51:57.396 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:51:57.400 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 15:51:57.520 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 15:51:57.575 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`, `t1`.`Id`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`DiscountId`, `t1`.`Gender`, `t1`.`ImageId`, `t1`.`ModifiedAt`, `t1`.`Name`, `t1`.`Quantity`, `t1`.`SubCategoryId`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`ImageId`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`
2025-07-06 15:51:57.670 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 15:51:57.683 +03:00 [INF] Setting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 15:51:57.714 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:True_deleted:True with tags: [subcategory]
2025-07-06 15:51:57.757 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 15:51:57.807 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 682.0208ms
2025-07-06 15:51:57.813 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 15:51:57.823 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1467 application/json; charset=utf-8 935.0051ms
2025-07-06 15:56:54.064 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 16:05:45.256 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:05:47.628 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:05:47.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:05:47.670 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:05:47.703 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:05:47.742 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:05:48.197 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:05:48.318 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:05:48.589 +03:00 [INF] Executed DbCommand (206ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:05:49.675 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:05:49.677 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:05:49.780 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:05:49.811 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:05:49.814 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:05:49.815 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:05:49.816 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:05:49.842 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:05:49.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:05:49.860 +03:00 [INF] Hosting environment: Development
2025-07-06 16:05:49.867 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:05:49.872 +03:00 [INF] Server mrrobot:4844:ce1c8826 successfully announced in 28.7139 ms
2025-07-06 16:05:49.882 +03:00 [INF] Server mrrobot:4844:ce1c8826 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:05:50.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 271.8355ms
2025-07-06 16:05:50.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:05:50.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:05:50.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:05:50.228 +03:00 [INF] Server mrrobot:4844:ce1c8826 all the dispatchers started
2025-07-06 16:05:50.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 36.1471ms
2025-07-06 16:05:50.242 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 43.108ms
2025-07-06 16:05:50.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 93.718ms
2025-07-06 16:05:50.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:05:50.487 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.4364ms
2025-07-06 16:09:55.147 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:09:57.479 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:09:57.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:09:57.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:09:57.544 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:09:57.598 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:09:58.133 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:09:58.216 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:09:58.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:09:58.978 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:09:58.982 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:09:59.088 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:09:59.325 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:09:59.426 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:09:59.450 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:09:59.451 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:09:59.518 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:09:59.523 +03:00 [INF] Hosting environment: Development
2025-07-06 16:09:59.529 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:09:59.527 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:09:59.540 +03:00 [INF] Server mrrobot:17720:00fa3cee successfully announced in 12.6532 ms
2025-07-06 16:09:59.549 +03:00 [INF] Server mrrobot:17720:00fa3cee is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:09:59.607 +03:00 [INF] Server mrrobot:17720:00fa3cee all the dispatchers started
2025-07-06 16:09:59.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 195.8812ms
2025-07-06 16:09:59.739 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:09:59.739 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:09:59.740 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:09:59.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 9.6837ms
2025-07-06 16:09:59.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.0003ms
2025-07-06 16:09:59.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.6938ms
2025-07-06 16:09:59.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:09:59.995 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.5596ms
2025-07-06 16:10:21.978 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:10:22.111 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:57:41 PM', Current time (UTC): '7/6/2025 1:10:22 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:10:22.120 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:57:41 PM', Current time (UTC): '7/6/2025 1:10:22 PM'.
2025-07-06 16:10:22.124 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:10:22.186 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:10:22.250 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:10:22.257 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:10:22.268 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 401 0 null 289.751ms
2025-07-06 16:10:29.290 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 16:10:29.307 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:10:29.316 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:10:29.435 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 16:10:29.845 +03:00 [INF] In LoginAsync Method 
2025-07-06 16:10:29.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:10:29.965 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:10:30.045 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 16:10:30.072 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:10:30.075 +03:00 [INF] 🔑 Generating Refresh Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:10:30.089 +03:00 [INF] RefreshToken Generated
2025-07-06 16:10:30.125 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:10:30.156 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 712.3557ms
2025-07-06 16:10:30.164 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:10:30.168 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 878.2947ms
2025-07-06 16:10:52.082 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:10:52.099 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:10:52.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:10:52.115 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:10:52.125 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:10:52.139 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:10:52.145 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:10:52.149 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:10:52.154 +03:00 [INF] Cache hit for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:10:52.171 +03:00 [INF] Cache hit for subcategory 4 with filters
2025-07-06 16:10:52.185 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:10:52.199 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 70.4874ms
2025-07-06 16:10:52.206 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:10:52.208 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1476 application/json; charset=utf-8 125.9844ms
2025-07-06 16:13:56.658 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:13:56.664 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:13:56.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:13:56.676 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:13:56.679 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:13:56.686 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:13:56.687 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:13:56.689 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:13:56.691 +03:00 [INF] Cache hit for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:13:56.693 +03:00 [INF] Cache hit for subcategory 4 with filters
2025-07-06 16:13:56.700 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:13:56.703 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 19.2993ms
2025-07-06 16:13:56.705 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:13:56.708 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1476 application/json; charset=utf-8 50.0762ms
2025-07-06 16:14:24.115 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories/13 - null null
2025-07-06 16:14:24.123 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:14:24.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:14:24.138 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 16:14:24.144 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 16:14:24.156 +03:00 [INF] Executing GetByIdAsync for id: 13, isActive: , includeDeleted: False
2025-07-06 16:14:24.160 +03:00 [INF] Execute:GetCategoryByIdAsync in services for id: 13, isActive: , includeDeleted: False
2025-07-06 16:14:24.161 +03:00 [INF] Getting cache for key: categoryid:13_active:_deleted:False
2025-07-06 16:14:24.164 +03:00 [WRN] Cache miss for key: categoryid:13_active:_deleted:False
2025-07-06 16:14:24.171 +03:00 [INF] Executing GetCategoryById for id: 13
2025-07-06 16:14:24.284 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:14:24.359 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategory` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-06 16:14:24.559 +03:00 [INF] Category with id: 13 exists
2025-07-06 16:14:24.587 +03:00 [INF] Setting cache for key: categoryid:13_active:_deleted:False
2025-07-06 16:14:24.617 +03:00 [INF] Cache set successfully for key: categoryid:13_active:_deleted:False with tags: [category]
2025-07-06 16:14:24.625 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:14:24.635 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 486.2463ms
2025-07-06 16:14:24.638 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 16:14:24.640 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories/13 - 200 2895 application/json; charset=utf-8 525.0006ms
2025-07-06 16:14:59.584 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 16:15:47.561 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 16:15:47.658 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:15:47.672 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:15:47.676 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:15:47.682 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:15:47.700 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 16:15:47.714 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 16:15:47.716 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:15:47.718 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:15:47.724 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:15:47.798 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:15:47.864 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`AltText`, `t0`.`Title`, `t0`.`Width`, `t0`.`Height`, `t0`.`FileSize`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`c`, `t1`.`Id0`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id1`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`AltText`, `i`.`Title`, `i`.`Width`, `i`.`Height`, `i`.`FileSize`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Id` AS `Id0`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t2`.`Id` AS `Id1`, `t2`.`Color`, `t2`.`Size`, `t2`.`Price`, `t2`.`Quantity` AS `Quantity0`, `t2`.`CreatedAt`, `t2`.`ModifiedAt`, `t2`.`DeletedAt`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-06 16:15:47.883 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 193.0432ms
2025-07-06 16:15:47.889 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:15:47.894 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[<>f__AnonymousType39`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType41`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[E_Commers.Enums.Gender, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`7[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[<>f__AnonymousType43`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
<>f__AnonymousType39`9 -> SubCategoryDto
<>f__AnonymousType39`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType41`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[E_Commers.Enums.Gender, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`7[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[<>f__AnonymousType43`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]] -> E_Commers.DtoModels.CategoryDtos.SubCategoryDto
   at lambda_method630(Closure, <>f__AnonymousType39`9, SubCategoryDto, ResolutionContext)
   at lambda_method629(Closure, Object, List`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method629(Closure, Object, List`1, ResolutionContext)
   at E_Commers.Services.Category.SubCategoryServices.FilterAsync(String search, Nullable`1 isActive, Boolean includeDeleted, Int32 page, Int32 pageSize, String userRole) in D:\fashion\Projcet\E-Commers\E-Commers\Services\Category\SubCategoryServices.cs:line 526
   at E_Commers.Controllers.SubCategoryController.GetAllAsync(String search, Nullable`1 isActive, Boolean includeDeleted, Int32 page, Int32 pageSize) in D:\fashion\Projcet\E-Commers\E-Commers\Controllers\SubCategoryController.cs:line 97
   at lambda_method604(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\fashion\Projcet\E-Commers\E-Commers\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commers.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\fashion\Projcet\E-Commers\E-Commers\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 16:15:47.945 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 500 null text/plain; charset=utf-8 384.8731ms
2025-07-06 16:17:12.774 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:17:12.874 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 99.195ms
2025-07-06 16:17:13.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:17:13.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:17:13.269 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:17:13.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 8.7137ms
2025-07-06 16:17:13.285 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.705ms
2025-07-06 16:17:13.312 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.3211ms
2025-07-06 16:17:15.546 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:17:15.718 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.5053ms
2025-07-06 16:19:54.570 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 16:19:54.602 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:19:54.612 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:19:54.617 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:19:54.623 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:19:54.634 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 16:19:54.635 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 16:19:54.637 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:19:54.638 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:19:54.640 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:19:54.717 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`AltText`, `t0`.`Title`, `t0`.`Width`, `t0`.`Height`, `t0`.`FileSize`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`c`, `t1`.`Id0`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id1`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`AltText`, `i`.`Title`, `i`.`Width`, `i`.`Height`, `i`.`FileSize`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Id` AS `Id0`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t2`.`Id` AS `Id1`, `t2`.`Color`, `t2`.`Size`, `t2`.`Price`, `t2`.`Quantity` AS `Quantity0`, `t2`.`CreatedAt`, `t2`.`ModifiedAt`, `t2`.`DeletedAt`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-06 16:19:54.738 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 105.7514ms
2025-07-06 16:19:54.741 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:19:54.750 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[<>f__AnonymousType39`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType41`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[E_Commers.Enums.Gender, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`7[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[<>f__AnonymousType43`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
<>f__AnonymousType39`9 -> SubCategoryDto
<>f__AnonymousType39`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType45`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int64, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType41`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[E_Commers.Enums.Gender, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`7[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[<>f__AnonymousType43`8[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]] -> E_Commers.DtoModels.CategoryDtos.SubCategoryDto
   at lambda_method630(Closure, <>f__AnonymousType39`9, SubCategoryDto, ResolutionContext)
   at lambda_method629(Closure, Object, List`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method629(Closure, Object, List`1, ResolutionContext)
   at E_Commers.Services.Category.SubCategoryServices.FilterAsync(String search, Nullable`1 isActive, Boolean includeDeleted, Int32 page, Int32 pageSize, String userRole)
   at E_Commers.Controllers.SubCategoryController.GetAllAsync(String search, Nullable`1 isActive, Boolean includeDeleted, Int32 page, Int32 pageSize)
   at lambda_method634(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at E_Commers.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 16:19:54.791 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 500 null text/plain; charset=utf-8 221.5758ms
2025-07-06 16:20:48.576 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:20:53.305 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:20:53.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:20:53.356 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:20:53.384 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:20:53.434 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:20:54.307 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:20:54.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:20:54.518 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:20:56.470 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:20:56.473 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:20:56.580 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:20:56.621 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:20:56.622 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:20:56.623 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:20:56.625 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:20:56.648 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:20:56.661 +03:00 [INF] Hosting environment: Development
2025-07-06 16:20:56.674 +03:00 [INF] Server mrrobot:7972:2ecf6a5d successfully announced in 17.1116 ms
2025-07-06 16:20:56.675 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:20:56.683 +03:00 [INF] Server mrrobot:7972:2ecf6a5d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:20:56.782 +03:00 [INF] Server mrrobot:7972:2ecf6a5d all the dispatchers started
2025-07-06 16:20:57.187 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:20:57.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 209.6723ms
2025-07-06 16:20:57.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:20:57.504 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:20:57.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 8.5352ms
2025-07-06 16:20:57.598 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.1193ms
2025-07-06 16:20:57.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:20:57.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.3956ms
2025-07-06 16:20:58.590 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:20:58.738 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 147.3569ms
2025-07-06 16:21:09.807 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 16:21:09.939 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:21:10.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:21:10.059 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:21:10.103 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:21:10.437 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 16:21:10.448 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 16:21:10.451 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:21:10.459 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:21:10.473 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:21:10.660 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:21:10.734 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`AltText`, `t0`.`Title`, `t0`.`Width`, `t0`.`Height`, `t0`.`FileSize`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`c`, `t1`.`Id0`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id1`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`AltText`, `i`.`Title`, `i`.`Width`, `i`.`Height`, `i`.`FileSize`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Id` AS `Id0`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t2`.`Id` AS `Id1`, `t2`.`Color`, `t2`.`Size`, `t2`.`Price`, `t2`.`Quantity` AS `Quantity0`, `t2`.`CreatedAt`, `t2`.`ModifiedAt`, `t2`.`DeletedAt`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-06 16:21:10.779 +03:00 [INF] Setting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 16:21:10.855 +03:00 [INF] Cache set successfully for key: subcategory_filtered__False_p1_ps10_ with tags: [subcategory]
2025-07-06 16:21:10.891 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 16:21:10.943 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 832.7654ms
2025-07-06 16:21:11.098 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 16:21:11.103 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 200 2083 application/json; charset=utf-8 1295.9256ms
2025-07-06 16:22:14.836 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=----WebKitFormBoundaryAx8QMDLqCVAOnFV3 799
2025-07-06 16:22:14.844 +03:00 [INF] CORS policy execution successful.
2025-07-06 16:22:14.895 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:22:14.903 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:22:14.910 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:22:14.916 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7288/api/SubCategory/12 - 401 0 null 80.4326ms
2025-07-06 16:25:39.178 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------559690726615045141905930 6262468
2025-07-06 16:25:39.186 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:25:39.199 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:25:39.209 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:25:39.232 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:25:39.850 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:25:39.860 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:25:39.865 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 618.4652ms
2025-07-06 16:25:39.881 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:25:39.925 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 349 application/json; charset=utf-8 746.5971ms
2025-07-06 16:25:56.712 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 16:26:06.415 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------212538106756808061378647 6262467
2025-07-06 16:26:06.700 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:26:06.718 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:26:06.728 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:06.731 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:26:06.879 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:26:06.883 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:26:06.886 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 151.707ms
2025-07-06 16:26:06.889 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:06.901 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 285 application/json; charset=utf-8 486.3999ms
2025-07-06 16:26:18.774 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------023639434849823379290715 6262466
2025-07-06 16:26:18.784 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:26:18.790 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:26:18.794 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:18.796 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:26:18.893 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:26:18.895 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:26:18.898 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 99.2459ms
2025-07-06 16:26:18.900 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:18.906 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 206 application/json; charset=utf-8 131.7326ms
2025-07-06 16:26:37.626 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------371695559915453476099140 6262467
2025-07-06 16:26:37.639 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:26:37.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:26:37.647 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:37.649 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:26:37.746 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:26:37.748 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:26:37.751 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 98.5803ms
2025-07-06 16:26:37.753 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:26:37.760 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 206 application/json; charset=utf-8 132.7253ms
2025-07-06 16:27:10.964 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:27:13.893 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:27:13.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:27:13.941 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:27:13.974 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:27:14.022 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:27:14.586 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:27:14.759 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:27:14.793 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:27:16.356 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:27:16.370 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:27:18.482 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:27:18.746 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:27:18.814 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:27:18.871 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:27:18.876 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:27:18.906 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:27:19.026 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:27:19.070 +03:00 [INF] Hosting environment: Development
2025-07-06 16:27:19.099 +03:00 [INF] Server mrrobot:11600:2135097a successfully announced in 50.9792 ms
2025-07-06 16:27:19.102 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:27:19.162 +03:00 [INF] Server mrrobot:11600:2135097a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:27:20.051 +03:00 [INF] Server mrrobot:11600:2135097a all the dispatchers started
2025-07-06 16:27:21.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 2344.3219ms
2025-07-06 16:27:21.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:27:21.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:27:21.293 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 51.2204ms
2025-07-06 16:27:21.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:27:21.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 93.7068ms
2025-07-06 16:27:21.515 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 209.1426ms
2025-07-06 16:27:21.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:27:21.916 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.9625ms
2025-07-06 16:27:30.582 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------611513874134062903733969 6262467
2025-07-06 16:27:31.120 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:27:31.224 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:27:31.380 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:27:31.436 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:27:35.560 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:28:04.396 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:28:04.441 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 32993.208ms
2025-07-06 16:28:04.444 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:28:04.462 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 206 application/json; charset=utf-8 33880.226ms
2025-07-06 16:28:51.755 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:28:52.964 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:28:52.979 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:28:53.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:28:53.018 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:28:53.043 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:28:53.350 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:28:53.419 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:28:53.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:28:53.953 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:28:53.956 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:28:54.031 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:28:54.047 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:28:54.048 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:28:54.049 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:28:54.050 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:28:54.064 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:28:54.066 +03:00 [INF] Hosting environment: Development
2025-07-06 16:28:54.068 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:28:54.081 +03:00 [INF] Server mrrobot:276:2f6d5ab2 successfully announced in 13.1079 ms
2025-07-06 16:28:54.086 +03:00 [INF] Server mrrobot:276:2f6d5ab2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:28:54.173 +03:00 [INF] Server mrrobot:276:2f6d5ab2 all the dispatchers started
2025-07-06 16:28:54.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:28:54.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 276.8291ms
2025-07-06 16:28:55.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:28:55.512 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:28:55.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 171.0076ms
2025-07-06 16:28:55.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 288.4379ms
2025-07-06 16:28:55.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:28:55.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.6157ms
2025-07-06 16:28:56.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:28:56.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.1752ms
2025-07-06 16:29:05.310 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------478995872777956898280628 6262467
2025-07-06 16:29:05.455 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:29:05.547 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:29:05.627 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:05.711 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:29:06.236 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:29:06.245 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:29:06.289 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 561.6022ms
2025-07-06 16:29:06.310 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:06.584 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 400 206 application/json; charset=utf-8 1274.2273ms
2025-07-06 16:29:14.892 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - multipart/form-data; boundary=--------------------------731881575576154836214354 6262468
2025-07-06 16:29:14.905 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:29:14.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:29:14.925 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:14.927 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:29:15.047 +03:00 [INF] Executing UpdateAsync for id: 12
2025-07-06 16:29:15.054 +03:00 [INF] Executing UpdateAsync for subCategoryId: 12
2025-07-06 16:29:15.061 +03:00 [INF] Executing GetSubCategoryById for id: 12
2025-07-06 16:29:15.206 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:29:15.279 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:29:15.286 +03:00 [WRN] SubCategory with id: 12 doesn't exist
2025-07-06 16:29:15.323 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:29:15.332 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 402.0005ms
2025-07-06 16:29:15.368 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:15.373 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/12 - 404 1172 application/json; charset=utf-8 480.9173ms
2025-07-06 16:29:56.247 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------483110175853260694977359 6262468
2025-07-06 16:29:56.254 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:29:56.264 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:29:56.271 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:56.274 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:29:56.383 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:29:56.385 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:29:56.387 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:29:56.439 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:29:56.450 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:29:56.471 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:29:56.475 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:29:56.481 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:29:56.483 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:29:56.484 +03:00 [WRN] All new images failed to save
2025-07-06 16:29:56.496 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Name` = @__name_0
LIMIT 1
2025-07-06 16:29:56.503 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 0
2025-07-06 16:29:56.520 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 16:29:56.525 +03:00 [WRN] Category with ID 0 not found or deleted
2025-07-06 16:29:56.550 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:29:56.577 +03:00 [INF] Removed 2 cache entries for tag: subcategory
2025-07-06 16:29:56.594 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:29:56.604 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 324.7163ms
2025-07-06 16:29:56.606 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:29:56.616 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1549 application/json; charset=utf-8 369.1299ms
2025-07-06 16:30:50.154 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------851757537615551678882815 6262467
2025-07-06 16:30:50.162 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 1:30:50 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:30:50.170 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 1:30:50 PM'.
2025-07-06 16:30:50.172 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:30:50.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:30:50.187 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:30:50.193 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:30:50.198 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 401 0 null 44.2468ms
2025-07-06 16:30:50.209 +03:00 [INF] Connection id "0HNDSI46R2AI5", Request id "0HNDSI46R2AI5:00000004": the application completed without reading the entire request body.
2025-07-06 16:30:58.191 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 16:30:58.197 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:30:58.210 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:30:58.224 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 16:30:58.298 +03:00 [INF] In LoginAsync Method 
2025-07-06 16:30:58.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:30:58.444 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:30:58.477 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 16:30:58.503 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:30:58.505 +03:00 [INF] 🔑 Generating Refresh Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:30:58.512 +03:00 [INF] RefreshToken Generated
2025-07-06 16:30:58.519 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:30:58.524 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 294.8817ms
2025-07-06 16:30:58.556 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:30:58.620 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 428.6915ms
2025-07-06 16:31:17.075 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------940030334366366034590968 6262467
2025-07-06 16:31:17.086 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:31:17.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:31:17.095 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:31:17.097 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:31:17.194 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:31:17.195 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:31:17.196 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:31:17.251 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:31:17.258 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:31:17.266 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:31:17.268 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:31:17.269 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:31:17.272 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:31:17.274 +03:00 [WRN] All new images failed to save
2025-07-06 16:31:17.276 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Name` = @__name_0
LIMIT 1
2025-07-06 16:31:17.281 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:31:17.283 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 16:31:17.291 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:31:17.294 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 194.5053ms
2025-07-06 16:31:17.296 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:31:17.301 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1487 application/json; charset=utf-8 225.7361ms
2025-07-06 16:32:30.899 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - null null
2025-07-06 16:32:30.905 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:32:30.909 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:32:30.913 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 16:32:30.920 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] DeleteAsync(Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:32:30.933 +03:00 [INF] Executing DeleteAsync for id: 4
2025-07-06 16:32:30.949 +03:00 [INF] Executing DeleteAsync for subCategoryId: 4
2025-07-06 16:32:30.958 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:32:30.970 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`DeletedAt`
FROM `SubCategory` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-06 16:32:30.976 +03:00 [WRN] SubCategory 4 is already deleted
2025-07-06 16:32:30.979 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 16:32:30.986 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce) in 55.5435ms
2025-07-06 16:32:30.993 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.DeleteAsync (E-Commerce)'
2025-07-06 16:32:31.000 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/4 - 400 401 application/json; charset=utf-8 100.6202ms
2025-07-06 16:33:37.733 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------809447975986536578534492 6262467
2025-07-06 16:33:37.746 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:33:37.752 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:33:37.757 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:33:37.759 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:33:37.853 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:33:37.855 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:33:37.856 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:33:37.905 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:33:37.911 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:33:37.913 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:33:37.914 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:33:37.916 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:33:37.922 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:33:37.923 +03:00 [WRN] All new images failed to save
2025-07-06 16:33:37.925 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Name` = @__name_0
LIMIT 1
2025-07-06 16:33:37.929 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:33:37.932 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 16:33:37.938 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:33:37.941 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 178.6669ms
2025-07-06 16:33:37.943 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:33:37.976 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1487 application/json; charset=utf-8 244.4663ms
2025-07-06 16:33:54.113 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 16:35:00.536 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:35:02.067 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:35:02.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:35:02.132 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:35:02.153 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:35:02.203 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:35:02.598 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:35:02.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:35:02.784 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:35:03.704 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:35:03.723 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:35:03.844 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:35:03.907 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:35:03.908 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:35:03.926 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:35:03.930 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:35:03.997 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:35:04.031 +03:00 [INF] Server mrrobot:19400:10d1666c successfully announced in 20.0997 ms
2025-07-06 16:35:04.048 +03:00 [INF] Hosting environment: Development
2025-07-06 16:35:04.056 +03:00 [INF] Server mrrobot:19400:10d1666c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:35:04.060 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:35:04.791 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:35:05.109 +03:00 [INF] Server mrrobot:19400:10d1666c all the dispatchers started
2025-07-06 16:35:05.997 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------452481972092438023071298 6262467
2025-07-06 16:35:06.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1343.5965ms
2025-07-06 16:35:06.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:35:06.341 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:35:06.341 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:35:06.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 56.9531ms
2025-07-06 16:35:06.439 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 98.1012ms
2025-07-06 16:35:06.521 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:35:06.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 241.5848ms
2025-07-06 16:35:06.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:35:06.780 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:35:06.925 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:35:06.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.0869ms
2025-07-06 16:35:06.991 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:35:07.757 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:35:07.764 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:35:07.774 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:35:07.945 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:35:08.005 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:35:08.021 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:35:08.076 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:35:08.112 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 1043.341ms
2025-07-06 16:35:08.115 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:35:08.148 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 404 1162 application/json; charset=utf-8 2151.5436ms
2025-07-06 16:35:27.133 +03:00 [INF] Request starting HTTP/2 PATCH https://localhost:7288/api/SubCategory/4/Restore - null null
2025-07-06 16:35:27.139 +03:00 [INF] CORS policy execution successful.
2025-07-06 16:35:27.147 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:35:27.160 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:35:27.167 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:35:27.173 +03:00 [INF] Request finished HTTP/2 PATCH https://localhost:7288/api/SubCategory/4/Restore - 401 0 null 40.2875ms
2025-07-06 16:36:06.460 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/SubCategory/4/Restore - null 0
2025-07-06 16:36:06.468 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:36:06.484 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:36:06.498 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.ReturnRemovedSubCategoryAsync (E-Commerce)'
2025-07-06 16:36:06.515 +03:00 [INF] Route matched with {action = "ReturnRemovedSubCategoryAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] ReturnRemovedSubCategoryAsync(Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:36:06.529 +03:00 [INF] Executing ReturnRemovedSubCategoryAsync for id: 4
2025-07-06 16:36:06.535 +03:00 [INF] Executing ReturnRemovedSubCategoryAsync for id: 4
2025-07-06 16:36:06.568 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:36:06.595 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`DeletedAt`
FROM `SubCategory` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-06 16:36:06.602 +03:00 [INF] Execute RestoreAsync for entity SubCategory with ID: 4
2025-07-06 16:36:06.627 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NOT NULL
LIMIT 1
2025-07-06 16:36:06.732 +03:00 [INF] SubCategory with ID: 4 restored.
2025-07-06 16:36:06.735 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 16:36:06.745 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 16:36:06.832 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 16:36:07.027 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `SubCategory` SET `CategoryId` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `Description` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 16:36:07.116 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:36:07.136 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 16:36:07.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:36:07.184 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.ReturnRemovedSubCategoryAsync (E-Commerce) in 665.5454ms
2025-07-06 16:36:07.195 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.ReturnRemovedSubCategoryAsync (E-Commerce)'
2025-07-06 16:36:07.198 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/SubCategory/4/Restore - 200 1273 application/json; charset=utf-8 738.3841ms
2025-07-06 16:36:23.018 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------889498122720690500491699 6262464
2025-07-06 16:36:23.060 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:36:23.067 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:36:23.079 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:36:23.081 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:36:23.256 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:36:23.258 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:36:23.259 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:36:23.310 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:36:23.316 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:36:23.330 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:36:23.334 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:36:23.336 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:36:23.338 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:36:23.340 +03:00 [WRN] All new images failed to save
2025-07-06 16:36:23.355 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Name` = @__name_0
LIMIT 1
2025-07-06 16:36:23.361 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:36:23.364 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 16:36:23.383 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:36:23.396 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 312.258ms
2025-07-06 16:36:23.399 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:36:23.464 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1460 application/json; charset=utf-8 446.2305ms
2025-07-06 16:36:29.623 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:36:29.641 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 1:36:29 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:36:29.651 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 1:36:29 PM'.
2025-07-06 16:36:29.652 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:36:29.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:36:29.664 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:36:29.667 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:36:29.669 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 401 0 null 46.329ms
2025-07-06 16:36:41.385 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:36:41.398 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:36:41.402 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:36:41.408 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:36:41.417 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:36:41.436 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:36:41.442 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:36:41.447 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:36:41.452 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:36:41.454 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:36:41.492 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:36:41.540 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:36:41.547 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:36:41.551 +03:00 [INF] Setting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:36:41.615 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:True_deleted:True with tags: [subcategory]
2025-07-06 16:36:41.621 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:36:41.625 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 201.8247ms
2025-07-06 16:36:41.628 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:36:41.629 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1457 application/json; charset=utf-8 244.8015ms
2025-07-06 16:40:04.116 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 16:41:59.286 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------286445005613799100966730 6262464
2025-07-06 16:41:59.307 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:41:59.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:41:59.340 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:41:59.343 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:41:59.588 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:41:59.593 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:41:59.594 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:41:59.718 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:41:59.782 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:41:59.804 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:41:59.810 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:41:59.811 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:41:59.825 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:41:59.827 +03:00 [WRN] All new images failed to save
2025-07-06 16:41:59.832 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategory` AS `s`
WHERE `s`.`Name` = @__name_0
LIMIT 1
2025-07-06 16:41:59.850 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:41:59.873 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 16:41:59.878 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:41:59.891 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 545.4359ms
2025-07-06 16:41:59.893 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:41:59.910 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1460 application/json; charset=utf-8 623.9216ms
2025-07-06 16:42:16.509 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:42:16.939 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:42:16.945 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:42:16.958 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:42:16.960 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:42:16.967 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:42:16.995 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:42:16.999 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:42:17.005 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:42:17.009 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:42:17.175 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:42:17.342 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:42:17.345 +03:00 [INF] Setting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:42:17.357 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:True_deleted:True with tags: [subcategory]
2025-07-06 16:42:17.362 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:42:17.367 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 402.5732ms
2025-07-06 16:42:17.395 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:42:17.459 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1457 application/json; charset=utf-8 949.1979ms
2025-07-06 16:44:44.738 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:44:48.841 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:44:48.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:44:48.954 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:44:48.977 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:44:49.025 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:44:49.905 +03:00 [INF] Executed DbCommand (121ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:44:50.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:44:50.123 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:44:51.815 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:44:51.825 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:44:51.999 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:44:52.117 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:44:52.123 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:44:52.124 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:44:52.125 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:44:52.160 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:44:52.266 +03:00 [INF] Hosting environment: Development
2025-07-06 16:44:52.362 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:44:52.382 +03:00 [INF] Server mrrobot:17140:fa67807c successfully announced in 206.4743 ms
2025-07-06 16:44:52.393 +03:00 [INF] Server mrrobot:17140:fa67807c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:44:52.579 +03:00 [INF] Server mrrobot:17140:fa67807c all the dispatchers started
2025-07-06 16:44:53.277 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:44:53.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 406.0128ms
2025-07-06 16:44:57.066 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:44:57.077 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 11.4671ms
2025-07-06 16:44:57.097 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:44:57.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.2092ms
2025-07-06 16:44:57.207 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:44:57.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.5361ms
2025-07-06 16:45:06.326 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------944998087863490219563569 6262464
2025-07-06 16:45:06.699 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:45:06.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:45:06.944 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:45:07.013 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:45:08.416 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:45:08.448 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:45:08.467 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:45:08.729 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:45:08.826 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:45:08.841 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:45:08.876 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:45:08.881 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:45:08.883 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:45:08.889 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:45:08.891 +03:00 [WRN] All new images failed to save
2025-07-06 16:45:08.893 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:45:08.923 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__subCategory_Name_0='?' (Size = 4000), @__subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Name` = @__subCategory_Name_0) AND (`s`.`Id` <> @__subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 16:45:08.930 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 16:45:08.939 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 16:45:09.026 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 16:45:09.380 +03:00 [INF] Executed DbCommand (129ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 16:45:09.495 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:45:09.542 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 16:45:09.646 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:45:09.762 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 2705.8097ms
2025-07-06 16:45:09.765 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:45:09.812 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1486 application/json; charset=utf-8 3486.0614ms
2025-07-06 16:45:10.156 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:45:10.297 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.5678ms
2025-07-06 16:45:24.008 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:45:24.017 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:45:24.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:45:24.040 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:45:24.047 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:45:24.062 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:45:24.065 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:45:24.068 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:45:24.076 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:45:24.078 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:45:24.124 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:45:24.180 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:45:24.190 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:45:24.194 +03:00 [INF] Setting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:45:24.243 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:True_deleted:True with tags: [subcategory]
2025-07-06 16:45:24.250 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:45:24.256 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 205.5127ms
2025-07-06 16:45:24.259 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:45:24.261 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1457 application/json; charset=utf-8 252.4316ms
2025-07-06 16:49:24.282 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:49:25.689 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:49:25.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:49:25.729 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:49:25.761 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:49:25.819 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:49:26.327 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:49:26.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:49:26.458 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:49:27.206 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:49:27.216 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:49:27.306 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:49:27.421 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:49:27.431 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:49:27.480 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:49:28.288 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:49:28.333 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:49:28.531 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:49:28.607 +03:00 [INF] Server mrrobot:17552:643df46a successfully announced in 65.648 ms
2025-07-06 16:49:28.623 +03:00 [INF] Hosting environment: Development
2025-07-06 16:49:28.672 +03:00 [INF] Server mrrobot:17552:643df46a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:49:28.674 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:49:28.729 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 16:49:28.917 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 584.1848ms
2025-07-06 16:49:28.957 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:49:28.958 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:49:29.002 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:49:29.316 +03:00 [INF] Server mrrobot:17552:643df46a all the dispatchers started
2025-07-06 16:49:29.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 443.6022ms
2025-07-06 16:49:29.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 444.0647ms
2025-07-06 16:49:29.472 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 470.2356ms
2025-07-06 16:49:29.596 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:49:30.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 455.303ms
2025-07-06 16:49:40.381 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------920871503037500762458058 6262464
2025-07-06 16:49:40.525 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:49:40.647 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:49:40.716 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:49:40.750 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:49:41.410 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:49:41.425 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:49:41.434 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:49:41.662 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:49:41.758 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:49:41.824 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:49:41.874 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:49:41.887 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:49:41.889 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:49:41.891 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:49:41.892 +03:00 [WRN] All new images failed to save
2025-07-06 16:49:41.907 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:49:41.949 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__subCategory_Name_0='?' (Size = 4000), @__subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE ((`s`.`Name` = @__subCategory_Name_0) AND (`s`.`Id` <> @__subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 16:49:41.975 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 16:49:41.995 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 16:49:42.118 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 16:49:42.255 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 16:49:42.312 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:49:42.338 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 16:49:42.405 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:49:42.499 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 1737.1235ms
2025-07-06 16:49:42.651 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:49:42.683 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1486 application/json; charset=utf-8 2302.3454ms
2025-07-06 16:49:47.419 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:49:47.489 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:49:47.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:49:47.548 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:49:47.556 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:49:47.576 +03:00 [INF] Executing GetByIdAsync for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:49:47.582 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 4, isActive: True, includeDeleted: True
2025-07-06 16:49:47.586 +03:00 [INF] Getting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:49:47.592 +03:00 [WRN] Cache miss for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:49:47.596 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:49:47.659 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:49:47.978 +03:00 [INF] Executed DbCommand (302ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:49:48.044 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:49:48.053 +03:00 [INF] Setting cache for key: subcategoryid:4_active:True_deleted:True
2025-07-06 16:49:48.122 +03:00 [INF] Cache set successfully for key: subcategoryid:4_active:True_deleted:True with tags: [subcategory]
2025-07-06 16:49:48.159 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:49:48.167 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 603.1815ms
2025-07-06 16:49:48.241 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 16:49:48.337 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 200 1457 application/json; charset=utf-8 918.267ms
2025-07-06 16:52:44.004 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 16:52:48.162 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:52:48.177 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 16:52:48.211 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 16:52:48.237 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 16:52:48.294 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 16:52:48.805 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:52:48.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 16:52:48.925 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:52:50.893 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 16:52:50.898 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 16:52:55.304 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 16:52:56.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 16:52:56.655 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 16:52:57.379 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 16:52:57.387 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 16:52:59.039 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 16:53:00.207 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 16:53:00.258 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - null null
2025-07-06 16:53:00.260 +03:00 [INF] Hosting environment: Development
2025-07-06 16:53:00.368 +03:00 [INF] Server mrrobot:6960:aa05961a successfully announced in 120.7265 ms
2025-07-06 16:53:00.918 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 16:53:01.157 +03:00 [INF] Server mrrobot:6960:aa05961a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 16:53:02.410 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 6178.198ms
2025-07-06 16:53:02.756 +03:00 [INF] Server mrrobot:6960:aa05961a all the dispatchers started
2025-07-06 16:53:02.863 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:45:58 PM', Current time (UTC): '7/6/2025 1:53:02 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:53:02.957 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:45:58 PM', Current time (UTC): '7/6/2025 1:53:02 PM'.
2025-07-06 16:53:03.039 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:53:03.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 16:53:03.176 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 16:53:03.229 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:53:03.337 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 16:53:03.375 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 213.7977ms
2025-07-06 16:53:03.327 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 150.7492ms
2025-07-06 16:53:03.660 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:53:03.723 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 386.4597ms
2025-07-06 16:53:03.729 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:53:03.909 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/4?isActive=true&includeDeleted=true - 401 0 null 3665.2389ms
2025-07-06 16:53:06.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 16:53:06.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 505.2312ms
2025-07-06 16:53:10.679 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------932059975810361680348735 6262464
2025-07-06 16:53:13.892 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:45:58 PM', Current time (UTC): '7/6/2025 1:53:13 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:53:14.058 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:45:58 PM', Current time (UTC): '7/6/2025 1:53:13 PM'.
2025-07-06 16:53:14.534 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:53:20.602 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:53:20.746 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:53:20.811 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:53:20.948 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 401 0 null 10269.0587ms
2025-07-06 16:53:21.089 +03:00 [INF] Connection id "0HNDSIHJ2EG40", Request id "0HNDSIHJ2EG40:00000002": the application completed without reading the entire request body.
2025-07-06 16:53:31.780 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 16:53:34.012 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 4:43:53 PM', Current time (UTC): '7/6/2025 1:53:33 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 16:53:34.940 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 4:43:53 PM', Current time (UTC): '7/6/2025 1:53:33 PM'.
2025-07-06 16:53:35.667 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:53:35.854 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:53:37.190 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 16:53:37.974 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 16:53:38.026 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 16:53:38.030 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - 401 0 null 6249.7342ms
2025-07-06 16:53:38.142 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:53:38.181 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:53:38.382 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 16:53:40.460 +03:00 [INF] In LoginAsync Method 
2025-07-06 16:53:40.594 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 16:53:40.890 +03:00 [INF] 🔐 Generating Access Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:53:41.106 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 16:53:41.174 +03:00 [INF] ✅ Access Token generated successfully for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:53:41.179 +03:00 [INF] 🔑 Generating Refresh Token for User ID: 54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 16:53:41.209 +03:00 [INF] RefreshToken Generated
2025-07-06 16:53:41.309 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:53:41.481 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 2282.4554ms
2025-07-06 16:53:41.852 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 16:53:42.233 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 4207.4695ms
2025-07-06 16:54:25.122 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------162127786926224178460488 6262464
2025-07-06 16:54:25.143 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 16:54:25.151 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 16:54:25.156 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:54:25.177 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 16:54:56.097 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 16:54:56.246 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 16:54:56.259 +03:00 [INF] Executing GetSubCategoryById for id: 4
2025-07-06 16:54:56.526 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 16:54:56.627 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategory` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 16:54:56.644 +03:00 [INF] SubCategory with id: 4 exists
2025-07-06 16:54:56.689 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 16:54:56.694 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 16:54:56.698 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 16:54:56.702 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 16:54:56.707 +03:00 [WRN] All new images failed to save
2025-07-06 16:54:56.710 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 16:54:56.779 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__subCategory_Name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategory` AS `s`
    WHERE `s`.`Name` = @__subCategory_Name_0)
2025-07-06 16:54:56.800 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 16:54:56.809 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 16:54:56.948 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 16:55:03.021 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 16:55:19.806 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 16:55:22.285 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 16:55:22.446 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 16:55:22.880 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 57700.001ms
2025-07-06 16:55:22.899 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 16:55:22.928 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 200 1486 application/json; charset=utf-8 57805.953ms
2025-07-06 16:58:03.958 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 17:06:09.049 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 17:06:11.400 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:06:11.437 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:06:11.478 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:06:11.501 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 17:06:11.583 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 17:06:12.106 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:06:12.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:06:12.215 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:06:13.139 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 17:06:13.143 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 17:06:13.228 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 17:06:13.269 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 17:06:13.271 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 17:06:13.273 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 17:06:13.274 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 17:06:13.295 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 17:06:13.300 +03:00 [INF] Hosting environment: Development
2025-07-06 17:06:13.302 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 17:06:13.327 +03:00 [INF] Server mrrobot:18144:56872a26 successfully announced in 25.7932 ms
2025-07-06 17:06:13.338 +03:00 [INF] Server mrrobot:18144:56872a26 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 17:06:13.678 +03:00 [INF] Server mrrobot:18144:56872a26 all the dispatchers started
2025-07-06 17:06:14.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 17:06:15.410 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 717.4441ms
2025-07-06 17:06:15.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 17:06:15.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 17:06:15.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 17:06:15.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 70.369ms
2025-07-06 17:06:15.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 80.048ms
2025-07-06 17:06:15.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 138.5695ms
2025-07-06 17:06:15.711 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 17:06:15.952 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.9808ms
2025-07-06 17:06:43.034 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - multipart/form-data; boundary=--------------------------101100010450475007345516 6262464
2025-07-06 17:06:43.465 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:06:43.564 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:06:43.708 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:06:43.834 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:06:46.400 +03:00 [INF] Executing UpdateAsync for id: 4
2025-07-06 17:06:46.422 +03:00 [INF] Executing UpdateAsync for subCategoryId: 4
2025-07-06 17:06:46.426 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:06:46.681 +03:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:06:46.913 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commers.Context.AppDbContext'.
MySqlConnector.MySqlException (0x80004005): Table 'fashion_site.subcategories' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): Table 'fashion_site.subcategories' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-07-06 17:06:47.441 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 3545.5035ms
2025-07-06 17:06:47.452 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:06:47.472 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Table 'fashion_site.subcategories' doesn't exist
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at E_Commers.Services.Category.SubCategoryServices.UpdateAsync(Int32 subCategoryId, UpdateSubCategoryDto subCategory, String userid) in D:\fashion\Projcet\E-Commers\E-Commers\Services\Category\SubCategoryServices.cs:line 851
   at E_Commers.Controllers.SubCategoryController.UpdateAsync(Int32 id, UpdateSubCategoryDto subCategoryDto) in D:\fashion\Projcet\E-Commers\E-Commers\Controllers\SubCategoryController.cs:line 147
   at lambda_method270(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\fashion\Projcet\E-Commers\E-Commers\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commers.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\fashion\Projcet\E-Commers\E-Commers\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 17:06:47.654 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/4 - 500 null text/plain; charset=utf-8 4619.9673ms
2025-07-06 17:07:44.015 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 17:07:46.020 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:07:46.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:07:46.142 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:07:46.180 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 17:07:46.232 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 17:07:47.160 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:07:47.306 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:07:47.382 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:07:48.551 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 17:07:48.555 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 17:07:48.643 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 17:07:48.687 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 17:07:48.694 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 17:07:48.693 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 17:07:48.719 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 17:07:48.765 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 17:07:48.821 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 17:07:48.834 +03:00 [INF] Hosting environment: Development
2025-07-06 17:07:48.841 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 17:07:48.865 +03:00 [INF] Server mrrobot:23780:97a6ed14 successfully announced in 40.8791 ms
2025-07-06 17:07:49.020 +03:00 [INF] Server mrrobot:23780:97a6ed14 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 17:07:49.157 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 463.0524ms
2025-07-06 17:07:49.222 +03:00 [INF] Server mrrobot:23780:97a6ed14 all the dispatchers started
2025-07-06 17:07:49.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 17:07:49.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 17:07:49.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 17:07:49.370 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 22.7754ms
2025-07-06 17:07:49.436 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 89.7487ms
2025-07-06 17:07:49.494 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 148.4511ms
2025-07-06 17:07:49.680 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 17:07:49.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 148.0923ms
2025-07-06 17:08:18.253 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 17:08:20.070 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:08:20.109 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:08:20.232 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:08:20.271 +03:00 [INF] Applying migration '20250706140749_updatemodels'.
2025-07-06 17:08:21.056 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2025-07-06 17:08:21.187 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2025-07-06 17:08:21.223 +03:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` DROP FOREIGN KEY `FK_Images_SubCategory_SubCategoryId`;
