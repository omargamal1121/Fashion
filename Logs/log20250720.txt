2025-07-20 17:34:27.097 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `Fashion_Site`;
2025-07-20 17:34:27.289 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:34:27.311 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:34:27.316 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 17:34:27.334 +03:00 [INF] Applying migration '20250720143351_intit'.
2025-07-20 17:34:27.459 +03:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` DROP FOREIGN KEY `FK_AspNetUsers_Images_ImageId`;
2025-07-20 17:35:20.486 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:35:20.546 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:35:20.566 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 17:35:20.583 +03:00 [INF] Applying migration '20250720143507_init'.
2025-07-20 17:35:20.886 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-07-20 17:35:20.907 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:20.936 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Collections` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `DisplayOrder` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Collections` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:20.955 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PaymentMethods` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_PaymentMethods` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:20.966 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Warehouses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `Address` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
    `Phone` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Email` varchar(100) CHARACTER SET utf8mb4 NULL,
    `Description` varchar(500) CHARACTER SET utf8mb4 NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ManagerName` longtext CHARACTER SET utf8mb4 NULL,
    `ManagerPhone` longtext CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Warehouses` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.000 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.027 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PaymentProviders` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `ApiEndpoint` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `PublicKey` varchar(200) CHARACTER SET utf8mb4 NULL,
    `PrivateKey` varchar(200) CHARACTER SET utf8mb4 NULL,
    `PaymentMethodId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_PaymentProviders` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PaymentProviders_PaymentMethods_PaymentMethodId` FOREIGN KEY (`PaymentMethodId`) REFERENCES `PaymentMethods` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.037 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `adminOperationsLogs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `AdminId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `OperationType` int NOT NULL,
    `ItemId` int NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Timestamp` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_adminOperationsLogs` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.047 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.057 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.087 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.649 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Discriminator` varchar(13) CHARACTER SET utf8mb4 NOT NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `Age` int NULL,
    `ProfilePicture` longtext CHARACTER SET utf8mb4 NULL,
    `CreateAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    `LastVisit` datetime(6) NULL,
    `ImageId` int NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.672 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.703 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Cart` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Cart` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Cart_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:21.733 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `CustomerAddresses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `FirstName` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `LastName` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `PhoneNumber` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Country` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `State` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `City` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `StreetAddress` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
    `ApartmentSuite` varchar(100) CHARACTER SET utf8mb4 NULL,
    `PostalCode` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `AddressType` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `IsDefault` tinyint(1) NOT NULL,
    `AdditionalNotes` varchar(500) CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_CustomerAddresses` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_CustomerAddresses_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:24.342 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Orders` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `OrderNumber` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `Status` int NOT NULL,
    `Subtotal` decimal(18,2) NOT NULL,
    `TaxAmount` decimal(18,2) NOT NULL,
    `ShippingCost` decimal(18,2) NOT NULL,
    `DiscountAmount` decimal(18,2) NOT NULL,
    `Total` decimal(18,2) NOT NULL,
    `Notes` varchar(500) CHARACTER SET utf8mb4 NULL,
    `ShippedAt` datetime(6) NULL,
    `DeliveredAt` datetime(6) NULL,
    `CancelledAt` datetime(6) NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Orders` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Orders_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:24.373 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `userOperationsLogs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `OperationType` int NOT NULL,
    `ItemId` int NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Timestamp` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_userOperationsLogs` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_userOperationsLogs_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:24.410 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Payments` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `PaymentMethodId` int NOT NULL,
    `PaymentProviderId` int NOT NULL,
    `Amount` decimal(18,2) NOT NULL,
    `PaymentDate` datetime(6) NOT NULL,
    `OrderId` int NOT NULL,
    `Status` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Payments` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payments_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payments_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Payments_PaymentMethods_PaymentMethodId` FOREIGN KEY (`PaymentMethodId`) REFERENCES `PaymentMethods` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Payments_PaymentProviders_PaymentProviderId` FOREIGN KEY (`PaymentProviderId`) REFERENCES `PaymentProviders` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:24.444 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ReturnRequests` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `OrderId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RequestDate` datetime(6) NOT NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Reason` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AdminComment` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_ReturnRequests` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ReturnRequests_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ReturnRequests_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:24.475 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `CartItems` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CartId` int NOT NULL,
    `ProductId` int NOT NULL,
    `ProductVariantId` int NULL,
    `Quantity` int NOT NULL,
    `AddedAt` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_CartItems` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_CartItems_Cart_CartId` FOREIGN KEY (`CartId`) REFERENCES `Cart` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:26.917 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Categories` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DisplayOrder` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Categories` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:26.977 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Discount` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DiscountPercent` decimal(18,2) NOT NULL,
    `StartDate` datetime(6) NOT NULL,
    `EndDate` datetime(6) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CategoryId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Discount` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Discount_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:27.009 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Images` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AltText` longtext CHARACTER SET utf8mb4 NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    `Width` int NULL,
    `Height` int NULL,
    `FileSize` bigint NULL,
    `UploadDate` datetime(6) NOT NULL,
    `Folder` longtext CHARACTER SET utf8mb4 NULL,
    `IsMain` tinyint(1) NOT NULL,
    `FileType` longtext CHARACTER SET utf8mb4 NULL,
    `CategoryId` int NULL,
    `SubCategoryId` int NULL,
    `ProductId` int NULL,
    `CollectionId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Images` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Images_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Images_Collections_CollectionId` FOREIGN KEY (`CollectionId`) REFERENCES `Collections` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:27.040 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `SubCategories` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `CategoryId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_SubCategories` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_SubCategories_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_SubCategories_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:27.101 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Products` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `SubCategoryId` int NOT NULL,
    `Quantity` int NOT NULL,
    `DiscountId` int NULL,
    `FinalPrice` decimal(18,2) NULL,
    `Price` decimal(18,2) NOT NULL,
    `fitType` int NOT NULL,
    `Gender` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Products` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Products_Discount_DiscountId` FOREIGN KEY (`DiscountId`) REFERENCES `Discount` (`Id`) ON DELETE SET NULL,
    CONSTRAINT `FK_Products_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`),
    CONSTRAINT `FK_Products_SubCategories_SubCategoryId` FOREIGN KEY (`SubCategoryId`) REFERENCES `SubCategories` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.412 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Items` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `OrderId` int NOT NULL,
    `ProductId` int NOT NULL,
    `Quantity` int NOT NULL,
    `AddedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Items` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Items_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Items_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.450 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductCollections` (
    `ProductId` int NOT NULL,
    `CollectionId` int NOT NULL,
    CONSTRAINT `PK_ProductCollections` PRIMARY KEY (`ProductId`, `CollectionId`),
    CONSTRAINT `FK_ProductCollections_Collections_CollectionId` FOREIGN KEY (`CollectionId`) REFERENCES `Collections` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProductCollections_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.482 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductInventory` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `WarehouseId` int NOT NULL,
    `Quantity` int NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_ProductInventory` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ProductInventory_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProductInventory_Warehouses_WarehouseId` FOREIGN KEY (`WarehouseId`) REFERENCES `Warehouses` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.507 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductVariants` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Size` int NULL,
    `Waist` int NULL,
    `Length` int NULL,
    `Quantity` int NOT NULL,
    `ProductId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_ProductVariants` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ProductVariants_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.548 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ReturnRequestProducts` (
    `ReturnRequestId` int NOT NULL,
    `ProductId` int NOT NULL,
    `Quantity` int NOT NULL,
    CONSTRAINT `PK_ReturnRequestProducts` PRIMARY KEY (`ReturnRequestId`, `ProductId`),
    CONSTRAINT `FK_ReturnRequestProducts_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ReturnRequestProducts_ReturnRequests_ReturnRequestId` FOREIGN KEY (`ReturnRequestId`) REFERENCES `ReturnRequests` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:29.588 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Reviews` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Rating` int NOT NULL,
    `Comment` varchar(1000) CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Reviews` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Reviews_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Reviews_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:32.454 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `WishlistItems` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_WishlistItems` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_WishlistItems_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_WishlistItems_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:32.485 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `OrderItem` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `OrderId` int NOT NULL,
    `ProductId` int NOT NULL,
    `ProductVariantId` int NULL,
    `Quantity` int NOT NULL,
    `UnitPrice` decimal(18,2) NOT NULL,
    `TotalPrice` decimal(18,2) NOT NULL,
    `OrderedAt` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_OrderItem` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_OrderItem_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_OrderItem_ProductVariants_ProductVariantId` FOREIGN KEY (`ProductVariantId`) REFERENCES `ProductVariants` (`Id`) ON DELETE SET NULL,
    CONSTRAINT `FK_OrderItem_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-20 17:35:32.501 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_adminOperationsLogs_AdminId` ON `adminOperationsLogs` (`AdminId`);
2025-07-20 17:35:32.522 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2025-07-20 17:35:32.538 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2025-07-20 17:35:32.553 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2025-07-20 17:35:32.572 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2025-07-20 17:35:32.592 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2025-07-20 17:35:32.606 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2025-07-20 17:35:32.621 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_ImageId` ON `AspNetUsers` (`ImageId`);
2025-07-20 17:35:32.635 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2025-07-20 17:35:32.653 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Cart_CustomerId` ON `Cart` (`CustomerId`);
2025-07-20 17:35:32.671 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_CartItems_CartId` ON `CartItems` (`CartId`);
2025-07-20 17:35:32.682 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_CartItems_ProductId` ON `CartItems` (`ProductId`);
2025-07-20 17:35:34.907 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_CartItems_ProductVariantId` ON `CartItems` (`ProductVariantId`);
2025-07-20 17:35:34.923 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Categories_ImageId` ON `Categories` (`ImageId`);
2025-07-20 17:35:34.943 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_CustomerAddresses_CustomerId` ON `CustomerAddresses` (`CustomerId`);
2025-07-20 17:35:34.963 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Discount_CategoryId` ON `Discount` (`CategoryId`);
2025-07-20 17:35:34.983 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_CategoryId` ON `Images` (`CategoryId`);
2025-07-20 17:35:35.000 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_CollectionId` ON `Images` (`CollectionId`);
2025-07-20 17:35:35.010 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_ProductId` ON `Images` (`ProductId`);
2025-07-20 17:35:35.021 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_SubCategoryId` ON `Images` (`SubCategoryId`);
2025-07-20 17:35:35.035 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Items_OrderId` ON `Items` (`OrderId`);
2025-07-20 17:35:35.048 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Items_ProductId` ON `Items` (`ProductId`);
2025-07-20 17:35:35.065 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_OrderItem_OrderId` ON `OrderItem` (`OrderId`);
2025-07-20 17:35:35.078 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_OrderItem_ProductId` ON `OrderItem` (`ProductId`);
2025-07-20 17:35:35.090 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_OrderItem_ProductVariantId` ON `OrderItem` (`ProductVariantId`);
2025-07-20 17:35:35.106 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Orders_CustomerId` ON `Orders` (`CustomerId`);
2025-07-20 17:35:35.121 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PaymentProviders_PaymentMethodId` ON `PaymentProviders` (`PaymentMethodId`);
2025-07-20 17:35:35.136 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_CustomerId` ON `Payments` (`CustomerId`);
2025-07-20 17:35:35.150 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Payments_OrderId` ON `Payments` (`OrderId`);
2025-07-20 17:35:35.165 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_PaymentMethodId` ON `Payments` (`PaymentMethodId`);
2025-07-20 17:35:35.180 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_PaymentProviderId` ON `Payments` (`PaymentProviderId`);
2025-07-20 17:35:35.197 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductCollections_CollectionId` ON `ProductCollections` (`CollectionId`);
2025-07-20 17:35:35.213 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductInventory_ProductId` ON `ProductInventory` (`ProductId`);
2025-07-20 17:35:35.227 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductInventory_WarehouseId` ON `ProductInventory` (`WarehouseId`);
2025-07-20 17:35:35.243 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_DiscountId` ON `Products` (`DiscountId`);
2025-07-20 17:35:36.972 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_ImageId` ON `Products` (`ImageId`);
2025-07-20 17:35:36.988 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_SubCategoryId` ON `Products` (`SubCategoryId`);
2025-07-20 17:35:37.008 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductVariants_ProductId` ON `ProductVariants` (`ProductId`);
2025-07-20 17:35:37.027 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequestProducts_ProductId` ON `ReturnRequestProducts` (`ProductId`);
2025-07-20 17:35:37.045 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequests_CustomerId` ON `ReturnRequests` (`CustomerId`);
2025-07-20 17:35:37.059 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequests_OrderId` ON `ReturnRequests` (`OrderId`);
2025-07-20 17:35:37.077 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Reviews_CustomerId` ON `Reviews` (`CustomerId`);
2025-07-20 17:35:37.091 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Reviews_ProductId` ON `Reviews` (`ProductId`);
2025-07-20 17:35:37.117 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_SubCategories_CategoryId` ON `SubCategories` (`CategoryId`);
2025-07-20 17:35:37.133 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_SubCategories_ImageId` ON `SubCategories` (`ImageId`);
2025-07-20 17:35:37.151 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_userOperationsLogs_UserId` ON `userOperationsLogs` (`UserId`);
2025-07-20 17:35:37.172 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_WishlistItems_CustomerId` ON `WishlistItems` (`CustomerId`);
2025-07-20 17:35:37.188 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_WishlistItems_ProductId` ON `WishlistItems` (`ProductId`);
2025-07-20 17:35:37.250 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `adminOperationsLogs` ADD CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT;
2025-07-20 17:35:37.305 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserClaims` ADD CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-20 17:35:37.357 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserLogins` ADD CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-20 17:35:37.439 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserRoles` ADD CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-20 17:35:37.493 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD CONSTRAINT `FK_AspNetUsers_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE CASCADE;
2025-07-20 17:35:37.553 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CartItems` ADD CONSTRAINT `FK_CartItems_ProductVariants_ProductVariantId` FOREIGN KEY (`ProductVariantId`) REFERENCES `ProductVariants` (`Id`) ON DELETE SET NULL;
2025-07-20 17:35:37.610 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CartItems` ADD CONSTRAINT `FK_CartItems_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT;
2025-07-20 17:35:38.715 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Categories` ADD CONSTRAINT `FK_Categories_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`);
2025-07-20 17:35:38.773 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` ADD CONSTRAINT `FK_Images_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT;
2025-07-20 17:35:38.841 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` ADD CONSTRAINT `FK_Images_SubCategories_SubCategoryId` FOREIGN KEY (`SubCategoryId`) REFERENCES `SubCategories` (`Id`) ON DELETE CASCADE;
2025-07-20 17:35:38.844 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250720143507_init', '8.0.13');
2025-07-20 17:36:11.749 +03:00 [INF] Start installing Hangfire SQL objects...
2025-07-20 17:36:12.142 +03:00 [INF] Hangfire SQL objects installed.
2025-07-20 17:36:13.638 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:36:13.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:36:13.678 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 17:36:13.697 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:36:13.734 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:36:14.181 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:36:14.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:36:14.404 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetRoles` (`Id`, `ConcurrencyStamp`, `Name`, `NormalizedName`)
VALUES (@p0, @p1, @p2, @p3);
2025-07-20 17:36:14.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:36:14.463 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:36:14.477 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetRoles` (`Id`, `ConcurrencyStamp`, `Name`, `NormalizedName`)
VALUES (@p0, @p1, @p2, @p3);
2025-07-20 17:36:14.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:36:14.734 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-07-20 17:36:14.746 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:36:14.897 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 13), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetUsers` (`Id`, `AccessFailedCount`, `Age`, `ConcurrencyStamp`, `CreateAt`, `DeletedAt`, `Discriminator`, `Email`, `EmailConfirmed`, `ImageId`, `LastVisit`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `PhoneNumber`, `PhoneNumberConfirmed`, `ProfilePicture`, `SecurityStamp`, `TwoFactorEnabled`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-07-20 17:36:14.916 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-07-20 17:36:14.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255), @__p_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`UserId`, `a`.`RoleId`
FROM `AspNetUserRoles` AS `a`
WHERE (`a`.`UserId` = @__p_0) AND (`a`.`RoleId` = @__p_1)
LIMIT 1
2025-07-20 17:36:14.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-07-20 17:36:14.990 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-07-20 17:36:14.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:36:15.038 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 255), @p23='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p24='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUserRoles` (`RoleId`, `UserId`)
VALUES (@p0, @p1);
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p2, `Age` = @p3, `ConcurrencyStamp` = @p4, `CreateAt` = @p5, `DeletedAt` = @p6, `Email` = @p7, `EmailConfirmed` = @p8, `ImageId` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `ProfilePicture` = @p19, `SecurityStamp` = @p20, `TwoFactorEnabled` = @p21, `UserName` = @p22
WHERE `Id` = @p23 AND `ConcurrencyStamp` = @p24;
SELECT ROW_COUNT();
2025-07-20 17:36:16.108 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 17:36:16.119 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 17:36:16.238 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 17:36:16.346 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 17:36:16.401 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 17:36:16.544 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 17:36:16.625 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 17:36:16.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:36:16.919 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:36:16.978 +03:00 [INF] Hosting environment: Development
2025-07-20 17:36:16.980 +03:00 [INF] Server mrrobot:12076:ef197ee5 successfully announced in 55.7209 ms
2025-07-20 17:36:16.990 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 17:36:17.007 +03:00 [INF] Server mrrobot:12076:ef197ee5 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 17:36:17.245 +03:00 [INF] Server mrrobot:12076:ef197ee5 all the dispatchers started
2025-07-20 17:36:17.262 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 381.7923ms
2025-07-20 17:36:17.286 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:36:17.342 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:36:17.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:36:17.381 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 94.8639ms
2025-07-20 17:36:17.407 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 64.823ms
2025-07-20 17:36:17.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 308.2384ms
2025-07-20 17:36:17.826 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:36:18.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 789.3336ms
2025-07-20 17:36:51.265 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/login - application/json 72
2025-07-20 17:36:52.737 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:36:52.792 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:36:52.814 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/login - 401 null application/json 1549.1182ms
2025-07-20 17:37:07.646 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/login - application/json 72
2025-07-20 17:37:07.652 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:37:07.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:37:07.744 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/login - 401 null application/json 98.3794ms
2025-07-20 17:37:16.513 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/login - application/json 72
2025-07-20 17:37:16.521 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:37:16.581 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-20 17:37:16.614 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commerce.DtoModels.AccountDtos.LoginDTo) on controller E_Commerce.Controllers.AccountController (E-Commerce).
2025-07-20 17:37:16.947 +03:00 [INF] In LoginAsync Method 
2025-07-20 17:37:16.954 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:37:17.069 +03:00 [INF]  Generating Access Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-20 17:37:17.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-20 17:37:17.148 +03:00 [INF]  Access Token generated successfully for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-20 17:37:17.151 +03:00 [INF]  Generating Refresh Token for User ID: d1f25979-3a6d-4429-8380-c159dc573444
2025-07-20 17:37:17.163 +03:00 [INF] RefreshToken Generated
2025-07-20 17:37:17.196 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:37:17.234 +03:00 [INF] Executed action E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce) in 606.0293ms
2025-07-20 17:37:17.248 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-20 17:37:17.304 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/login - 200 1408 application/json; charset=utf-8 791.2476ms
2025-07-20 17:37:45.834 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories - multipart/form-data; boundary=--------------------------174942818192846311865205 405
2025-07-20 17:37:45.841 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:37:45.847 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:37:45.864 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 17:37:45.878 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:37:45.906 +03:00 [INF] Executing CreateAsync
2025-07-20 17:37:45.913 +03:00 [INF] Execute CreateAsync
2025-07-20 17:37:45.917 +03:00 [INF] Executing IsExsistsByName for name: j63zqnWVF2
2025-07-20 17:37:45.931 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE `c`.`Name` = @__name_0)
2025-07-20 17:37:45.938 +03:00 [INF] Category with name: j63zqnWVF2 does not exist
2025-07-20 17:37:45.952 +03:00 [INF] Executing CreateAsync for entity Category
2025-07-20 17:37:46.003 +03:00 [INF] Category added successfully (pending save)
2025-07-20 17:37:46.032 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Categories` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Categories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:37:46.059 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:37:46.062 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:37:46.087 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:37:46.153 +03:00 [INF] Executing GetCategoryById for id: 1
2025-07-20 17:37:46.224 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:37:46.259 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:37:46.272 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:37:46.281 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:37:46.295 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 412.8395ms
2025-07-20 17:37:46.298 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 17:37:46.302 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories - 201 474 application/json; charset=utf-8 467.2384ms
2025-07-20 17:37:47.732 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:37:47.741 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
2025-07-20 17:38:13.195 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/Categories/1 - multipart/form-data; boundary=--------------------------098980716513876552120449 404
2025-07-20 17:38:13.203 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:38:13.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:38:13.217 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce)'
2025-07-20 17:38:13.226 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] UpdateAsync(Int32, E_Commerce.DtoModels.CategoryDtos.UpdateCategoryDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:38:13.243 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-20 17:38:13.248 +03:00 [INF] Executing UpdateAsync for categoryId: 1
2025-07-20 17:38:13.250 +03:00 [INF] Executing GetCategoryById for id: 1
2025-07-20 17:38:13.281 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:38:13.313 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:38:13.323 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:38:13.331 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:38:13.333 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:38:13.335 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:38:13.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 50), @p1='?' (Size = 20), @p3='?' (Size = 255), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = DateTime), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `Description` = @p0, `Name` = @p1
WHERE `Id` = @p2;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:38:13.391 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:38:13.394 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce) in 163.542ms
2025-07-20 17:38:13.396 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce)'
2025-07-20 17:38:13.398 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/Categories/1 - 200 1186 application/json; charset=utf-8 202.1437ms
2025-07-20 17:38:17.715 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:38:17.721 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
2025-07-20 17:38:28.929 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?isActive=false&includeDeleted=true - null null
2025-07-20 17:38:28.936 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:38:28.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:38:28.958 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:38:28.965 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:38:28.987 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: False, includeDeleted: True
2025-07-20 17:38:28.993 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: False, includeDeleted: True
2025-07-20 17:38:28.996 +03:00 [INF] Getting cache for key: categoryid:1_active:False_deleted:True
2025-07-20 17:38:29.001 +03:00 [WRN] Cache miss for key: categoryid:1_active:False_deleted:True
2025-07-20 17:38:29.004 +03:00 [INF] Executing GetCategoryById for id: 1
2025-07-20 17:38:29.031 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:38:29.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NOT NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:38:29.049 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 80.0223ms
2025-07-20 17:38:29.054 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:38:29.057 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:38:29.062 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
AsyncStateMachineBox`1 -> CategorywithdataDto
System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[E_Commerce.Models.Category, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CategoryRepository+<GetCategoryById>d__3, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto
   at lambda_method818(Closure, Object, CategorywithdataDto, ResolutionContext)
   at E_Commerce.Services.Category.CategoryServices.GetCategoryByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 IsDeleted) in D:\project_fashion\E-Commerce-API-main\Services\CategoryServices\CategoryServices.cs:line 171
   at E_Commerce.Controllers.CategoriesController.GetByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 includeDeleted) in D:\project_fashion\E-Commerce-API-main\Controllers\CategoryController.cs:line 74
   at lambda_method790(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-20 17:38:29.115 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?isActive=false&includeDeleted=true - 500 null text/plain; charset=utf-8 185.4918ms
2025-07-20 17:40:06.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:40:06.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 20.4313ms
2025-07-20 17:40:06.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:40:06.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:40:06.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:40:06.131 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.6759ms
2025-07-20 17:40:06.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 16.851ms
2025-07-20 17:40:06.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.6005ms
2025-07-20 17:40:06.261 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:40:06.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 248.008ms
2025-07-20 17:42:22.885 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 17:42:24.458 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:42:24.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:42:24.527 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 17:42:24.549 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:42:24.577 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:42:24.932 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:42:24.997 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:42:25.026 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:42:25.669 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 17:42:25.672 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 17:42:25.760 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 17:42:25.795 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 17:42:25.797 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 17:42:25.800 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 17:42:25.801 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 17:42:25.820 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:42:25.827 +03:00 [INF] Hosting environment: Development
2025-07-20 17:42:25.828 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 17:42:25.849 +03:00 [INF] Server mrrobot:3480:17289ea6 successfully announced in 16.5841 ms
2025-07-20 17:42:25.862 +03:00 [INF] Server mrrobot:3480:17289ea6 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 17:42:26.013 +03:00 [INF] Server mrrobot:3480:17289ea6 all the dispatchers started
2025-07-20 17:42:26.210 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:42:26.386 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 177.33ms
2025-07-20 17:42:26.412 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:42:26.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:42:26.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:42:26.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 44.4775ms
2025-07-20 17:42:26.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 46.6919ms
2025-07-20 17:42:26.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 92.8361ms
2025-07-20 17:42:26.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:42:26.800 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.6516ms
2025-07-20 17:42:32.957 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?isActive=false&includeDeleted=true - null null
2025-07-20 17:42:33.105 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:42:33.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:42:33.320 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:33.354 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:42:33.897 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: False, includeDeleted: True
2025-07-20 17:42:33.902 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: False, includeDeleted: True
2025-07-20 17:42:33.905 +03:00 [INF] Getting cache for key: categoryid:1_active:False_deleted:True
2025-07-20 17:42:33.916 +03:00 [WRN] Cache miss for key: categoryid:1_active:False_deleted:True
2025-07-20 17:42:33.919 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:42:34.105 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:42:34.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NOT NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:42:34.130 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:42:34.135 +03:00 [WRN] Category with id: 1 not found
2025-07-20 17:42:34.186 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:42:34.229 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 863.8705ms
2025-07-20 17:42:34.234 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:34.239 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?isActive=false&includeDeleted=true - 404 1104 application/json; charset=utf-8 1282.3279ms
2025-07-20 17:42:49.027 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:42:49.036 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:42:49.045 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:42:49.062 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:49.066 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:42:49.077 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:49.078 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:49.080 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:42:49.084 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:
2025-07-20 17:42:49.087 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:42:49.124 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:42:49.156 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:42:49.200 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:42:49.287 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:42:49.295 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 224.2576ms
2025-07-20 17:42:49.305 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:49.309 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1 - 200 1195 application/json; charset=utf-8 281.9029ms
2025-07-20 17:42:55.822 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:42:55.832 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:42:55.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:42:55.840 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:55.843 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:42:55.857 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:55.860 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:55.862 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:42:55.868 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:
2025-07-20 17:42:55.873 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:42:55.906 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:42:55.915 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:42:55.955 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:42:55.957 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 110.9865ms
2025-07-20 17:42:55.968 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:55.978 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1 - 200 1195 application/json; charset=utf-8 155.8398ms
2025-07-20 17:42:56.140 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:42:56.140 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:42:56.177 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted: with tags: [categorywithdata]
2025-07-20 17:42:56.177 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted: with tags: [categorywithdata]
2025-07-20 17:42:58.244 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:42:58.249 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:42:58.253 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:42:58.257 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:58.260 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:42:58.267 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:58.269 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: 
2025-07-20 17:42:58.270 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:42:58.273 +03:00 [INF] Cache hit for key: categoryid:1_active:_deleted:
2025-07-20 17:42:58.287 +03:00 [INF] Cache hit for category 1 with filters
2025-07-20 17:42:58.294 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:42:58.297 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 30.6424ms
2025-07-20 17:42:58.300 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:42:58.301 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1 - 200 1204 application/json; charset=utf-8 57.6705ms
2025-07-20 17:43:21.569 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddExtraImages - multipart/form-data; boundary=--------------------------624550278303931630611917 470253
2025-07-20 17:43:21.576 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:43:21.582 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:43:21.595 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddExtraImagesAsync (E-Commerce)'
2025-07-20 17:43:21.606 +03:00 [INF] Route matched with {action = "AddExtraImagesAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddExtraImagesAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:43:21.661 +03:00 [INF] Executing AddExtraImagesAsync for id: 1
2025-07-20 17:43:21.666 +03:00 [INF] Executing AddImagesToCategoryAsync for categoryId: 1
2025-07-20 17:43:21.685 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:43:21.710 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:43:21.741 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:43:21.748 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:43:21.751 +03:00 [INF]  Saving 3 images to CategoryPhotos
2025-07-20 17:43:21.755 +03:00 [INF]  Saving image to CategoryPhotos
2025-07-20 17:43:21.759 +03:00 [ERR]  Failed to save image #1: Invalid content type: application/json
2025-07-20 17:43:21.761 +03:00 [INF]  Saving image to CategoryPhotos
2025-07-20 17:43:21.773 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-20 17:43:21.920 +03:00 [INF] Image added successfully (pending save)
2025-07-20 17:43:22.048 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:43:22.090 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:43:22.091 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:43:22.119 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:43:22.121 +03:00 [INF]  Image saved: /CategoryPhotos/86293f75-5a2d-4018-a9f9-4abd74db723f.png
2025-07-20 17:43:22.123 +03:00 [INF]  Saving image to CategoryPhotos
2025-07-20 17:43:22.128 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-20 17:43:22.132 +03:00 [INF] Image added successfully (pending save)
2025-07-20 17:43:22.180 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:43:22.190 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:43:22.191 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:43:22.194 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:43:22.196 +03:00 [INF]  Image saved: /CategoryPhotos/c9c32236-e46d-46fe-b143-755d1bca44dc.png
2025-07-20 17:43:22.203 +03:00 [WRN] Some images failed to save: Image #1: Invalid content type: application/json
2025-07-20 17:43:22.206 +03:00 [INF] Execute Update for entity Category
2025-07-20 17:43:22.209 +03:00 [INF] Category marked for update (pending save)
2025-07-20 17:43:22.271 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p10='?' (DbType = Int32), @p9='?' (DbType = Int32), @p12='?' (DbType = Int32), @p11='?' (DbType = Int32), @p13='?' (Size = 255), @p14='?' (DbType = DateTime), @p15='?' (DbType = DateTime), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DisplayOrder` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p11
WHERE `Id` = @p12;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:43:22.330 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:43:22.337 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddExtraImagesAsync (E-Commerce) in 724.7923ms
2025-07-20 17:43:22.388 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddExtraImagesAsync (E-Commerce)'
2025-07-20 17:43:22.435 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddExtraImages - 200 1280 application/json; charset=utf-8 866.3075ms
2025-07-20 17:43:26.084 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:43:26.102 +03:00 [INF] Removed 1 cache entries for tags: [category, categorywithdata]
2025-07-20 17:43:31.021 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:43:31.026 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:43:31.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:43:31.034 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:43:31.037 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:43:31.041 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: 
2025-07-20 17:43:31.042 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: 
2025-07-20 17:43:31.043 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:43:31.045 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:
2025-07-20 17:43:31.047 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:43:31.077 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:43:31.088 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:43:31.115 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:43:31.118 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 78.0004ms
2025-07-20 17:43:31.120 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:43:31.122 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1 - 200 1416 application/json; charset=utf-8 101.6774ms
2025-07-20 17:43:36.093 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:43:36.100 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted: with tags: [categorywithdata]
2025-07-20 17:43:39.520 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/Categories/3 - null null
2025-07-20 17:43:39.524 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:43:39.527 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:43:39.532 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce)'
2025-07-20 17:43:39.538 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeleteAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:43:39.544 +03:00 [INF] Executing DeleteAsync for id: 3
2025-07-20 17:43:39.554 +03:00 [INF] Executing DeleteAsync for categoryId: 3
2025-07-20 17:43:39.565 +03:00 [INF] Executing GetCategoryByIdAsync for id: 3
2025-07-20 17:43:39.568 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:43:39.572 +03:00 [WRN] Category with id: 3 doesn't exist
2025-07-20 17:43:39.583 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:43:39.587 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce) in 45.8372ms
2025-07-20 17:43:39.589 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce)'
2025-07-20 17:43:39.592 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/Categories/3 - 404 385 application/json; charset=utf-8 72.0017ms
2025-07-20 17:43:45.090 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:43:45.095 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:43:45.099 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:43:45.104 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce)'
2025-07-20 17:43:45.106 +03:00 [INF] Route matched with {action = "DeleteAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeleteAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:43:45.113 +03:00 [INF] Executing DeleteAsync for id: 1
2025-07-20 17:43:45.114 +03:00 [INF] Executing DeleteAsync for categoryId: 1
2025-07-20 17:43:45.120 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:43:45.151 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:43:45.155 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:43:45.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__categoryId_0) AND EXISTS (
        SELECT 1
        FROM `SubCategories` AS `s`
        WHERE `c`.`Id` = `s`.`CategoryId`))
2025-07-20 17:43:45.191 +03:00 [INF] Execute SoftDeleteAsync for entity Category with ID: 1
2025-07-20 17:43:45.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-07-20 17:43:45.201 +03:00 [INF] Category with ID: 1 soft deleted.
2025-07-20 17:43:45.203 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:43:45.205 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:43:45.206 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:43:45.210 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DisplayOrder` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:43:45.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:43:45.234 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce) in 123.1882ms
2025-07-20 17:43:45.237 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.DeleteAsync (E-Commerce)'
2025-07-20 17:43:45.239 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/Categories/1 - 200 308 application/json; charset=utf-8 148.6358ms
2025-07-20 17:43:46.103 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:43:46.110 +03:00 [INF] Removed 1 cache entries for tags: [category, categorywithdata]
2025-07-20 17:43:56.801 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/Categories/1 - multipart/form-data; boundary=--------------------------624051697878391240700493 404
2025-07-20 17:43:56.807 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:43:56.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:43:56.820 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce)'
2025-07-20 17:43:56.827 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] UpdateAsync(Int32, E_Commerce.DtoModels.CategoryDtos.UpdateCategoryDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:43:56.839 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-20 17:43:56.845 +03:00 [INF] Executing UpdateAsync for categoryId: 1
2025-07-20 17:43:56.846 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:43:56.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:43:56.854 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:43:56.860 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:43:56.865 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce) in 34.1835ms
2025-07-20 17:43:56.868 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.UpdateAsync (E-Commerce)'
2025-07-20 17:43:56.869 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/Categories/1 - 404 1102 application/json; charset=utf-8 68.2224ms
2025-07-20 17:44:00.706 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1 - null null
2025-07-20 17:44:00.714 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:00.721 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:00.725 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:00.728 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:00.737 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: 
2025-07-20 17:44:00.740 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: 
2025-07-20 17:44:00.742 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:44:00.745 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:
2025-07-20 17:44:00.748 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:00.789 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:00.797 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:44:00.834 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:00.837 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 100.6125ms
2025-07-20 17:44:00.838 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:00.841 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1 - 200 1416 application/json; charset=utf-8 135.8384ms
2025-07-20 17:44:06.126 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:
2025-07-20 17:44:06.129 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted: with tags: [categorywithdata]
2025-07-20 17:44:09.886 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:44:09.891 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:09.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:09.903 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:09.906 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:09.914 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:44:09.918 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:44:09.919 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:44:09.922 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:False
2025-07-20 17:44:09.924 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:09.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:09.936 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:44:09.937 +03:00 [WRN] Category with id: 1 not found
2025-07-20 17:44:09.952 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:09.956 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 42.8478ms
2025-07-20 17:44:09.961 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:09.963 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 404 1104 application/json; charset=utf-8 77.3542ms
2025-07-20 17:44:28.837 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/Categories/1/RemoveImage/2 - null null
2025-07-20 17:44:28.841 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:28.847 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:28.854 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce)'
2025-07-20 17:44:28.860 +03:00 [INF] Route matched with {action = "RemoveImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] RemoveImageAsync(Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:28.876 +03:00 [INF] Removing image 2 from category: 1
2025-07-20 17:44:28.880 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:28.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:28.890 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:44:28.897 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:28.900 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce) in 35.9427ms
2025-07-20 17:44:28.903 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce)'
2025-07-20 17:44:28.905 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/Categories/1/RemoveImage/2 - 404 1168 application/json; charset=utf-8 67.4976ms
2025-07-20 17:44:40.724 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - null 0
2025-07-20 17:44:40.731 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:40.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:40.739 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:44:40.746 +03:00 [INF] Route matched with {action = "ReturnRemovedCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] ReturnRemovedCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:40.754 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:44:40.758 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:44:40.762 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:40.783 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:44:40.818 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NOT NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:40.824 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:44:40.833 +03:00 [INF] Execute RestoreAsync for entity Category with ID: 1
2025-07-20 17:44:40.840 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NOT NULL
LIMIT 1
2025-07-20 17:44:40.853 +03:00 [INF] Category with ID: 1 restored.
2025-07-20 17:44:40.855 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:44:40.856 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:44:40.858 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:44:40.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DisplayOrder` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:44:40.892 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:40.895 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce) in 142.8181ms
2025-07-20 17:44:40.897 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:44:40.899 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - 200 1432 application/json; charset=utf-8 174.7592ms
2025-07-20 17:44:46.171 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:44:46.182 +03:00 [INF] Removed 1 cache entries for tags: [category, categorywithdata]
2025-07-20 17:44:51.206 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/Categories/1/RemoveImage/2 - null null
2025-07-20 17:44:51.211 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:51.214 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:51.218 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce)'
2025-07-20 17:44:51.220 +03:00 [INF] Route matched with {action = "RemoveImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] RemoveImageAsync(Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:51.224 +03:00 [INF] Removing image 2 from category: 1
2025-07-20 17:44:51.228 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:51.249 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:51.254 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:44:51.257 +03:00 [INF] Execute Update for entity Category
2025-07-20 17:44:51.259 +03:00 [INF] Category marked for update (pending save)
2025-07-20 17:44:51.261 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:44:51.262 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:44:51.264 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:44:51.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p10='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DisplayOrder` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:44:51.312 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:51.316 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce) in 93.1018ms
2025-07-20 17:44:51.320 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.RemoveImageAsync (E-Commerce)'
2025-07-20 17:44:51.322 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/Categories/1/RemoveImage/2 - 200 1362 application/json; charset=utf-8 116.7286ms
2025-07-20 17:44:55.728 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:44:55.732 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:44:55.736 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:44:55.742 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:55.743 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:44:55.747 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:44:55.753 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:44:55.755 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:44:55.758 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:False
2025-07-20 17:44:55.760 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:44:55.790 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:44:55.794 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:44:55.815 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:44:55.819 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 73.313ms
2025-07-20 17:44:55.826 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:44:55.829 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 200 1305 application/json; charset=utf-8 100.8004ms
2025-07-20 17:44:56.177 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:44:56.179 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:44:56.182 +03:00 [WRN] No cache entries found for tags: [category, categorywithdata]
2025-07-20 17:44:56.186 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted:False with tags: [categorywithdata]
2025-07-20 17:45:24.661 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddMainImage - multipart/form-data; boundary=--------------------------978768265090929961127232 470250
2025-07-20 17:45:24.676 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:45:24.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:45:24.693 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-07-20 17:45:24.701 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:45:24.719 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-20 17:45:24.723 +03:00 [INF] Executing AddMainImageToCategoryAsync for categoryId: 1
2025-07-20 17:45:24.726 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:45:24.749 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:45:24.754 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:45:24.758 +03:00 [INF]  Saving main image to CategoryPhotos
2025-07-20 17:45:24.766 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:45:24.770 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 62.5865ms
2025-07-20 17:45:24.772 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-07-20 17:45:24.775 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddMainImage - 500 1176 application/json; charset=utf-8 113.702ms
2025-07-20 17:45:38.126 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddMainImage - multipart/form-data; boundary=--------------------------977340546632909126876007 69123
2025-07-20 17:45:38.131 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:45:38.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:45:38.141 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-07-20 17:45:38.142 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:45:38.149 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-20 17:45:38.152 +03:00 [INF] Executing AddMainImageToCategoryAsync for categoryId: 1
2025-07-20 17:45:38.155 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:45:38.182 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:45:38.190 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:45:38.192 +03:00 [INF]  Saving main image to CategoryPhotos
2025-07-20 17:45:38.197 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-20 17:45:38.200 +03:00 [INF] Image added successfully (pending save)
2025-07-20 17:45:38.208 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:45:38.214 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:45:38.215 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:45:38.217 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:45:38.218 +03:00 [INF]  Main image saved: /CategoryPhotos/6b4b674e-1cf0-463b-b625-817c9740f63f.png
2025-07-20 17:45:38.220 +03:00 [INF] Execute Update for entity Category
2025-07-20 17:45:38.224 +03:00 [INF] Category marked for update (pending save)
2025-07-20 17:45:38.227 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20), @p10='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Categories` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DisplayOrder` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:45:38.252 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:45:38.255 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce) in 108.8847ms
2025-07-20 17:45:38.257 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.AddMainImageAsync (E-Commerce)'
2025-07-20 17:45:38.260 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories/1/AddMainImage - 200 1120 application/json; charset=utf-8 134.3193ms
2025-07-20 17:45:42.615 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:45:42.620 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:45:42.631 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:45:42.633 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:45:42.638 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:45:42.644 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:45:42.647 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:45:42.650 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:45:42.653 +03:00 [INF] Cache hit for key: categoryid:1_active:_deleted:False
2025-07-20 17:45:42.657 +03:00 [INF] Cache hit for category 1 with filters
2025-07-20 17:45:42.663 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:45:42.666 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 22.7138ms
2025-07-20 17:45:42.669 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:45:42.671 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 200 1314 application/json; charset=utf-8 56.4669ms
2025-07-20 17:45:46.237 +03:00 [INF] Removing cache by tags: [category, categorywithdata]
2025-07-20 17:45:46.244 +03:00 [INF] Removed 1 cache entries for tags: [category, categorywithdata]
2025-07-20 17:45:52.376 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:45:52.381 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:45:52.385 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:45:52.389 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:45:52.391 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:45:52.395 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:45:52.397 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:45:52.399 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:45:52.401 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:False
2025-07-20 17:45:52.402 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:45:52.429 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:45:52.450 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:45:52.473 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:45:52.476 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 82.1894ms
2025-07-20 17:45:52.478 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:45:52.480 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 200 1415 application/json; charset=utf-8 103.6135ms
2025-07-20 17:45:56.265 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:45:56.271 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted:False with tags: [categorywithdata]
2025-07-20 17:46:16.922 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/deactivate - null 0
2025-07-20 17:46:16.928 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:46:16.931 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:46:16.938 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.DeactivateCategory (E-Commerce)'
2025-07-20 17:46:16.943 +03:00 [INF] Route matched with {action = "DeactivateCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] DeactivateCategory(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:46:16.951 +03:00 [INF] Executing DeactivateCategory for id: 1
2025-07-20 17:46:16.955 +03:00 [INF] Deactivating category 1
2025-07-20 17:46:16.957 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:46:16.979 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:46:16.988 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:46:16.996 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:46:16.999 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.DeactivateCategory (E-Commerce) in 49.3864ms
2025-07-20 17:46:17.002 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.DeactivateCategory (E-Commerce)'
2025-07-20 17:46:17.004 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/deactivate - 200 1166 application/json; charset=utf-8 81.759ms
2025-07-20 17:46:30.665 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/activate - null 0
2025-07-20 17:46:30.674 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:46:30.678 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:46:30.684 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategory (E-Commerce)'
2025-07-20 17:46:30.691 +03:00 [INF] Route matched with {action = "ActivateCategory", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Boolean]]] ActivateCategory(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:46:30.706 +03:00 [INF] Executing ActivateCategory for id: 1
2025-07-20 17:46:30.709 +03:00 [INF] Activating category 1
2025-07-20 17:46:30.710 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:46:30.735 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:46:30.743 +03:00 [INF] Category with id: 1 exists
2025-07-20 17:46:30.751 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:46:30.754 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ActivateCategory (E-Commerce) in 56.6655ms
2025-07-20 17:46:30.757 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ActivateCategory (E-Commerce)'
2025-07-20 17:46:30.760 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/activate - 400 1236 application/json; charset=utf-8 94.1318ms
2025-07-20 17:46:52.572 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/all/admin?isActive=false&isDeleted=false&page=1&pageSize=10 - null null
2025-07-20 17:46:52.578 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:46:52.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:46:52.584 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetAllForAdmin (E-Commerce)'
2025-07-20 17:46:52.591 +03:00 [INF] Route matched with {action = "GetAllForAdmin", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:46:52.599 +03:00 [INF] Executing GetAllCategoriesAsync in CategoryService with isActive: False, isDeleted: False, page: 1, pageSize: 10
2025-07-20 17:46:52.601 +03:00 [INF] Getting cache for key: category_all_False_False_1_10
2025-07-20 17:46:52.607 +03:00 [WRN] Cache miss for key: category_all_False_False_1_10
2025-07-20 17:46:52.609 +03:00 [INF] Execute GetAll for entity Category
2025-07-20 17:46:52.661 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`DisplayOrder`, `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`DeletedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE (`c`.`IsActive` = @__isActive_Value_0) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`
2025-07-20 17:46:52.689 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:46:52.693 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetAllForAdmin (E-Commerce) in 98.0536ms
2025-07-20 17:46:52.695 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetAllForAdmin (E-Commerce)'
2025-07-20 17:46:52.700 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/all/admin?isActive=false&isDeleted=false&page=1&pageSize=10 - 200 466 application/json; charset=utf-8 126.9447ms
2025-07-20 17:46:56.329 +03:00 [INF] Setting cache for key: category_all_False_False_1_10
2025-07-20 17:46:56.337 +03:00 [INF] Cache set successfully for key: category_all_False_False_1_10 with tags: [category]
2025-07-20 17:47:04.575 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/all/user?page=1&pageSize=10 - null null
2025-07-20 17:47:04.582 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:47:04.585 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:47:04.594 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetAllForUser (E-Commerce)'
2025-07-20 17:47:04.601 +03:00 [INF] Route matched with {action = "GetAllForUser", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForUser(Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:47:04.606 +03:00 [INF] Executing GetAllCategoriesAsync in CategoryService with isActive: True, isDeleted: False, page: 1, pageSize: 10
2025-07-20 17:47:04.608 +03:00 [INF] Getting cache for key: category_all_True_False_1_10
2025-07-20 17:47:04.615 +03:00 [WRN] Cache miss for key: category_all_True_False_1_10
2025-07-20 17:47:04.622 +03:00 [INF] Execute GetAll for entity Category
2025-07-20 17:47:04.655 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`DisplayOrder`, `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`DeletedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    WHERE (`c`.`IsActive` = @__isActive_Value_0) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`
2025-07-20 17:47:04.685 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:47:04.688 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetAllForUser (E-Commerce) in 83.6458ms
2025-07-20 17:47:04.690 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetAllForUser (E-Commerce)'
2025-07-20 17:47:04.693 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/all/user?page=1&pageSize=10 - 200 90 application/json; charset=utf-8 117.4575ms
2025-07-20 17:47:06.346 +03:00 [INF] Setting cache for key: category_all_True_False_1_10
2025-07-20 17:47:06.351 +03:00 [INF] Cache set successfully for key: category_all_True_False_1_10 with tags: [category]
2025-07-20 17:47:24.543 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/user/1 - null null
2025-07-20 17:47:24.555 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:47:24.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:47:24.567 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsyncForUsers (E-Commerce)'
2025-07-20 17:47:24.573 +03:00 [INF] Route matched with {action = "GetByIdAsyncForUsers", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsyncForUsers(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:47:24.578 +03:00 [INF] Executing GetByIdAsyncForUsers for id: 1, isActive: True, includeDeleted: False
2025-07-20 17:47:24.579 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: False
2025-07-20 17:47:24.580 +03:00 [INF] Getting cache for key: categoryid:1_active:True_deleted:False
2025-07-20 17:47:24.582 +03:00 [WRN] Cache miss for key: categoryid:1_active:True_deleted:False
2025-07-20 17:47:24.584 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:47:24.605 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:47:24.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:47:24.622 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:47:24.625 +03:00 [WRN] Category with id: 1 not found
2025-07-20 17:47:24.629 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:47:24.631 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsyncForUsers (E-Commerce) in 55.0143ms
2025-07-20 17:47:24.636 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsyncForUsers (E-Commerce)'
2025-07-20 17:47:24.642 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/user/1 - 404 1104 application/json; charset=utf-8 98.3558ms
2025-07-20 17:47:25.959 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 17:47:38.048 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/search?keyword=o&page=1&pageSize=10 - null null
2025-07-20 17:47:38.077 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:47:38.093 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:47:38.114 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:47:38.125 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:47:38.153 +03:00 [INF] Executing GetByIdAsync for id: 0, isActive: , includeDeleted: 
2025-07-20 17:47:38.154 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 0, isActive: , includeDeleted: 
2025-07-20 17:47:38.155 +03:00 [INF] Getting cache for key: categoryid:0_active:_deleted:
2025-07-20 17:47:38.158 +03:00 [WRN] Cache miss for key: categoryid:0_active:_deleted:
2025-07-20 17:47:38.161 +03:00 [INF] Executing GetCategoryByIdAsync for id: 0
2025-07-20 17:47:38.164 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE `c`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:47:38.169 +03:00 [WRN] Category with id: 0 doesn't exist
2025-07-20 17:47:38.171 +03:00 [WRN] Category with id: 0 not found
2025-07-20 17:47:38.180 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:47:38.189 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 51.178ms
2025-07-20 17:47:38.193 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:47:38.195 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/search?keyword=o&page=1&pageSize=10 - 404 1104 application/json; charset=utf-8 146.4612ms
2025-07-20 17:47:43.226 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/search?keyword=o&isActive=true&isDeleted=true&page=1&pageSize=10 - null null
2025-07-20 17:47:43.233 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:47:43.243 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:47:43.252 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:47:43.253 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:47:43.260 +03:00 [INF] Executing GetByIdAsync for id: 0, isActive: True, includeDeleted: 
2025-07-20 17:47:43.262 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 0, isActive: True, includeDeleted: 
2025-07-20 17:47:43.263 +03:00 [INF] Getting cache for key: categoryid:0_active:True_deleted:
2025-07-20 17:47:43.265 +03:00 [WRN] Cache miss for key: categoryid:0_active:True_deleted:
2025-07-20 17:47:43.269 +03:00 [INF] Executing GetCategoryByIdAsync for id: 0
2025-07-20 17:47:43.291 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:47:43.304 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND (`c`.`IsActive` = @__isActive_Value_1)
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:47:43.309 +03:00 [WRN] Category with id: 0 doesn't exist
2025-07-20 17:47:43.311 +03:00 [WRN] Category with id: 0 not found
2025-07-20 17:47:43.315 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:47:43.324 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 64.2325ms
2025-07-20 17:47:43.328 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:47:43.329 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/search?keyword=o&isActive=true&isDeleted=true&page=1&pageSize=10 - 404 1104 application/json; charset=utf-8 103.0351ms
2025-07-20 17:48:05.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/api/Categories/admin-search?page=1&pageSize=10 - null null
2025-07-20 17:48:05.505 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:48:05.548 +03:00 [INF] No cached response available for this request.
2025-07-20 17:48:05.564 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-20 17:48:05.573 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-20 17:48:05.576 +03:00 [INF] The response could not be cached for this request.
2025-07-20 17:48:05.577 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/api/Categories/admin-search?page=1&pageSize=10 - 401 0 null 81.3054ms
2025-07-20 17:48:32.376 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/admin-search?page=1&pageSize=10 - null null
2025-07-20 17:48:32.384 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:48:32.392 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:48:32.398 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.SearchForAdmin (E-Commerce)'
2025-07-20 17:48:32.408 +03:00 [INF] Route matched with {action = "SearchForAdmin", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchForAdmin(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:48:32.425 +03:00 [INF] Executing FilterAsync with filters
2025-07-20 17:48:32.428 +03:00 [INF] Getting cache for key: category_filter____1_10
2025-07-20 17:48:32.431 +03:00 [WRN] Cache miss for key: category_filter____1_10
2025-07-20 17:48:32.433 +03:00 [INF] Execute GetAll for entity Category
2025-07-20 17:48:32.460 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM `Categories` AS `c`
2025-07-20 17:48:32.504 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`DisplayOrder`, `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`DeletedAt`, `c`.`DisplayOrder`
    FROM `Categories` AS `c`
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`
2025-07-20 17:48:32.534 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:48:32.537 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.SearchForAdmin (E-Commerce) in 124.2838ms
2025-07-20 17:48:32.539 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.SearchForAdmin (E-Commerce)'
2025-07-20 17:48:32.541 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/admin-search?page=1&pageSize=10 - 200 488 application/json; charset=utf-8 165.2998ms
2025-07-20 17:48:36.451 +03:00 [INF] Setting cache for key: category_filter____1_10
2025-07-20 17:48:36.455 +03:00 [INF] Cache set successfully for key: category_filter____1_10 with tags: [category]
2025-07-20 17:49:58.984 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------900785980602731109253762 403
2025-07-20 17:49:58.991 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:49:58.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:49:59.001 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:49:59.010 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:49:59.023 +03:00 [INF] Executing CreateAsync
2025-07-20 17:49:59.029 +03:00 [INF] Execute CreateAsync
2025-07-20 17:49:59.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 17:49:59.045 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:49:59.050 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 33.1804ms
2025-07-20 17:49:59.052 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:49:59.055 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 404 386 application/json; charset=utf-8 70.2536ms
2025-07-20 17:50:14.396 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - null 0
2025-07-20 17:50:14.401 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:50:14.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:50:14.410 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:50:14.412 +03:00 [INF] Route matched with {action = "ReturnRemovedCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] ReturnRemovedCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:50:14.421 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:50:14.424 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:50:14.427 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:50:14.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NOT NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:50:14.435 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:50:14.437 +03:00 [WRN] Can't Found Category with this id:1
2025-07-20 17:50:14.443 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:50:14.446 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce) in 25.3793ms
2025-07-20 17:50:14.449 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:50:14.451 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - 404 1116 application/json; charset=utf-8 55.7825ms
2025-07-20 17:51:25.754 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - null 0
2025-07-20 17:51:25.761 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:51:25.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:51:25.771 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:51:25.773 +03:00 [INF] Route matched with {action = "ReturnRemovedCategoryAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] ReturnRemovedCategoryAsync(Int32) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:51:25.777 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:51:25.779 +03:00 [INF] Executing ReturnRemovedCategoryAsync for id: 1
2025-07-20 17:51:25.781 +03:00 [INF] Executing GetCategoryByIdAsync for id: 1
2025-07-20 17:51:25.783 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NOT NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-20 17:51:25.788 +03:00 [WRN] Category with id: 1 doesn't exist
2025-07-20 17:51:25.791 +03:00 [WRN] Can't Found Category with this id:1
2025-07-20 17:51:25.798 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:51:25.801 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce) in 24.2681ms
2025-07-20 17:51:25.804 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.ReturnRemovedCategoryAsync (E-Commerce)'
2025-07-20 17:51:25.806 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7288/api/Categories/1/Restore - 404 1116 application/json; charset=utf-8 52.1212ms
2025-07-20 17:51:30.232 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:51:30.237 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:51:30.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:51:30.247 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:51:30.248 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:51:30.252 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:51:30.254 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:51:30.255 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:51:30.257 +03:00 [INF] Cache hit for key: categoryid:1_active:_deleted:False
2025-07-20 17:51:30.259 +03:00 [INF] Cache hit for category 1 with filters
2025-07-20 17:51:30.265 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:51:30.267 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 15.432ms
2025-07-20 17:51:30.270 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:51:30.273 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 200 1424 application/json; charset=utf-8 41.5694ms
2025-07-20 17:51:51.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:51:51.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 23.9204ms
2025-07-20 17:51:51.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:51:51.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:51:51.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:51:51.124 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.3313ms
2025-07-20 17:51:51.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 20.6225ms
2025-07-20 17:51:51.168 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.5177ms
2025-07-20 17:51:51.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:51:51.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 395.9599ms
2025-07-20 17:51:54.425 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - null null
2025-07-20 17:51:54.431 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:51:54.435 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:51:54.439 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:51:54.447 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 17:51:54.454 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:51:54.455 +03:00 [INF] Execute: GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-20 17:51:54.456 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-20 17:51:54.459 +03:00 [INF] Cache hit for key: categoryid:1_active:_deleted:False
2025-07-20 17:51:54.468 +03:00 [INF] Cache hit for category 1 with filters
2025-07-20 17:51:54.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategorywithdataDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:51:54.477 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 24.5545ms
2025-07-20 17:51:54.496 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-20 17:51:54.502 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Categories/1?includeDeleted=false - 200 1424 application/json; charset=utf-8 76.9642ms
2025-07-20 17:52:01.706 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------189851047922038998548896 403
2025-07-20 17:52:01.711 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:52:01.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:52:01.719 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:52:01.727 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:52:01.732 +03:00 [INF] Executing CreateAsync
2025-07-20 17:52:01.736 +03:00 [INF] Execute CreateAsync
2025-07-20 17:52:01.740 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 17:52:01.745 +03:00 [INF] Executing IsExsistByName for name: uzH	Is5
2025-07-20 17:52:01.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-07-20 17:52:01.769 +03:00 [INF] Category with name: uzH	Is5 does not exist
2025-07-20 17:52:01.774 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-20 17:52:01.802 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-20 17:52:01.815 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:52:01.822 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:52:01.825 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:52:01.826 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:52:01.853 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-20 17:52:01.855 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:52:01.864 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 133.1613ms
2025-07-20 17:52:01.865 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:52:01.867 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 448 application/json; charset=utf-8 160.5853ms
2025-07-20 17:52:06.665 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:52:06.673 +03:00 [INF] Removed 6 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:53:34.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:53:34.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 25.8193ms
2025-07-20 17:53:34.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:53:34.498 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:53:34.518 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:53:34.539 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.4577ms
2025-07-20 17:53:34.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 49.6445ms
2025-07-20 17:53:34.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.9019ms
2025-07-20 17:53:34.631 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:53:35.418 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 787.2681ms
2025-07-20 17:53:37.072 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------989103317001335127224125 403
2025-07-20 17:53:37.090 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:53:37.126 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:53:37.300 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:53:37.349 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:53:37.384 +03:00 [INF] Executing CreateAsync
2025-07-20 17:53:37.390 +03:00 [INF] Execute CreateAsync
2025-07-20 17:53:37.398 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 17:53:37.408 +03:00 [INF] Executing IsExsistByName for name: uzH	Is5
2025-07-20 17:53:37.413 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-07-20 17:53:37.419 +03:00 [INF] Category with name: uzH	Is5 already exists
2025-07-20 17:53:37.430 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:53:37.433 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 78.6612ms
2025-07-20 17:53:37.441 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:53:37.442 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 409 432 application/json; charset=utf-8 369.7558ms
2025-07-20 17:53:42.302 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------918141519087158379292701 405
2025-07-20 17:53:42.306 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:53:42.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:53:42.315 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:53:42.318 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:53:42.322 +03:00 [INF] Executing CreateAsync
2025-07-20 17:53:42.324 +03:00 [INF] Execute CreateAsync
2025-07-20 17:53:42.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 17:53:42.332 +03:00 [INF] Executing IsExsistByName for name: uzH	Is5qw
2025-07-20 17:53:42.336 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-07-20 17:53:42.341 +03:00 [INF] Category with name: uzH	Is5qw does not exist
2025-07-20 17:53:42.344 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-20 17:53:42.346 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-20 17:53:42.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:53:42.356 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:53:42.357 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:53:42.358 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:53:42.384 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-20 17:53:42.389 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:53:42.392 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 70.5874ms
2025-07-20 17:53:42.394 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:53:42.396 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 450 application/json; charset=utf-8 94.7747ms
2025-07-20 17:53:46.992 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:53:46.996 +03:00 [WRN] No cache entries found for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:54:08.230 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:54:08.241 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 11.3264ms
2025-07-20 17:54:08.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:54:08.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:54:08.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:54:08.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 21.6324ms
2025-07-20 17:54:08.339 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 27.7674ms
2025-07-20 17:54:08.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.8787ms
2025-07-20 17:54:08.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:54:08.659 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.1502ms
2025-07-20 17:54:24.187 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------199877744587004561169190 406
2025-07-20 17:54:24.193 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:54:24.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:54:24.206 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:54:24.213 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:54:24.222 +03:00 [INF] Executing CreateAsync
2025-07-20 17:54:24.225 +03:00 [INF] Execute CreateAsync
2025-07-20 17:54:24.229 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 17:54:24.235 +03:00 [INF] Executing IsExsistByName for name: uzH	Is5qw2
2025-07-20 17:54:24.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-07-20 17:54:24.243 +03:00 [INF] Category with name: uzH	Is5qw2 does not exist
2025-07-20 17:54:24.247 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-20 17:54:24.250 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-20 17:54:24.255 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:54:24.262 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:54:24.264 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:54:24.270 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:54:24.298 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-20 17:54:24.301 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:54:24.303 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 82.9366ms
2025-07-20 17:54:24.305 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 17:54:24.307 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 459 application/json; charset=utf-8 120.2291ms
2025-07-20 17:54:27.028 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:54:27.032 +03:00 [WRN] No cache entries found for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:54:51.662 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------340664679257413369695571 513
2025-07-20 17:54:51.671 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:54:51.674 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:54:51.683 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-20 17:54:51.692 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] UpdateAsync(Int32, E_Commerce.DtoModels.SubCategorydto.UpdateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:54:51.713 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-20 17:54:51.722 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:54:51.729 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 26.0364ms
2025-07-20 17:54:51.737 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-20 17:54:51.740 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 400 266 application/json; charset=utf-8 78.1872ms
2025-07-20 17:55:04.110 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------624212460881079200831156 399
2025-07-20 17:55:04.118 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:55:04.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:55:04.129 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-20 17:55:04.132 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] UpdateAsync(Int32, E_Commerce.DtoModels.SubCategorydto.UpdateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:55:04.138 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-20 17:55:04.155 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-20 17:55:04.166 +03:00 [INF] Executing GetByIdAsync for entity SubCategory with ID: 1
2025-07-20 17:55:04.174 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE `s`.`Id` = @__id_0
LIMIT 1
2025-07-20 17:55:04.184 +03:00 [INF] Update data received - Name: 'KDHlE5', Description: 'P6XXdsadsaasd', CategoryId: 1
2025-07-20 17:55:04.186 +03:00 [INF] Updating name from 'uzH	Is5' to 'KDHlE5'
2025-07-20 17:55:04.190 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 17:55:04.194 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__trimmedName_0='?' (Size = 4000), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-20 17:55:04.199 +03:00 [INF] Name updated successfully to 'KDHlE5'
2025-07-20 17:55:04.201 +03:00 [INF] Updating description from 'sadasdasds' to 'P6XXdsadsaasd'
2025-07-20 17:55:04.202 +03:00 [INF] Description updated successfully
2025-07-20 17:55:04.204 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-20 17:55:04.206 +03:00 [INF] Final entity state - Name: 'KDHlE5', Description: 'P6XXdsadsaasd', CategoryId: 1, IsActive: False, ModifiedAt: 7/20/2025 2:55:04 PM
2025-07-20 17:55:04.208 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-20 17:55:04.210 +03:00 [INF] Execute Update for entity SubCategory
2025-07-20 17:55:04.211 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-20 17:55:04.214 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 17:55:04.215 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 17:55:04.216 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 17:55:04.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p9='?' (Size = 255), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `SubCategories` SET `CategoryId` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `Description` = @p3, `ImageId` = @p4, `IsActive` = @p5, `ModifiedAt` = @p6, `Name` = @p7
WHERE `Id` = @p8;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 17:55:04.245 +03:00 [INF] Successfully updated SubCategory 1
2025-07-20 17:55:04.254 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:55:04.257 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 119.8704ms
2025-07-20 17:55:04.259 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-20 17:55:04.261 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1197 application/json; charset=utf-8 151.0114ms
2025-07-20 17:55:07.094 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:55:07.100 +03:00 [WRN] No cache entries found for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 17:55:16.158 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 17:55:16.165 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:55:16.177 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:55:16.182 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 17:55:16.188 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:55:16.198 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:55:16.204 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 17:55:16.206 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 17:55:16.208 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 17:55:16.211 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 17:55:16.247 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:55:16.261 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN LATERAL (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN LATERAL (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`t`.`Id` = `i0`.`SubCategoryId`) AND `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON TRUE
    WHERE `t`.`Id` = `p`.`SubCategoryId`
) AS `t1` ON TRUE
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 17:55:16.298 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-07-20 17:55:16.314 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 120.1794ms
2025-07-20 17:55:16.318 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 17:55:16.321 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at E_Commerce.Services.SubCategoryServices.SubCategoryServices.GetSubCategoryByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 isDeleted)
   at E_Commerce.Controllers.SubCategoryController.GetByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 DeletedOnly)
   at lambda_method1325(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context)
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-20 17:55:16.355 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 500 null text/plain; charset=utf-8 197.5255ms
2025-07-20 17:58:31.506 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 17:58:32.963 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:58:32.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 17:58:33.012 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 17:58:33.033 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:58:33.057 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:58:33.347 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:58:33.414 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 17:58:33.444 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 17:58:33.990 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 17:58:33.994 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 17:58:34.075 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 17:58:34.096 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 17:58:34.098 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 17:58:34.099 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 17:58:34.104 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 17:58:34.117 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:58:34.121 +03:00 [INF] Hosting environment: Development
2025-07-20 17:58:34.122 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 17:58:34.133 +03:00 [INF] Server mrrobot:2808:279992c3 successfully announced in 10.4443 ms
2025-07-20 17:58:34.139 +03:00 [INF] Server mrrobot:2808:279992c3 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 17:58:34.236 +03:00 [INF] Server mrrobot:2808:279992c3 all the dispatchers started
2025-07-20 17:58:34.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 17:58:34.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 165.9987ms
2025-07-20 17:58:34.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 17:58:34.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 17:58:34.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 17:58:34.524 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 6.4563ms
2025-07-20 17:58:34.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 21.3674ms
2025-07-20 17:58:34.561 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.6796ms
2025-07-20 17:58:34.935 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 17:58:35.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 228.0646ms
2025-07-20 17:58:52.094 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 17:58:52.182 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 17:58:52.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 17:58:52.303 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 17:58:52.330 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 17:58:52.699 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 17:58:52.704 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 17:58:52.711 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 17:58:52.717 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 17:58:52.721 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 17:58:52.851 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:58:52.870 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN LATERAL (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN LATERAL (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`
        FROM `Images` AS `i0`
        WHERE (`t`.`Id` = `i0`.`SubCategoryId`) AND `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON TRUE
    WHERE `t`.`Id` = `p`.`SubCategoryId`
) AS `t1` ON TRUE
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 17:58:52.905 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'E_Commerce.Context.AppDbContext'.
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-07-20 17:58:52.932 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 593.2954ms
2025-07-20 17:58:52.938 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 17:58:52.946 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '(
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Descript...' at line 13
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at E_Commerce.Services.SubCategoryServices.SubCategoryServices.GetSubCategoryByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 isDeleted) in D:\project_fashion\E-Commerce-API-main\Services\SubCategoryServices\SubCategoryServices.cs:line 171
   at E_Commerce.Controllers.SubCategoryController.GetByIdAsync(Int32 id, Nullable`1 isActive, Nullable`1 DeletedOnly) in D:\project_fashion\E-Commerce-API-main\Controllers\SubCategoryController.cs:line 73
   at lambda_method272(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-20 17:58:53.010 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 500 null text/plain; charset=utf-8 915.726ms
2025-07-20 18:00:11.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 18:00:11.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 16.365ms
2025-07-20 18:00:11.458 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 18:00:11.461 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 3.2011ms
2025-07-20 18:00:11.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 18:00:11.475 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 18:00:11.481 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.828ms
2025-07-20 18:00:11.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.5486ms
2025-07-20 18:00:12.042 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 18:00:12.276 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 233.4123ms
2025-07-20 18:00:15.070 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 18:00:15.084 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:00:15.096 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:00:15.102 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:00:15.113 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:00:15.122 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 18:00:15.123 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 18:00:15.127 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:00:15.129 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:00:15.131 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:00:15.170 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 18:00:15.229 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 18:00:15.360 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:00:15.386 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 269.231ms
2025-07-20 18:00:15.389 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:00:15.391 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 200 1207 application/json; charset=utf-8 321.11ms
2025-07-20 18:00:24.430 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:00:24.479 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:_deleted:False with tags: [subcategorydata]
2025-07-20 18:00:41.481 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/all/admin?page=1&pageSize=10 - null null
2025-07-20 18:00:41.486 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:00:41.491 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:00:41.504 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce)'
2025-07-20 18:00:41.513 +03:00 [INF] Route matched with {action = "GetAllForAdmin", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:00:41.539 +03:00 [INF] Executing GetAllForAdmin with isActive=, isDeleted=, page=1, pageSize=10
2025-07-20 18:00:41.548 +03:00 [INF] Executing GetAllSubCategoriesAsync in SubCategoryService with isActive: , isDeleted: , page: 1, pageSize: 10
2025-07-20 18:00:41.551 +03:00 [INF] Getting cache for key: subcategory_all___1_10
2025-07-20 18:00:41.554 +03:00 [WRN] Cache miss for key: subcategory_all___1_10
2025-07-20 18:00:41.557 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:00:41.613 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE `s`.`DeletedAt` IS NULL
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-20 18:00:41.644 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.Services.Result`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:00:41.650 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce) in 131.5387ms
2025-07-20 18:00:41.652 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetAllForAdmin (E-Commerce)'
2025-07-20 18:00:41.658 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/all/admin?page=1&pageSize=10 - 200 617 application/json; charset=utf-8 177.2013ms
2025-07-20 18:00:44.369 +03:00 [INF] Setting cache for key: subcategory_all___1_10
2025-07-20 18:00:44.376 +03:00 [INF] Cache set successfully for key: subcategory_all___1_10 with tags: [subcategory]
2025-07-20 18:01:07.197 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddExtraImages - multipart/form-data; boundary=--------------------------232827757929169613319030 69124
2025-07-20 18:01:07.203 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:01:07.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:01:07.216 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.AddExtraImagesAsync (E-Commerce)'
2025-07-20 18:01:07.222 +03:00 [INF] Route matched with {action = "AddExtraImagesAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddExtraImagesAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddImagesDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:01:07.255 +03:00 [INF] Executing AddExtraImagesAsync for id: 1
2025-07-20 18:01:07.262 +03:00 [INF] Executing AddImagesToSubCategoryAsync for subCategoryId: 1
2025-07-20 18:01:07.269 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:01:07.320 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-20 18:01:07.375 +03:00 [INF]  Saving 1 images to SubCategoryPhotos
2025-07-20 18:01:07.381 +03:00 [INF]  Saving image to SubCategoryPhotos
2025-07-20 18:01:07.397 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-20 18:01:07.484 +03:00 [INF] Image added successfully (pending save)
2025-07-20 18:01:07.597 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 18:01:07.632 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:01:07.636 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:01:07.668 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:01:07.671 +03:00 [INF]  Image saved: /SubCategoryPhotos/90bbd417-6a66-409e-9bf0-1aef3767928d.png
2025-07-20 18:01:07.679 +03:00 [INF] Execute Update for entity SubCategory
2025-07-20 18:01:07.681 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-20 18:01:07.682 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:01:07.683 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:01:07.685 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:01:07.746 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p10='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255), @p20='?' (DbType = DateTime), @p21='?' (DbType = DateTime), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime), @p25='?' (DbType = Int32), @p26='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `SubCategories` SET `CategoryId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `Description` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 18:01:07.804 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:01:07.818 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.AddExtraImagesAsync (E-Commerce) in 592.0493ms
2025-07-20 18:01:07.821 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.AddExtraImagesAsync (E-Commerce)'
2025-07-20 18:01:07.829 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddExtraImages - 200 1135 application/json; charset=utf-8 631.5336ms
2025-07-20 18:01:14.394 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:01:14.406 +03:00 [INF] Removed 2 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:01:16.154 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 18:01:16.162 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:01:16.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:01:16.172 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:01:16.175 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:01:16.178 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 18:01:16.179 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 18:01:16.181 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:16.182 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:16.184 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:01:16.249 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 18:01:16.289 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:01:16.292 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 114.9121ms
2025-07-20 18:01:16.294 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:01:16.299 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 200 1320 application/json; charset=utf-8 144.6096ms
2025-07-20 18:01:24.423 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:24.427 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:_deleted:False with tags: [subcategorydata]
2025-07-20 18:01:31.053 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------260921383416218447044780 69123
2025-07-20 18:01:31.061 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:01:31.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:01:31.074 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-20 18:01:31.081 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commerce.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:01:31.093 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-20 18:01:31.101 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-20 18:01:31.104 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:01:31.152 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-20 18:01:31.176 +03:00 [INF]  Saving main image to SubCategoryPhotos
2025-07-20 18:01:31.181 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-20 18:01:31.183 +03:00 [INF] Image added successfully (pending save)
2025-07-20 18:01:31.194 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 18:01:31.199 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:01:31.201 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:01:31.203 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:01:31.204 +03:00 [INF]  Main image saved: /SubCategoryPhotos/9cdd831a-8320-4742-83f5-de233a643ca5.png
2025-07-20 18:01:31.206 +03:00 [INF] Execute Update for entity SubCategory
2025-07-20 18:01:31.209 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-20 18:01:31.210 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:01:31.211 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:01:31.212 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:01:31.221 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p10='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime), @p19='?' (Size = 255), @p20='?' (DbType = DateTime), @p21='?' (DbType = DateTime), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime), @p25='?' (DbType = Int32), @p26='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `SubCategories` SET `CategoryId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `Description` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 18:01:31.255 +03:00 [INF] Removing cache by tag: subcategory
2025-07-20 18:01:31.257 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-20 18:01:31.262 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:01:31.267 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 179.9115ms
2025-07-20 18:01:31.269 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-20 18:01:31.271 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1134 application/json; charset=utf-8 218.3948ms
2025-07-20 18:01:34.454 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:01:34.472 +03:00 [INF] Removed 1 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:01:37.353 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 18:01:37.358 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:01:37.362 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:01:37.368 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:01:37.370 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:01:37.376 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 18:01:37.378 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 18:01:37.380 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:37.382 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:37.383 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:01:37.437 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 18:01:37.469 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:01:37.472 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 96.9574ms
2025-07-20 18:01:37.475 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:01:37.477 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 200 1433 application/json; charset=utf-8 124.6845ms
2025-07-20 18:01:44.454 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:01:44.456 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:_deleted:False with tags: [subcategorydata]
2025-07-20 18:01:51.950 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/1/RemoveImage/4 - null null
2025-07-20 18:01:51.958 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:01:51.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:01:51.969 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.RemoveImageAsync (E-Commerce)'
2025-07-20 18:01:51.975 +03:00 [INF] Route matched with {action = "RemoveImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]] RemoveImageAsync(Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:01:51.983 +03:00 [INF] Executing RemoveImageAsync for id: 1, imageId: 4
2025-07-20 18:01:51.991 +03:00 [INF] Removing image 4 from subcategory: 1
2025-07-20 18:01:52.003 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:01:52.078 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-20 18:01:52.084 +03:00 [INF]  Execute DeleteImageAsync for image ID: 4
2025-07-20 18:01:52.087 +03:00 [INF] Execute SoftDeleteAsync for entity Image with ID: 4
2025-07-20 18:01:52.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM `Images` AS `i`
WHERE (`i`.`Id` = @__id_0) AND `i`.`DeletedAt` IS NULL
LIMIT 1
2025-07-20 18:01:52.099 +03:00 [INF] Image with ID: 4 soft deleted.
2025-07-20 18:01:52.102 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Images` SET `AltText` = @p0, `CategoryId` = @p1, `CollectionId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `FileSize` = @p5, `FileType` = @p6, `Folder` = @p7, `Height` = @p8, `IsMain` = @p9, `ModifiedAt` = @p10, `ProductId` = @p11, `SubCategoryId` = @p12, `Title` = @p13, `UploadDate` = @p14, `Url` = @p15, `Width` = @p16
WHERE `Id` = @p17;
SELECT ROW_COUNT();
2025-07-20 18:01:52.107 +03:00 [INF]  Image marked as deleted: wwwroot\SubCategoryPhotos\90bbd417-6a66-409e-9bf0-1aef3767928d.png
2025-07-20 18:01:52.109 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:01:52.111 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:01:52.112 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:01:52.118 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 18:01:52.148 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:01:52.152 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.RemoveImageAsync (E-Commerce) in 170.0323ms
2025-07-20 18:01:52.155 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.RemoveImageAsync (E-Commerce)'
2025-07-20 18:01:52.158 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7288/api/SubCategory/1/RemoveImage/4 - 200 1272 application/json; charset=utf-8 207.5594ms
2025-07-20 18:01:54.506 +03:00 [INF] Removing cache by tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:01:54.514 +03:00 [INF] Removed 1 cache entries for tags: [subcategorydata, categorywithdata, subcategory]
2025-07-20 18:02:10.203 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - null null
2025-07-20 18:02:10.207 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:02:10.212 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:02:10.219 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:02:10.220 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean]) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:02:10.224 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-20 18:02:10.226 +03:00 [INF] Execute: GetSubCategoryByIdAsync in services for id: 1, isActive: , isDeleted: False
2025-07-20 18:02:10.227 +03:00 [INF] Getting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:02:10.230 +03:00 [WRN] Cache miss for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:02:10.231 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-20 18:02:10.274 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`IsMain`, `t0`.`Url`, `t1`.`Quantity`, `t1`.`CreatedAt`, `t1`.`DeletedAt`, `t1`.`Description`, `t1`.`FinalPrice`, `t1`.`Name`, `t1`.`DiscountPercent`, `t1`.`EndDate`, `t1`.`Id`, `t1`.`Name0`, `t1`.`IsActive`, `t1`.`ModifiedAt`, `t1`.`fitType`, `t1`.`Gender`, `t1`.`Price`, `t1`.`SubCategoryId`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`IsMain`, `t1`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`IsMain`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Quantity`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`FinalPrice`, `d`.`Name`, `d`.`DiscountPercent`, `d`.`EndDate`, `p`.`Id`, `p`.`Name` AS `Name0`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`fitType`, `p`.`Gender`, `p`.`Price`, `p`.`SubCategoryId`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`IsMain`, `t2`.`Url`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`IsMain`, `i0`.`Url`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-20 18:02:10.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:02:10.301 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 77.685ms
2025-07-20 18:02:10.303 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-20 18:02:10.305 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?DeletedOnly=false - 200 1319 application/json; charset=utf-8 102.3285ms
2025-07-20 18:02:14.543 +03:00 [INF] Setting cache for key: subcategorydataid:1_active:_deleted:False
2025-07-20 18:02:14.546 +03:00 [INF] Cache set successfully for key: subcategorydataid:1_active:_deleted:False with tags: [subcategorydata]
2025-07-20 18:49:20.408 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 18:54:43.126 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 18:54:44.917 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 18:54:44.932 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 18:54:44.959 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 18:54:44.977 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 18:54:45.009 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 18:54:45.390 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 18:54:45.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 18:54:45.499 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 18:54:46.205 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 18:54:46.207 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 18:54:46.310 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 18:54:46.334 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 18:54:46.336 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 18:54:46.338 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 18:54:46.339 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 18:54:46.356 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 18:54:46.359 +03:00 [INF] Hosting environment: Development
2025-07-20 18:54:46.368 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 18:54:47.095 +03:00 [INF] Server mrrobot:18256:e6a4e1f9 successfully announced in 728.0457 ms
2025-07-20 18:54:47.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 18:54:47.403 +03:00 [INF] Server mrrobot:18256:e6a4e1f9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 18:54:47.560 +03:00 [INF] Server mrrobot:18256:e6a4e1f9 all the dispatchers started
2025-07-20 18:54:47.686 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 431.6504ms
2025-07-20 18:54:47.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 18:54:47.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 18:54:47.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 13.359ms
2025-07-20 18:54:47.759 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 18:54:47.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.8818ms
2025-07-20 18:54:47.829 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.1661ms
2025-07-20 18:54:47.907 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 18:54:48.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 283.064ms
2025-07-20 18:55:01.814 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------447246889600098289057024 406
2025-07-20 18:55:02.069 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:55:02.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:55:02.337 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 18:55:02.384 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData]]] CreateAsync(E_Commerce.DtoModels.SubCategorydto.CreateSubCategoryDto) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-20 18:55:03.234 +03:00 [INF] Executing CreateAsync
2025-07-20 18:55:03.242 +03:00 [INF] Execute CreateAsync
2025-07-20 18:55:03.272 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL)
2025-07-20 18:55:03.284 +03:00 [INF] Executing IsExsistByName for name: uzH	Is5qw2
2025-07-20 18:55:03.304 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0)
2025-07-20 18:55:03.312 +03:00 [INF] Category with name: uzH	Is5qw2 already exists
2025-07-20 18:55:03.368 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDtoWithData, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:55:03.418 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 1022.6661ms
2025-07-20 18:55:03.424 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-20 18:55:03.433 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 409 438 application/json; charset=utf-8 1618.8603ms
2025-07-20 18:55:30.902 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories - multipart/form-data; boundary=--------------------------115216821692890362481351 392
2025-07-20 18:55:30.911 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:55:30.923 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:55:30.941 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:30.952 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 18:55:30.975 +03:00 [INF] Executing CreateAsync
2025-07-20 18:55:30.981 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:55:30.997 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 39.1655ms
2025-07-20 18:55:31.001 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:31.005 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories - 400 199 application/json; charset=utf-8 102.3463ms
2025-07-20 18:55:38.765 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories - multipart/form-data; boundary=--------------------------490079879621849555659125 396
2025-07-20 18:55:38.778 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:55:38.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:55:38.797 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:38.804 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 18:55:38.823 +03:00 [INF] Executing CreateAsync
2025-07-20 18:55:38.826 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:55:38.832 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 21.8718ms
2025-07-20 18:55:38.836 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:38.839 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories - 400 271 application/json; charset=utf-8 74.0149ms
2025-07-20 18:55:51.344 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Categories - multipart/form-data; boundary=--------------------------857833309134232502301415 385
2025-07-20 18:55:51.355 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:55:51.360 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:55:51.371 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:51.374 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commerce.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commerce.Controllers.CategoriesController (E-Commerce).
2025-07-20 18:55:51.395 +03:00 [INF] Executing CreateAsync
2025-07-20 18:55:51.400 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:55:51.407 +03:00 [INF] Executed action E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce) in 28.1468ms
2025-07-20 18:55:51.410 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-20 18:55:51.415 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Categories - 400 298 application/json; charset=utf-8 70.8769ms
2025-07-20 18:56:51.118 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 18:56:51.126 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 18:56:51.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 18:56:51.140 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 18:56:51.149 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductListItemDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 18:56:51.212 +03:00 [INF] Executing CreateProduct
2025-07-20 18:56:51.223 +03:00 [INF] Creating new product: zRI31
2025-07-20 18:56:51.228 +03:00 [INF] Execute:IsExsistAsync in SubCategory Services
2025-07-20 18:56:51.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 18:56:51.253 +03:00 [INF] SubCategory with id: 1 exists
2025-07-20 18:56:51.287 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-20 18:56:51.448 +03:00 [INF] Product added successfully (pending save)
2025-07-20 18:56:51.457 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 18:56:51.461 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 18:56:51.497 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 18:56:51.610 +03:00 [INF] Getting cache for key: product_detail:0:isActive=False:deletedOnly=False
2025-07-20 18:56:51.625 +03:00 [WRN] Cache miss for key: product_detail:0:isActive=False:deletedOnly=False
2025-07-20 18:56:51.630 +03:00 [INF] Execute GetAll for entity Product
2025-07-20 18:56:51.806 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 18:56:51.834 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__8__locals1_isActive_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`c`, `t`.`Id0`, `t`.`DiscountPercent`, `t`.`IsActive`, `t`.`StartDate`, `t`.`EndDate`, `t`.`Name0`, `t`.`Description0`, `t0`.`Id`, `t0`.`Url`, `t1`.`Id`, `t1`.`Color`, `t1`.`Size`, `t1`.`Waist`, `t1`.`Length`, `t1`.`Quantity`, `t1`.`ProductId`
FROM (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Id` AS `Id0`, `d`.`DiscountPercent`, `d`.`IsActive`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    WHERE ((`p`.`Id` = @__8__locals1_id_0) AND `p`.`DeletedAt` IS NULL) AND (`p`.`IsActive` = @__8__locals1_isActive_1)
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
LEFT JOIN (
    SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Waist`, `p0`.`Length`, `p0`.`Quantity`, `p0`.`ProductId`
    FROM `ProductVariants` AS `p0`
    WHERE `p0`.`DeletedAt` IS NULL AND (`p0`.`Quantity` <> 0)
) AS `t1` ON `t`.`Id` = `t1`.`ProductId`
ORDER BY `t`.`Id`, `t`.`Id0`, `t0`.`Id`
2025-07-20 18:56:51.860 +03:00 [ERR] Unexpected error in CreateProductAsync for product zRI31
System.NullReferenceException: Object reference not set to an instance of an object.
   at E_Commerce.DtoModels.ProductDtos.ProductListItemDto.FromDetail(ProductDetailDto dto) in D:\project_fashion\E-Commerce-API-main\DtoModels\ProductDtos\ProductDto.cs:line 102
   at E_Commerce.Services.Product.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 201
2025-07-20 18:56:51.921 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductListItemDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:56:51.931 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 773.2322ms
2025-07-20 18:56:51.937 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 18:56:51.942 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 500 258 application/json; charset=utf-8 824.426ms
2025-07-20 18:56:57.779 +03:00 [INF] Removing cache by tags: [product_search, subcategory, productwithvariantdata]
2025-07-20 18:56:57.799 +03:00 [WRN] No cache entries found for tags: [product_search, subcategory, productwithvariantdata]
2025-07-20 18:59:47.499 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 19:20:22.964 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 19:20:24.622 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:20:24.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:20:24.673 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 19:20:24.701 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 19:20:24.733 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 19:20:25.096 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:20:25.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:20:25.202 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 19:20:25.860 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 19:20:25.876 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 19:20:25.971 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 19:20:26.002 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 19:20:26.005 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 19:20:26.007 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 19:20:26.016 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 19:20:26.034 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 19:20:26.048 +03:00 [INF] Hosting environment: Development
2025-07-20 19:20:26.055 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 19:20:26.059 +03:00 [INF] Server mrrobot:1532:acdde4cb successfully announced in 19.4227 ms
2025-07-20 19:20:26.124 +03:00 [INF] Server mrrobot:1532:acdde4cb is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 19:20:26.134 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 19:20:26.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:20:26.354 +03:00 [INF] Server mrrobot:1532:acdde4cb all the dispatchers started
2025-07-20 19:20:26.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 179.6486ms
2025-07-20 19:20:26.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:20:26.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:20:26.615 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:20:26.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 32.447ms
2025-07-20 19:20:26.658 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 43.5752ms
2025-07-20 19:20:26.719 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.5222ms
2025-07-20 19:20:26.791 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:20:27.025 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 234.2862ms
2025-07-20 19:21:59.138 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:21:59.331 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:21:59.424 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:21:59.513 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:21:59.550 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:22:00.260 +03:00 [INF] Executing CreateProduct
2025-07-20 19:22:00.272 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:22:00.350 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:22:00.363 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-20 19:22:00.554 +03:00 [INF] Product added successfully (pending save)
2025-07-20 19:22:00.561 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 19:22:00.568 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 19:22:00.616 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 19:22:00.884 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `FinalPrice`, `Gender`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 19:22:01.094 +03:00 [ERR] Unexpected error in CreateProductAsync for product zRI31
System.NullReferenceException: Object reference not set to an instance of an object.
   at E_Commerce.Services.ProductServices.ProductCatalogService.Maptoproductdto(Product p) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 150
   at E_Commerce.Services.ProductServices.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 225
2025-07-20 19:22:01.160 +03:00 [ERR] An error occurred using a transaction.
2025-07-20 19:22:01.178 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 1612.1044ms
2025-07-20 19:22:01.185 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:22:01.196 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Already committed or rolled back.
   at MySqlConnector.MySqlTransaction.VerifyValid() in /_/src/MySqlConnector/MySqlTransaction.cs:line 287
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 65
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductServices.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 231
   at E_Commerce.Services.Product.ProductsServices.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductsServices.cs:line 85
   at E_Commerce.Controllers.ProductController.CreateProduct(CreateProductDto model) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductController.cs:line 95
   at lambda_method272(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-20 19:22:01.273 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 500 null text/plain; charset=utf-8 2134.7283ms
2025-07-20 19:22:06.553 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:22:06.572 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:28:05.060 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 19:28:08.044 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:28:08.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:28:08.125 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 19:28:08.169 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 19:28:08.227 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 19:28:09.087 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:28:09.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:28:09.289 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 19:28:11.116 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 19:28:11.117 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 19:28:12.256 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 19:28:12.514 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 19:28:12.662 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 19:28:12.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:28:12.699 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 19:28:12.713 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 19:28:12.940 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 19:28:12.990 +03:00 [INF] Hosting environment: Development
2025-07-20 19:28:12.997 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 19:28:13.025 +03:00 [INF] Server mrrobot:11900:1ae13e45 successfully announced in 33.5548 ms
2025-07-20 19:28:13.070 +03:00 [INF] Server mrrobot:11900:1ae13e45 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 19:28:14.019 +03:00 [INF] Server mrrobot:11900:1ae13e45 all the dispatchers started
2025-07-20 19:28:14.179 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1492.3691ms
2025-07-20 19:28:14.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:28:14.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:28:14.255 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:28:14.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 40.5223ms
2025-07-20 19:28:14.372 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 124.0667ms
2025-07-20 19:28:14.500 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 245.553ms
2025-07-20 19:28:14.568 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:28:15.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 580.1488ms
2025-07-20 19:28:22.191 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:28:22.609 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:28:22.702 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:28:22.864 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:28:22.925 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:28:23.798 +03:00 [INF] Executing CreateProduct
2025-07-20 19:28:23.806 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:28:23.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:28:23.926 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-20 19:28:24.187 +03:00 [INF] Product added successfully (pending save)
2025-07-20 19:28:24.201 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 19:28:24.204 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 19:28:24.255 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 19:28:24.557 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `FinalPrice`, `Gender`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 19:28:55.760 +03:00 [ERR] Unexpected error in CreateProductAsync for product zRI31
System.NullReferenceException: Object reference not set to an instance of an object.
   at E_Commerce.Services.ProductServices.ProductCatalogService.Maptoproductdto(Product p) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 151
   at E_Commerce.Services.ProductServices.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 226
2025-07-20 19:28:55.834 +03:00 [ERR] An error occurred using a transaction.
2025-07-20 19:28:56.099 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:29:02.870 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 39927.6385ms
2025-07-20 19:29:02.873 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:29:02.879 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:29:05.175 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Already committed or rolled back.
   at MySqlConnector.MySqlTransaction.VerifyValid() in /_/src/MySqlConnector/MySqlTransaction.cs:line 287
   at MySqlConnector.MySqlTransaction.RollbackAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlTransaction.cs:line 65
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at E_Commerce.Services.ProductServices.ProductCatalogService.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductCatalogService.cs:line 232
   at E_Commerce.Services.Product.ProductsServices.CreateProductAsync(CreateProductDto dto, String userId) in D:\project_fashion\E-Commerce-API-main\Services\ProductServices\ProductsServices.cs:line 85
   at E_Commerce.Controllers.ProductController.CreateProduct(CreateProductDto model) in D:\project_fashion\E-Commerce-API-main\Controllers\ProductController.cs:line 95
   at lambda_method272(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-20 19:29:05.299 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 500 null text/plain; charset=utf-8 43108.4085ms
2025-07-20 19:32:55.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:32:55.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 51.1052ms
2025-07-20 19:32:56.008 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:32:56.043 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:32:56.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:32:56.093 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 84.779ms
2025-07-20 19:32:56.143 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 129.2517ms
2025-07-20 19:32:56.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 168.5745ms
2025-07-20 19:32:56.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:32:56.865 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 575.1231ms
2025-07-20 19:32:57.282 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:32:57.327 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:32:57.407 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:32:57.421 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:32:57.487 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:32:57.501 +03:00 [INF] Executing CreateProduct
2025-07-20 19:32:57.504 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:32:57.538 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:32:57.547 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-20 19:32:57.554 +03:00 [INF] Product added successfully (pending save)
2025-07-20 19:32:57.556 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 19:32:57.559 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 19:32:57.561 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 19:32:57.579 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `FinalPrice`, `Gender`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 19:33:02.855 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:33:03.024 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 5529.3958ms
2025-07-20 19:33:03.030 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:33:03.038 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 201 443 application/json; charset=utf-8 5755.647ms
2025-07-20 19:33:05.842 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:33:05.857 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:33:13.276 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 19:38:38.717 +03:00 [INF] DB tables already exist. Exit install
2025-07-20 19:38:40.455 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:38:40.471 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-20 19:38:40.496 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-20 19:38:40.523 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 19:38:40.560 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 19:38:40.944 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:38:41.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-20 19:38:41.054 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-20 19:38:42.145 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-20 19:38:42.150 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-20 19:38:42.259 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-20 19:38:42.293 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-20 19:38:42.296 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-20 19:38:42.299 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-20 19:38:42.301 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-20 19:38:42.318 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 19:38:42.322 +03:00 [INF] Hosting environment: Development
2025-07-20 19:38:42.332 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-20 19:38:42.345 +03:00 [INF] Server mrrobot:13016:18a1adfe successfully announced in 15.0667 ms
2025-07-20 19:38:42.350 +03:00 [INF] Server mrrobot:13016:18a1adfe is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-20 19:38:42.821 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:38:42.935 +03:00 [INF] Server mrrobot:13016:18a1adfe all the dispatchers started
2025-07-20 19:38:43.377 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 558.0244ms
2025-07-20 19:38:43.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:38:43.733 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:38:43.746 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:38:43.771 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 170.3128ms
2025-07-20 19:38:43.783 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 49.7807ms
2025-07-20 19:38:43.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.6861ms
2025-07-20 19:38:44.240 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:38:44.608 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 367.4309ms
2025-07-20 19:41:05.384 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:41:05.548 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:41:05.636 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:41:05.736 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:05.785 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:41:06.403 +03:00 [INF] Executing CreateProduct
2025-07-20 19:41:06.416 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:41:06.482 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:41:06.512 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-07-20 19:41:06.525 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-20 19:41:06.715 +03:00 [INF] Product added successfully (pending save)
2025-07-20 19:41:06.729 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 19:41:06.737 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 19:41:06.779 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 19:41:07.024 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `FinalPrice`, `Gender`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-20 19:41:07.241 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:41:07.329 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 1529.0115ms
2025-07-20 19:41:07.336 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:07.345 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 201 443 application/json; charset=utf-8 1960.3587ms
2025-07-20 19:41:12.768 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:41:12.787 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:41:24.611 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:41:24.743 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 132.2047ms
2025-07-20 19:41:24.806 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:41:24.806 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:41:24.839 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:41:24.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 139.2818ms
2025-07-20 19:41:24.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 171.8831ms
2025-07-20 19:41:25.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 224.0608ms
2025-07-20 19:41:25.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:41:25.993 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:41:26.177 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1004.3226ms
2025-07-20 19:41:26.629 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:41:27.318 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:41:27.326 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:27.339 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:41:27.380 +03:00 [INF] Executing CreateProduct
2025-07-20 19:41:27.395 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:41:27.438 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:41:27.443 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-07-20 19:41:27.462 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:41:27.493 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 136.1332ms
2025-07-20 19:41:27.507 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:27.519 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 404 222 application/json; charset=utf-8 1525.3562ms
2025-07-20 19:41:45.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-20 19:41:45.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 12.242ms
2025-07-20 19:41:46.038 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-20 19:41:46.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-20 19:41:46.040 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-20 19:41:46.052 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.4356ms
2025-07-20 19:41:46.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 18.1619ms
2025-07-20 19:41:46.108 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.7113ms
2025-07-20 19:41:46.190 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-20 19:41:46.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.1818ms
2025-07-20 19:41:49.497 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-20 19:41:49.511 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:41:49.519 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:41:49.533 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:49.546 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:41:49.581 +03:00 [INF] Executing CreateProduct
2025-07-20 19:41:49.591 +03:00 [INF] Creating new product: zRI31
2025-07-20 19:41:49.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-20 19:41:49.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-07-20 19:41:49.624 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:41:49.632 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 80.1723ms
2025-07-20 19:41:49.636 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-20 19:41:49.644 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 404 238 application/json; charset=utf-8 147.4466ms
2025-07-20 19:42:43.533 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/Product/1 - application/json 183
2025-07-20 19:42:43.546 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:42:43.557 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:42:43.578 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-07-20 19:42:44.032 +03:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] UpdateProduct(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:42:44.097 +03:00 [INF] Executing UpdateProduct for ID: 1
2025-07-20 19:42:44.158 +03:00 [ERR] Validation Errors: Description can contain up to 500 characters: letters, numbers, spaces, and .,-()'"
2025-07-20 19:42:44.160 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:42:44.162 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce) in 105.0997ms
2025-07-20 19:42:44.207 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-07-20 19:42:44.209 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/Product/1 - 400 253 application/json; charset=utf-8 676.4464ms
2025-07-20 19:42:53.316 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/Product/1 - application/json 114
2025-07-20 19:42:53.327 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:42:53.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:42:53.354 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-07-20 19:42:53.360 +03:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] UpdateProduct(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:42:53.369 +03:00 [INF] Executing UpdateProduct for ID: 1
2025-07-20 19:42:53.378 +03:00 [INF] Updating product: 1
2025-07-20 19:42:53.384 +03:00 [INF] Execute GetAll for entity Product
2025-07-20 19:42:53.399 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
FROM `Products` AS `p`
WHERE (`p`.`Id` = @__id_0) AND `p`.`DeletedAt` IS NULL
LIMIT 1
2025-07-20 19:42:53.414 +03:00 [INF] Execute Update for entity Product
2025-07-20 19:42:53.422 +03:00 [INF] Product marked for update (pending save)
2025-07-20 19:42:53.425 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-20 19:42:53.427 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-20 19:42:53.430 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-20 19:42:53.456 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 19:42:53.465 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce) in 97.417ms
2025-07-20 19:42:53.469 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.UpdateProduct (E-Commerce)'
2025-07-20 19:42:53.473 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/Product/1 - 200 449 application/json; charset=utf-8 157.243ms
2025-07-20 19:43:02.908 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:43:02.926 +03:00 [WRN] No cache entries found for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-20 19:43:26.797 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=true&includeDeleted=true&page=1&pageSize=10 - null null
2025-07-20 19:43:26.811 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:43:26.817 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:43:26.829 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-20 19:43:26.844 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductListItemDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:43:26.903 +03:00 [INF] Getting cache for key: advsearch__________False_1_10_True_True
2025-07-20 19:43:26.913 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10_True_True
2025-07-20 19:43:26.919 +03:00 [INF] Execute GetAll for entity Product
2025-07-20 19:43:27.164 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, CASE
    WHEN `d`.`Id` IS NOT NULL AND `d`.`IsActive` THEN `t`.`Price` - (`t`.`Price` * (`d`.`DiscountPercent` / 100.0))
    ELSE `t`.`Price`
END, `d`.`Id` IS NOT NULL, `d`.`Id`, `d`.`DiscountPercent`, `d`.`IsActive`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name`, `d`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    WHERE `p`.`IsActive` AND (`p`.`DeletedAt` IS NOT NULL)
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-20 19:43:27.207 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductListItemDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 19:43:27.220 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 364.1982ms
2025-07-20 19:43:27.223 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-20 19:43:27.227 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?isActive=true&includeDeleted=true&page=1&pageSize=10 - 404 254 application/json; charset=utf-8 430.3867ms
2025-07-20 19:43:32.974 +03:00 [INF] Setting cache for key: advsearch__________False_1_10_True_True
2025-07-20 19:43:33.073 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10_True_True with tags: [product_search]
2025-07-20 19:43:34.636 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - null null
2025-07-20 19:43:34.655 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-20 19:43:34.689 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-20 19:43:34.702 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-20 19:43:34.707 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductListItemDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-20 19:43:34.716 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-07-20 19:43:34.721 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-07-20 19:43:34.724 +03:00 [INF] Execute GetAll for entity Product
2025-07-20 19:43:34.783 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, CASE
    WHEN `d`.`Id` IS NOT NULL AND `d`.`IsActive` THEN `t`.`Price` - (`t`.`Price` * (`d`.`DiscountPercent` / 100.0))
    ELSE `t`.`Price`
END, `d`.`Id` IS NOT NULL, `d`.`Id`, `d`.`DiscountPercent`, `d`.`IsActive`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name`, `d`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-20 19:43:34.830 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductListItemDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 19:43:34.840 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 124.879ms
2025-07-20 19:43:34.845 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-20 19:43:34.847 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - 200 1193 application/json; charset=utf-8 211.3533ms
2025-07-20 19:43:42.372 +03:00 [INF] 1 servers were removed due to timeout
2025-07-20 19:43:42.922 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-07-20 19:43:42.936 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
