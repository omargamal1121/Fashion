2025-07-06 17:08:19.763 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:08:19.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:08:19.855 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:08:19.874 +03:00 [INF] Applying migration '20250706140749_updatemodels'.
2025-07-06 17:08:20.197 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2025-07-06 17:08:20.239 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2025-07-06 17:08:20.698 +03:00 [INF] Executed DbCommand (458ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` DROP FOREIGN KEY `FK_Images_SubCategory_SubCategoryId`;
2025-07-06 17:08:20.768 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Products` DROP FOREIGN KEY `FK_Products_SubCategory_SubCategoryId`;
2025-07-06 17:08:20.805 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `SubCategory` DROP FOREIGN KEY `FK_SubCategory_Categories_CategoryId`;
2025-07-06 17:08:20.822 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `SubCategory` DROP FOREIGN KEY `FK_SubCategory_Images_ImageId`;
2025-07-06 17:08:21.340 +03:00 [INF] Executed DbCommand (518ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'SubCategory');
ALTER TABLE `SubCategory` DROP PRIMARY KEY;
2025-07-06 17:08:21.373 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `SubCategory` RENAME `SubCategories`;
2025-07-06 17:08:21.381 +03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `SubCategories` RENAME INDEX `IX_SubCategory_ImageId` TO `IX_SubCategories_ImageId`;
2025-07-06 17:09:08.156 +03:00 [INF] Executed DbCommand (547ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE `Fashion_Site`;
2025-07-06 17:09:48.621 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `Fashion_Site`;
2025-07-06 17:09:48.967 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.013 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:09:49.026 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:09:49.042 +03:00 [INF] Applying migration '20250706140930_intial'.
2025-07-06 17:09:49.300 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-07-06 17:09:49.336 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoles` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoles` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.358 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Collections` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NULL,
    `DisplayOrder` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Collections` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.375 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PaymentMethods` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_PaymentMethods` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.406 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `warehouses` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Address` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `Phone` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_warehouses` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.463 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.513 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PaymentProviders` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `ApiEndpoint` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `PublicKey` varchar(200) CHARACTER SET utf8mb4 NULL,
    `PrivateKey` varchar(200) CHARACTER SET utf8mb4 NULL,
    `PaymentMethodId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    CONSTRAINT `PK_PaymentProviders` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PaymentProviders_PaymentMethods_PaymentMethodId` FOREIGN KEY (`PaymentMethodId`) REFERENCES `PaymentMethods` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.528 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `adminOperationsLogs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `AdminId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `OperationType` int NOT NULL,
    `ItemId` int NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Timestamp` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_adminOperationsLogs` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.547 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserClaims` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.566 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.612 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:49.631 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUsers` (
    `Id` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Discriminator` varchar(13) CHARACTER SET utf8mb4 NOT NULL,
    `Name` longtext CHARACTER SET utf8mb4 NULL,
    `Age` int NULL,
    `ProfilePicture` longtext CHARACTER SET utf8mb4 NULL,
    `CreateAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    `LastVisit` datetime(6) NULL,
    `ImageId` int NULL,
    `UserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedUserName` varchar(256) CHARACTER SET utf8mb4 NULL,
    `Email` varchar(256) CHARACTER SET utf8mb4 NULL,
    `NormalizedEmail` varchar(256) CHARACTER SET utf8mb4 NULL,
    `EmailConfirmed` tinyint(1) NOT NULL,
    `PasswordHash` longtext CHARACTER SET utf8mb4 NULL,
    `SecurityStamp` longtext CHARACTER SET utf8mb4 NULL,
    `ConcurrencyStamp` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `PhoneNumberConfirmed` tinyint(1) NOT NULL,
    `TwoFactorEnabled` tinyint(1) NOT NULL,
    `LockoutEnd` datetime(6) NULL,
    `LockoutEnabled` tinyint(1) NOT NULL,
    `AccessFailedCount` int NOT NULL,
    CONSTRAINT `PK_AspNetUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:51.814 +03:00 [INF] Executed DbCommand (961ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:52.630 +03:00 [INF] Executed DbCommand (815ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Cart` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Userid` longtext CHARACTER SET utf8mb4 NOT NULL,
    `customerId` varchar(255) CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Cart` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Cart_AspNetUsers_customerId` FOREIGN KEY (`customerId`) REFERENCES `AspNetUsers` (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:52.999 +03:00 [INF] Executed DbCommand (369ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `CustomerAddress` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Country` varchar(15) CHARACTER SET utf8mb4 NOT NULL,
    `City` varchar(15) CHARACTER SET utf8mb4 NOT NULL,
    `Address` varchar(25) CHARACTER SET utf8mb4 NOT NULL,
    `PostalCode` varchar(8) CHARACTER SET utf8mb4 NOT NULL,
    `AddressType` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_CustomerAddress` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_CustomerAddress_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.041 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Orders` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Total` decimal(18,2) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Orders` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Orders_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.087 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `userOperationsLogs` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `OperationType` int NOT NULL,
    `ItemId` int NOT NULL,
    `Description` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Timestamp` datetime(6) NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_userOperationsLogs` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_userOperationsLogs_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.139 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Payments` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `PaymentMethodId` int NOT NULL,
    `PaymentProviderId` int NOT NULL,
    `Amount` decimal(18,2) NOT NULL,
    `PaymentDate` datetime(6) NOT NULL,
    `OrderId` int NOT NULL,
    `Status` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Payments` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payments_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payments_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Payments_PaymentMethods_PaymentMethodId` FOREIGN KEY (`PaymentMethodId`) REFERENCES `PaymentMethods` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Payments_PaymentProviders_PaymentProviderId` FOREIGN KEY (`PaymentProviderId`) REFERENCES `PaymentProviders` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.476 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ReturnRequests` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `OrderId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `RequestDate` datetime(6) NOT NULL,
    `Status` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Reason` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AdminComment` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_ReturnRequests` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ReturnRequests_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ReturnRequests_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.487 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Categories` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DisplayOrder` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Categories` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.525 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Discount` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `DiscountPercent` decimal(18,2) NOT NULL,
    `StartDate` datetime(6) NOT NULL,
    `EndDate` datetime(6) NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CategoryId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Discount` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Discount_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.558 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Images` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Url` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AltText` longtext CHARACTER SET utf8mb4 NULL,
    `Title` longtext CHARACTER SET utf8mb4 NULL,
    `Width` int NULL,
    `Height` int NULL,
    `FileSize` bigint NULL,
    `UploadDate` datetime(6) NOT NULL,
    `Folder` longtext CHARACTER SET utf8mb4 NULL,
    `IsMain` tinyint(1) NOT NULL,
    `FileType` longtext CHARACTER SET utf8mb4 NULL,
    `CategoryId` int NULL,
    `SubCategoryId` int NULL,
    `ProductId` int NULL,
    `CollectionId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Images` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Images_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Images_Collections_CollectionId` FOREIGN KEY (`CollectionId`) REFERENCES `Collections` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:53.589 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `SubCategories` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `CategoryId` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_SubCategories` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_SubCategories_Categories_CategoryId` FOREIGN KEY (`CategoryId`) REFERENCES `Categories` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_SubCategories_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`)
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:56.270 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Products` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `Description` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `SubCategoryId` int NOT NULL,
    `Quantity` int NOT NULL,
    `DiscountId` int NULL,
    `Gender` int NOT NULL,
    `ImageId` int NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_Products` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Products_Discount_DiscountId` FOREIGN KEY (`DiscountId`) REFERENCES `Discount` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Products_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`),
    CONSTRAINT `FK_Products_SubCategories_SubCategoryId` FOREIGN KEY (`SubCategoryId`) REFERENCES `SubCategories` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:56.303 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Items` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `OrderId` int NOT NULL,
    `ProductId` int NOT NULL,
    `Quantity` int NOT NULL,
    `AddedAt` datetime(6) NOT NULL,
    `CartId` int NULL,
    CONSTRAINT `PK_Items` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Items_Cart_CartId` FOREIGN KEY (`CartId`) REFERENCES `Cart` (`Id`),
    CONSTRAINT `FK_Items_Orders_OrderId` FOREIGN KEY (`OrderId`) REFERENCES `Orders` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Items_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:56.333 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductCollections` (
    `ProductId` int NOT NULL,
    `CollectionId` int NOT NULL,
    CONSTRAINT `PK_ProductCollections` PRIMARY KEY (`ProductId`, `CollectionId`),
    CONSTRAINT `FK_ProductCollections_Collections_CollectionId` FOREIGN KEY (`CollectionId`) REFERENCES `Collections` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ProductCollections_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:56.364 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductInventory` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `WarehouseId` int NOT NULL,
    `Quantity` int NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_ProductInventory` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ProductInventory_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProductInventory_warehouses_WarehouseId` FOREIGN KEY (`WarehouseId`) REFERENCES `warehouses` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:56.393 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProductVariants` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Color` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Size` longtext CHARACTER SET utf8mb4 NULL,
    `Waist` int NULL,
    `Length` int NULL,
    `FitType` int NULL,
    `Quantity` int NOT NULL,
    `Price` decimal(18,2) NOT NULL,
    `ProductId` int NOT NULL,
    `CreatedAt` datetime(6) NULL,
    `ModifiedAt` datetime(6) NULL,
    `DeletedAt` datetime(6) NULL,
    CONSTRAINT `PK_ProductVariants` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ProductVariants_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:59.092 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ReturnRequestProducts` (
    `ReturnRequestId` int NOT NULL,
    `ProductId` int NOT NULL,
    `Quantity` int NOT NULL,
    CONSTRAINT `PK_ReturnRequestProducts` PRIMARY KEY (`ReturnRequestId`, `ProductId`),
    CONSTRAINT `FK_ReturnRequestProducts_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_ReturnRequestProducts_ReturnRequests_ReturnRequestId` FOREIGN KEY (`ReturnRequestId`) REFERENCES `ReturnRequests` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:59.128 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Reviews` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Rating` int NOT NULL,
    `Comment` varchar(1000) CHARACTER SET utf8mb4 NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Reviews` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Reviews_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Reviews_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:59.165 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `WishlistItems` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ProductId` int NOT NULL,
    `CustomerId` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_WishlistItems` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_WishlistItems_AspNetUsers_CustomerId` FOREIGN KEY (`CustomerId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_WishlistItems_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-07-06 17:09:59.184 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_adminOperationsLogs_AdminId` ON `adminOperationsLogs` (`AdminId`);
2025-07-06 17:09:59.206 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetRoleClaims_RoleId` ON `AspNetRoleClaims` (`RoleId`);
2025-07-06 17:09:59.228 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `RoleNameIndex` ON `AspNetRoles` (`NormalizedName`);
2025-07-06 17:09:59.248 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserClaims_UserId` ON `AspNetUserClaims` (`UserId`);
2025-07-06 17:09:59.269 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserLogins_UserId` ON `AspNetUserLogins` (`UserId`);
2025-07-06 17:09:59.291 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUserRoles_RoleId` ON `AspNetUserRoles` (`RoleId`);
2025-07-06 17:09:59.311 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `EmailIndex` ON `AspNetUsers` (`NormalizedEmail`);
2025-07-06 17:09:59.330 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_AspNetUsers_ImageId` ON `AspNetUsers` (`ImageId`);
2025-07-06 17:09:59.379 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `UserNameIndex` ON `AspNetUsers` (`NormalizedUserName`);
2025-07-06 17:09:59.400 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Cart_customerId` ON `Cart` (`customerId`);
2025-07-06 17:09:59.418 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Categories_ImageId` ON `Categories` (`ImageId`);
2025-07-06 17:10:01.875 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Categories_Name` ON `Categories` (`Name`);
2025-07-06 17:10:02.016 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_CustomerAddress_CustomerId` ON `CustomerAddress` (`CustomerId`);
2025-07-06 17:10:02.123 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Discount_CategoryId` ON `Discount` (`CategoryId`);
2025-07-06 17:10:02.169 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Discount_Name` ON `Discount` (`Name`);
2025-07-06 17:10:02.250 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_CategoryId` ON `Images` (`CategoryId`);
2025-07-06 17:10:02.289 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_CollectionId` ON `Images` (`CollectionId`);
2025-07-06 17:10:02.316 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_ProductId` ON `Images` (`ProductId`);
2025-07-06 17:10:02.346 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Images_SubCategoryId` ON `Images` (`SubCategoryId`);
2025-07-06 17:10:02.396 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Items_CartId` ON `Items` (`CartId`);
2025-07-06 17:10:02.434 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Items_OrderId` ON `Items` (`OrderId`);
2025-07-06 17:10:02.483 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Items_ProductId` ON `Items` (`ProductId`);
2025-07-06 17:10:02.541 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Orders_CustomerId` ON `Orders` (`CustomerId`);
2025-07-06 17:10:02.603 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PaymentProviders_PaymentMethodId` ON `PaymentProviders` (`PaymentMethodId`);
2025-07-06 17:10:02.620 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_CustomerId` ON `Payments` (`CustomerId`);
2025-07-06 17:10:02.700 +03:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Payments_OrderId` ON `Payments` (`OrderId`);
2025-07-06 17:10:02.741 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_PaymentMethodId` ON `Payments` (`PaymentMethodId`);
2025-07-06 17:10:02.761 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payments_PaymentProviderId` ON `Payments` (`PaymentProviderId`);
2025-07-06 17:10:02.806 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductCollections_CollectionId` ON `ProductCollections` (`CollectionId`);
2025-07-06 17:10:02.826 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductInventory_ProductId` ON `ProductInventory` (`ProductId`);
2025-07-06 17:10:02.867 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductInventory_WarehouseId` ON `ProductInventory` (`WarehouseId`);
2025-07-06 17:10:02.942 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_DiscountId` ON `Products` (`DiscountId`);
2025-07-06 17:10:02.957 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_ImageId` ON `Products` (`ImageId`);
2025-07-06 17:10:03.035 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Products_Name` ON `Products` (`Name`);
2025-07-06 17:10:03.071 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Products_SubCategoryId` ON `Products` (`SubCategoryId`);
2025-07-06 17:10:03.991 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProductVariants_ProductId` ON `ProductVariants` (`ProductId`);
2025-07-06 17:10:04.100 +03:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequestProducts_ProductId` ON `ReturnRequestProducts` (`ProductId`);
2025-07-06 17:10:04.220 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequests_CustomerId` ON `ReturnRequests` (`CustomerId`);
2025-07-06 17:10:04.344 +03:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ReturnRequests_OrderId` ON `ReturnRequests` (`OrderId`);
2025-07-06 17:10:04.376 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Reviews_CustomerId` ON `Reviews` (`CustomerId`);
2025-07-06 17:10:04.404 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Reviews_ProductId` ON `Reviews` (`ProductId`);
2025-07-06 17:10:04.467 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_SubCategories_CategoryId` ON `SubCategories` (`CategoryId`);
2025-07-06 17:10:04.489 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_SubCategories_ImageId` ON `SubCategories` (`ImageId`);
2025-07-06 17:10:04.504 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_SubCategories_Name` ON `SubCategories` (`Name`);
2025-07-06 17:10:04.528 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_userOperationsLogs_UserId` ON `userOperationsLogs` (`UserId`);
2025-07-06 17:10:04.553 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_warehouses_Name` ON `warehouses` (`Name`);
2025-07-06 17:10:04.575 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_WishlistItems_CustomerId` ON `WishlistItems` (`CustomerId`);
2025-07-06 17:10:04.593 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_WishlistItems_ProductId` ON `WishlistItems` (`ProductId`);
2025-07-06 17:10:04.684 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `adminOperationsLogs` ADD CONSTRAINT `FK_adminOperationsLogs_AspNetUsers_AdminId` FOREIGN KEY (`AdminId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE RESTRICT;
2025-07-06 17:10:04.742 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserClaims` ADD CONSTRAINT `FK_AspNetUserClaims_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-06 17:10:04.807 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserLogins` ADD CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-06 17:10:04.883 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUserRoles` ADD CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE;
2025-07-06 17:10:04.960 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `AspNetUsers` ADD CONSTRAINT `FK_AspNetUsers_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`) ON DELETE SET NULL;
2025-07-06 17:10:05.041 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Categories` ADD CONSTRAINT `FK_Categories_Images_ImageId` FOREIGN KEY (`ImageId`) REFERENCES `Images` (`Id`);
2025-07-06 17:10:05.186 +03:00 [INF] Executed DbCommand (144ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` ADD CONSTRAINT `FK_Images_Products_ProductId` FOREIGN KEY (`ProductId`) REFERENCES `Products` (`Id`) ON DELETE CASCADE;
2025-07-06 17:10:06.081 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `Images` ADD CONSTRAINT `FK_Images_SubCategories_SubCategoryId` FOREIGN KEY (`SubCategoryId`) REFERENCES `SubCategories` (`Id`) ON DELETE CASCADE;
2025-07-06 17:10:06.085 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250706140930_intial', '8.0.13');
2025-07-06 17:10:37.327 +03:00 [INF] Start installing Hangfire SQL objects...
2025-07-06 17:10:38.327 +03:00 [INF] Hangfire SQL objects installed.
2025-07-06 17:10:40.203 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:10:40.226 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:10:40.257 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:10:40.276 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 17:10:40.314 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 17:10:40.711 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:10:40.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:10:40.915 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetRoles` (`Id`, `ConcurrencyStamp`, `Name`, `NormalizedName`)
VALUES (@p0, @p1, @p2, @p3);
2025-07-06 17:10:40.933 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:10:40.973 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:10:40.982 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetRoles` (`Id`, `ConcurrencyStamp`, `Name`, `NormalizedName`)
VALUES (@p0, @p1, @p2, @p3);
2025-07-06 17:10:41.029 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:10:41.151 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-07-06 17:10:41.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:10:41.338 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 13), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetUsers` (`Id`, `AccessFailedCount`, `Age`, `ConcurrencyStamp`, `CreateAt`, `DeletedAt`, `Discriminator`, `Email`, `EmailConfirmed`, `ImageId`, `LastVisit`, `LockoutEnabled`, `LockoutEnd`, `Name`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `PhoneNumber`, `PhoneNumberConfirmed`, `ProfilePicture`, `SecurityStamp`, `TwoFactorEnabled`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-07-06 17:10:41.354 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-07-06 17:10:41.390 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255), @__p_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`UserId`, `a`.`RoleId`
FROM `AspNetUserRoles` AS `a`
WHERE (`a`.`UserId` = @__p_0) AND (`a`.`RoleId` = @__p_1)
LIMIT 1
2025-07-06 17:10:41.402 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-07-06 17:10:41.421 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedUserName` = @__normalizedUserName_0)
LIMIT 1
2025-07-06 17:10:41.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:10:41.504 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 255), @p23='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p24='?' (Size = 4000), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUserRoles` (`RoleId`, `UserId`)
VALUES (@p0, @p1);
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p2, `Age` = @p3, `ConcurrencyStamp` = @p4, `CreateAt` = @p5, `DeletedAt` = @p6, `Email` = @p7, `EmailConfirmed` = @p8, `ImageId` = @p9, `LastVisit` = @p10, `LockoutEnabled` = @p11, `LockoutEnd` = @p12, `Name` = @p13, `NormalizedEmail` = @p14, `NormalizedUserName` = @p15, `PasswordHash` = @p16, `PhoneNumber` = @p17, `PhoneNumberConfirmed` = @p18, `ProfilePicture` = @p19, `SecurityStamp` = @p20, `TwoFactorEnabled` = @p21, `UserName` = @p22
WHERE `Id` = @p23 AND `ConcurrencyStamp` = @p24;
SELECT ROW_COUNT();
2025-07-06 17:10:42.292 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 17:10:42.295 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 17:10:42.427 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 17:10:43.386 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 17:10:43.518 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 17:10:43.544 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 17:10:43.556 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 17:10:43.559 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 17:10:43.603 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 17:10:43.621 +03:00 [INF] Hosting environment: Development
2025-07-06 17:10:43.623 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 17:10:43.635 +03:00 [INF] Server mrrobot:20580:fb1fbf2d successfully announced in 16.6312 ms
2025-07-06 17:10:43.641 +03:00 [INF] Server mrrobot:20580:fb1fbf2d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 17:10:43.795 +03:00 [INF] Server mrrobot:20580:fb1fbf2d all the dispatchers started
2025-07-06 17:10:43.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 419.7324ms
2025-07-06 17:10:43.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 17:10:43.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 17:10:43.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 17:10:43.947 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 50.3251ms
2025-07-06 17:10:43.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 80.5028ms
2025-07-06 17:10:44.088 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.5094ms
2025-07-06 17:10:44.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 17:10:44.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 265.2334ms
2025-07-06 17:10:56.537 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 17:10:56.756 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:10:57.017 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 17:10:57.240 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 17:10:57.894 +03:00 [INF] In LoginAsync Method 
2025-07-06 17:10:57.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:10:58.052 +03:00 [INF] 🔐 Generating Access Token for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 17:10:58.124 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 17:10:58.173 +03:00 [INF] ✅ Access Token generated successfully for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 17:10:58.176 +03:00 [INF] 🔑 Generating Refresh Token for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 17:10:58.187 +03:00 [INF] RefreshToken Generated
2025-07-06 17:10:58.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:10:58.291 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 1014.825ms
2025-07-06 17:10:58.393 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 17:10:58.421 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 1883.5256ms
2025-07-06 17:11:27.255 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/categories - multipart/form-data; boundary=--------------------------962110622048839810832105 760018
2025-07-06 17:11:27.319 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:11:27.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:11:27.435 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:11:27.448 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:11:27.518 +03:00 [INF] Executing CreateAsync
2025-07-06 17:11:27.527 +03:00 [INF] Execute CreateAsync
2025-07-06 17:11:27.544 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Name` = @__name_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 17:11:27.561 +03:00 [INF] Executing CreateAsync for entity Category
2025-07-06 17:11:27.626 +03:00 [INF] Category added successfully (pending save)
2025-07-06 17:11:27.660 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Categories` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Categories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:11:27.691 +03:00 [INF] 📥 Saving 2 images to CategoryPhotos
2025-07-06 17:11:27.695 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-07-06 17:11:27.717 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:11:27.784 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:11:27.808 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:11:27.823 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:11:27.825 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:11:27.856 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:11:27.857 +03:00 [INF] ✅ Image saved: /CategoryPhotos/fb202223-e00d-418e-953c-03cca8b52e74.jpg
2025-07-06 17:11:27.861 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-07-06 17:11:27.874 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:11:27.890 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:11:27.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:11:27.922 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:11:27.924 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:11:27.925 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:11:27.926 +03:00 [INF] ✅ Image saved: /CategoryPhotos/4d8fb683-1801-42d4-a64b-8021cb2fbf56.jpg
2025-07-06 17:11:27.935 +03:00 [INF] 📥 Saving main image to CategoryPhotos
2025-07-06 17:11:27.943 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:11:27.945 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:11:27.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:11:27.958 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:11:27.959 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:11:27.960 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:11:27.962 +03:00 [INF] ✅ Main image saved: /CategoryPhotos/0067f275-7096-40ee-9a3b-4c0330dde1f6.jpg
2025-07-06 17:11:27.969 +03:00 [INF] Execute Update for entity Category
2025-07-06 17:11:28.001 +03:00 [INF] Category marked for update (pending save)
2025-07-06 17:11:28.003 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:11:28.004 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:11:28.005 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:11:28.009 +03:00 [INF] Removing cache by tag: category
2025-07-06 17:11:28.033 +03:00 [INF] Removed 1 cache entries for tag: category
2025-07-06 17:11:28.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p6='?' (Size = 255), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `CategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p4
WHERE `Id` = @p5;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:11:28.051 +03:00 [INF] Retrieving category with ID 1 after creation
2025-07-06 17:11:28.055 +03:00 [INF] Executing GetCategoryById for id: 1
2025-07-06 17:11:28.135 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 17:11:28.180 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-06 17:11:28.193 +03:00 [INF] Category with id: 1 exists
2025-07-06 17:11:28.194 +03:00 [INF] Successfully retrieved category: Id=1, Name=omargaam
2025-07-06 17:11:28.196 +03:00 [INF] Category has 3 images
2025-07-06 17:11:28.202 +03:00 [INF] Mapping category with 3 images
2025-07-06 17:11:28.214 +03:00 [INF] Successfully mapped category to DTO
2025-07-06 17:11:28.223 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:11:28.255 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce) in 802.795ms
2025-07-06 17:11:28.442 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:11:28.470 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/categories - 201 760 application/json; charset=utf-8 1215.8113ms
2025-07-06 17:11:56.948 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------790948262114070332347998 457064
2025-07-06 17:11:56.971 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 2:11:56 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 17:11:56.980 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 2:11:56 PM'.
2025-07-06 17:11:56.982 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:11:56.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:11:57.013 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 401 null application/json 64.6722ms
2025-07-06 17:11:57.097 +03:00 [INF] Connection id "0HNDSIRI9OCSH", Request id "0HNDSIRI9OCSH:00000003": the application completed without reading the entire request body.
2025-07-06 17:12:07.928 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------435234756177636237162704 457064
2025-07-06 17:12:07.935 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:12:07.940 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:12:07.948 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 17:12:07.960 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:12:07.986 +03:00 [INF] Executing CreateAsync
2025-07-06 17:12:07.996 +03:00 [INF] Execute CreateAsync
2025-07-06 17:12:08.003 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 5
2025-07-06 17:12:08.018 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 17:12:08.022 +03:00 [WRN] Category with ID 5 not found or deleted
2025-07-06 17:12:08.026 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:12:08.032 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 69.6839ms
2025-07-06 17:12:08.080 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 17:12:08.138 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 404 377 application/json; charset=utf-8 210.1637ms
2025-07-06 17:12:28.488 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories/5 - null null
2025-07-06 17:12:28.495 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:12:28.501 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:12:28.510 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 17:12:28.517 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:12:28.525 +03:00 [INF] Executing GetByIdAsync for id: 5, isActive: , includeDeleted: False
2025-07-06 17:12:28.533 +03:00 [INF] Execute:GetCategoryByIdAsync in services for id: 5, isActive: , includeDeleted: False
2025-07-06 17:12:28.537 +03:00 [INF] Getting cache for key: categoryid:5_active:_deleted:False
2025-07-06 17:12:28.542 +03:00 [WRN] Cache miss for key: categoryid:5_active:_deleted:False
2025-07-06 17:12:28.544 +03:00 [INF] Executing GetCategoryById for id: 5
2025-07-06 17:12:28.570 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 17:12:28.579 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-06 17:12:28.583 +03:00 [WRN] Category with id: 5 doesn't exist
2025-07-06 17:12:28.584 +03:00 [WRN] Category with id: 5 not found
2025-07-06 17:12:28.595 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:12:28.598 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 76.4767ms
2025-07-06 17:12:28.603 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 17:12:28.606 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories/5 - 404 1148 application/json; charset=utf-8 117.0345ms
2025-07-06 17:12:41.839 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 17:12:41.845 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:12:41.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:12:41.856 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:12:41.861 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:12:41.880 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:12:41.890 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:12:41.893 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:12:41.989 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__search_0_contains='?' (Size = 20), @__isActive_Value_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Name` LIKE @__search_0_contains) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_3 OFFSET @__p_2
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:12:41.996 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:12:42.004 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 138.4051ms
2025-07-06 17:12:42.007 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:12:42.009 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - 404 357 application/json; charset=utf-8 169.4756ms
2025-07-06 17:13:08.118 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/categories - multipart/form-data; boundary=--------------------------410125227676993273717277 760018
2025-07-06 17:13:08.142 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:13:08.155 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:13:08.162 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:13:08.165 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:13:08.227 +03:00 [INF] Executing CreateAsync
2025-07-06 17:13:08.228 +03:00 [INF] Execute CreateAsync
2025-07-06 17:13:08.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Name` = @__name_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 17:13:08.256 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:13:08.257 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce) in 84.0455ms
2025-07-06 17:13:08.259 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:13:08.305 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/categories - 409 399 application/json; charset=utf-8 186.9423ms
2025-07-06 17:13:15.381 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/categories - multipart/form-data; boundary=--------------------------241227019234836430744368 760020
2025-07-06 17:13:15.387 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:13:15.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:13:15.398 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:13:15.400 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateCategotyDto) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:13:15.414 +03:00 [INF] Executing CreateAsync
2025-07-06 17:13:15.416 +03:00 [INF] Execute CreateAsync
2025-07-06 17:13:15.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE (`c`.`Name` = @__name_0) AND `c`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 17:13:15.434 +03:00 [INF] Executing CreateAsync for entity Category
2025-07-06 17:13:15.437 +03:00 [INF] Category added successfully (pending save)
2025-07-06 17:13:15.448 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Categories` (`CreatedAt`, `DeletedAt`, `Description`, `DisplayOrder`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Categories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:13:15.452 +03:00 [INF] 📥 Saving 2 images to CategoryPhotos
2025-07-06 17:13:15.453 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-07-06 17:13:15.458 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:13:15.461 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:13:15.466 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:13:15.471 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:13:15.472 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:13:15.474 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:13:15.476 +03:00 [INF] ✅ Image saved: /CategoryPhotos/15c7899a-1447-493b-8415-4b81c645e5ae.jpg
2025-07-06 17:13:15.480 +03:00 [INF] 📥 Saving image to CategoryPhotos
2025-07-06 17:13:15.484 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:13:15.487 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:13:15.491 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:13:15.499 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:13:15.500 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:13:15.501 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:13:15.503 +03:00 [INF] ✅ Image saved: /CategoryPhotos/733a94f7-b4b0-47b5-83ef-f4e8a8469425.jpg
2025-07-06 17:13:15.505 +03:00 [INF] 📥 Saving main image to CategoryPhotos
2025-07-06 17:13:15.513 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:13:15.518 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:13:15.522 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:13:15.527 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:13:15.528 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:13:15.530 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:13:15.532 +03:00 [INF] ✅ Main image saved: /CategoryPhotos/f7e1ce74-ef03-451f-af2e-ac6752821d31.jpg
2025-07-06 17:13:15.534 +03:00 [INF] Execute Update for entity Category
2025-07-06 17:13:15.537 +03:00 [INF] Category marked for update (pending save)
2025-07-06 17:13:15.538 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:13:15.539 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:13:15.541 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:13:15.542 +03:00 [INF] Removing cache by tag: category
2025-07-06 17:13:15.547 +03:00 [WRN] No cache entries found for tag: category
2025-07-06 17:13:15.552 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p6='?' (Size = 255), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `CategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

UPDATE `Images` SET `CategoryId` = @p4
WHERE `Id` = @p5;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:13:15.560 +03:00 [INF] Retrieving category with ID 2 after creation
2025-07-06 17:13:15.568 +03:00 [INF] Executing GetCategoryById for id: 2
2025-07-06 17:13:15.593 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-06 17:13:15.601 +03:00 [INF] Category with id: 2 exists
2025-07-06 17:13:15.602 +03:00 [INF] Successfully retrieved category: Id=2, Name=omargaamwe
2025-07-06 17:13:15.604 +03:00 [INF] Category has 3 images
2025-07-06 17:13:15.605 +03:00 [INF] Mapping category with 3 images
2025-07-06 17:13:15.606 +03:00 [INF] Successfully mapped category to DTO
2025-07-06 17:13:15.608 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:13:15.611 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce) in 208.1558ms
2025-07-06 17:13:15.615 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.CreateAsync (E-Commerce)'
2025-07-06 17:13:15.618 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/categories - 201 762 application/json; charset=utf-8 236.7074ms
2025-07-06 17:13:35.883 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 17:13:35.888 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:13:35.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:13:35.898 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:35.901 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:13:35.910 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:13:35.911 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:13:35.912 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:13:35.935 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__search_0_contains='?' (Size = 20), @__isActive_Value_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Name` LIKE @__search_0_contains) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_3 OFFSET @__p_2
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:13:35.941 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:13:35.944 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 36.1168ms
2025-07-06 17:13:35.946 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:35.948 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=2 - 404 357 application/json; charset=utf-8 65.0633ms
2025-07-06 17:13:53.044 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=3 - null null
2025-07-06 17:13:53.096 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:13:53.119 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:13:53.128 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:53.132 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:13:53.157 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:13:53.160 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:13:53.177 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:13:53.236 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__search_0_contains='?' (Size = 20), @__isActive_Value_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Name` LIKE @__search_0_contains) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_3 OFFSET @__p_2
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:13:53.415 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:13:53.426 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 272.3067ms
2025-07-06 17:13:53.428 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:53.429 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=3 - 404 357 application/json; charset=utf-8 385.1054ms
2025-07-06 17:13:57.217 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=1 - null null
2025-07-06 17:13:57.223 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:13:57.228 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:13:57.233 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:57.238 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:13:57.242 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:13:57.244 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:13:57.245 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:13:57.275 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__search_0_contains='?' (Size = 20), @__isActive_Value_1='?' (DbType = Boolean), @__p_3='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE ((`c`.`Name` LIKE @__search_0_contains) AND (`c`.`IsActive` = @__isActive_Value_1)) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_3 OFFSET @__p_2
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:13:57.279 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:13:57.283 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 41.4711ms
2025-07-06 17:13:57.293 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:13:57.296 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?search=pan&isActive=false&includeDeleted=false&page=1&pageSize=1 - 404 357 application/json; charset=utf-8 79.0843ms
2025-07-06 17:14:25.710 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories/1 - null null
2025-07-06 17:14:25.715 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:14:25.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:14:25.725 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 17:14:25.726 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]] GetByIdAsync(Int32, System.Nullable`1[System.Boolean], Boolean) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:14:25.730 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: , includeDeleted: False
2025-07-06 17:14:25.732 +03:00 [INF] Execute:GetCategoryByIdAsync in services for id: 1, isActive: , includeDeleted: False
2025-07-06 17:14:25.733 +03:00 [INF] Getting cache for key: categoryid:1_active:_deleted:False
2025-07-06 17:14:25.735 +03:00 [WRN] Cache miss for key: categoryid:1_active:_deleted:False
2025-07-06 17:14:25.737 +03:00 [INF] Executing GetCategoryById for id: 1
2025-07-06 17:14:25.773 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`, `t0`.`Id`, `t0`.`CategoryId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`Description`, `t0`.`ImageId`, `t0`.`IsActive`, `t0`.`ModifiedAt`, `t0`.`Name`, `t0`.`Id0`, `t0`.`AltText`, `t0`.`CategoryId0`, `t0`.`CollectionId`, `t0`.`CreatedAt0`, `t0`.`DeletedAt0`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt0`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
    FROM `Categories` AS `c`
    WHERE (`c`.`Id` = @__id_0) AND `c`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `Images` AS `i` ON `t`.`Id` = `i`.`CategoryId`
LEFT JOIN (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`, `i0`.`Id` AS `Id0`, `i0`.`AltText`, `i0`.`CategoryId` AS `CategoryId0`, `i0`.`CollectionId`, `i0`.`CreatedAt` AS `CreatedAt0`, `i0`.`DeletedAt` AS `DeletedAt0`, `i0`.`FileSize`, `i0`.`FileType`, `i0`.`Folder`, `i0`.`Height`, `i0`.`IsMain`, `i0`.`ModifiedAt` AS `ModifiedAt0`, `i0`.`ProductId`, `i0`.`SubCategoryId`, `i0`.`Title`, `i0`.`UploadDate`, `i0`.`Url`, `i0`.`Width`
    FROM `SubCategories` AS `s`
    LEFT JOIN `Images` AS `i0` ON `s`.`Id` = `i0`.`SubCategoryId`
    WHERE `s`.`DeletedAt` IS NULL AND `s`.`IsActive`
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
ORDER BY `t`.`Id`, `i`.`Id`, `t0`.`Id`
2025-07-06 17:14:25.785 +03:00 [INF] Category with id: 1 exists
2025-07-06 17:14:25.794 +03:00 [INF] Setting cache for key: categoryid:1_active:_deleted:False
2025-07-06 17:14:25.847 +03:00 [INF] Cache set successfully for key: categoryid:1_active:_deleted:False with tags: [category]
2025-07-06 17:14:25.858 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:14:25.861 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce) in 131.4404ms
2025-07-06 17:14:25.863 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetByIdAsync (E-Commerce)'
2025-07-06 17:14:25.864 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories/1 - 200 1536 application/json; charset=utf-8 154.3394ms
2025-07-06 17:15:52.113 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?isActive=false&includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 17:15:52.118 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 4:43:53 PM', Current time (UTC): '7/6/2025 2:15:52 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 17:15:52.124 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/5/2025 4:43:53 PM', Current time (UTC): '7/6/2025 2:15:52 PM'.
2025-07-06 17:15:52.125 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:15:52.130 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:15:52.134 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?isActive=false&includeDeleted=false&page=1&pageSize=2 - 401 null application/json 20.3254ms
2025-07-06 17:16:09.089 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?isActive=false&includeDeleted=false&page=1&pageSize=2 - null null
2025-07-06 17:16:09.097 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:16:09.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:16:09.105 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:16:09.108 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:16:09.116 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:16:09.117 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:16:09.118 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:16:09.158 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE (`c`.`IsActive` = @__isActive_Value_0) AND `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_2 OFFSET @__p_1
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:16:09.163 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:16:09.166 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 51.2817ms
2025-07-06 17:16:09.168 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:16:09.180 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?isActive=false&includeDeleted=false&page=1&pageSize=2 - 404 357 application/json; charset=utf-8 90.8662ms
2025-07-06 17:16:15.726 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/categories?page=1&pageSize=2 - null null
2025-07-06 17:16:15.731 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:16:15.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:16:15.739 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:16:15.742 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.CategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.CategoriesController (E-Commerce).
2025-07-06 17:16:15.746 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 17:16:15.747 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 17:16:15.748 +03:00 [INF] Execute GetAll for entity Category
2025-07-06 17:16:15.824 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`DisplayOrder`, `t`.`IsActive`, `t0`.`Id`, `t2`.`Id`, `t2`.`Url`, `t0`.`Url`, `t0`.`c`
FROM (
    SELECT `c`.`Id`, `c`.`Name`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`IsActive`
    FROM `Categories` AS `c`
    WHERE `c`.`DeletedAt` IS NULL
    ORDER BY `c`.`DisplayOrder`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `t1`.`Id`, `t1`.`Url`, `t1`.`c`, `t1`.`CategoryId`
    FROM (
        SELECT `i`.`Id`, `i`.`Url`, 1 AS `c`, `i`.`CategoryId`, ROW_NUMBER() OVER(PARTITION BY `i`.`CategoryId` ORDER BY `i`.`Id`) AS `row`
        FROM `Images` AS `i`
        WHERE `i`.`IsMain` AND (`i`.`DeletedAt` IS NULL)
    ) AS `t1`
    WHERE `t1`.`row` <= 1
) AS `t0` ON `t`.`Id` = `t0`.`CategoryId`
LEFT JOIN (
    SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`CategoryId`
    FROM `Images` AS `i0`
    WHERE NOT (`i0`.`IsMain`) AND (`i0`.`DeletedAt` IS NULL)
) AS `t2` ON `t`.`Id` = `t2`.`CategoryId`
ORDER BY `t`.`DisplayOrder`, `t`.`Id`, `t0`.`Id`
2025-07-06 17:16:15.834 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.CategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 17:16:15.838 +03:00 [INF] Executed action E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce) in 93.0991ms
2025-07-06 17:16:15.841 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.CategoriesController.GetAllAsync (E-Commerce)'
2025-07-06 17:16:15.843 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/categories?page=1&pageSize=2 - 200 1284 application/json; charset=utf-8 117.0845ms
2025-07-06 17:16:28.842 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------332195797906232388041704 457064
2025-07-06 17:16:28.847 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 2:16:28 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 17:16:28.851 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 12:30:05 PM', Current time (UTC): '7/6/2025 2:16:28 PM'.
2025-07-06 17:16:28.853 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:16:28.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:16:28.861 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 401 null application/json 19.0007ms
2025-07-06 17:16:28.866 +03:00 [INF] Connection id "0HNDSIRI9OCSJ", Request id "0HNDSIRI9OCSJ:00000004": the application completed without reading the entire request body.
2025-07-06 17:16:38.184 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory - multipart/form-data; boundary=--------------------------135540623156384519823873 457064
2025-07-06 17:16:38.190 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:16:38.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:16:38.205 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 17:16:38.207 +03:00 [INF] Route matched with {action = "CreateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] CreateAsync(E_Commers.DtoModels.CategoryDtos.CreateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:16:38.220 +03:00 [INF] Executing CreateAsync
2025-07-06 17:16:38.222 +03:00 [INF] Execute CreateAsync
2025-07-06 17:16:38.224 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 2
2025-07-06 17:16:38.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 17:16:38.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE `s`.`Name` = @__name_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:16:38.263 +03:00 [INF] Executing CreateAsync for entity SubCategory
2025-07-06 17:16:38.293 +03:00 [INF] SubCategory added successfully (pending save)
2025-07-06 17:16:38.304 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `SubCategories` (`CategoryId`, `CreatedAt`, `DeletedAt`, `Description`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `SubCategories`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:16:38.316 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 17:16:38.318 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:16:38.324 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:16:38.326 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:16:38.331 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:16:38.335 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:16:38.336 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:16:38.338 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:16:38.340 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/fa9fb64f-f6f5-4f16-b9f4-36270b931736.png
2025-07-06 17:16:38.342 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:16:38.345 +03:00 [ERR] ❌ Failed to save image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 17:16:38.347 +03:00 [WRN] Some images failed to save: Image #2: Invalid extension. Allowed: .jpg, .jpeg, .png, .gif, .webp
2025-07-06 17:16:38.349 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 17:16:38.354 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:16:38.358 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:16:38.365 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (Size = 255), @p18='?' (DbType = DateTime), @p19='?' (DbType = DateTime), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime), @p23='?' (DbType = Int32), @p24='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:16:38.369 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:16:38.370 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:16:38.371 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:16:38.372 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/bbb09573-e3af-4019-9976-acb86fd6137c.png
2025-07-06 17:16:38.375 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 17:16:38.379 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 17:16:38.381 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:16:38.382 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:16:38.384 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:16:38.385 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:16:38.387 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:16:38.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (Size = 255), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

UPDATE `Images` SET `SubCategoryId` = @p2
WHERE `Id` = @p3;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:16:38.398 +03:00 [INF] Retrieving subcategory with ID 1 after creation
2025-07-06 17:16:38.409 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 17:16:38.466 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 17:16:38.495 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 17:16:38.503 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 17:16:38.504 +03:00 [INF] Successfully retrieved subcategory: Id=1, Name=subcategorysas1sas
2025-07-06 17:16:38.506 +03:00 [INF] SubCategory has 2 images
2025-07-06 17:16:38.509 +03:00 [INF] Mapping subcategory with 2 images
2025-07-06 17:16:38.517 +03:00 [INF] Successfully mapped subcategory to DTO
2025-07-06 17:16:38.519 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:16:38.529 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce) in 318.7021ms
2025-07-06 17:16:38.531 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.CreateAsync (E-Commerce)'
2025-07-06 17:16:38.537 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory - 201 733 application/json; charset=utf-8 352.692ms
2025-07-06 17:17:01.283 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/2 - multipart/form-data; boundary=--------------------------683173801643541771881481 6262464
2025-07-06 17:17:01.296 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:17:01.316 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:17:01.330 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:17:01.337 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:17:01.444 +03:00 [INF] Executing UpdateAsync for id: 2
2025-07-06 17:17:01.457 +03:00 [INF] Executing UpdateAsync for subCategoryId: 2
2025-07-06 17:17:01.459 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:17:01.477 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:17:01.485 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:17:01.488 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 146.163ms
2025-07-06 17:17:01.492 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:17:01.495 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/2 - 404 1162 application/json; charset=utf-8 211.9567ms
2025-07-06 17:17:07.600 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------266811019462673904246968 6262464
2025-07-06 17:17:07.682 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:17:07.691 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:17:07.713 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:17:07.715 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:17:07.821 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:17:07.822 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:17:07.824 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:17:07.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:17:07.834 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: , IsActive: True
2025-07-06 17:17:07.837 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 1, KeptImages count: 1
2025-07-06 17:17:07.839 +03:00 [INF] Removing image 7 from subcategory 1
2025-07-06 17:17:07.842 +03:00 [INF] ✅ Execute DeleteImageAsync for image ID: 7
2025-07-06 17:17:07.847 +03:00 [INF] Execute SoftDeleteAsync for entity Image with ID: 7
2025-07-06 17:17:07.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM `Images` AS `i`
WHERE (`i`.`Id` = @__id_0) AND `i`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 17:17:07.860 +03:00 [INF] Image with ID: 7 soft deleted.
2025-07-06 17:17:07.863 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Images` SET `AltText` = @p0, `CategoryId` = @p1, `CollectionId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `FileSize` = @p5, `FileType` = @p6, `Folder` = @p7, `Height` = @p8, `IsMain` = @p9, `ModifiedAt` = @p10, `ProductId` = @p11, `SubCategoryId` = @p12, `Title` = @p13, `UploadDate` = @p14, `Url` = @p15, `Width` = @p16
WHERE `Id` = @p17;
SELECT ROW_COUNT();
2025-07-06 17:17:07.867 +03:00 [INF] 🗑️ Image marked as deleted: wwwroot\SubCategoryPhotos\fa9fb64f-f6f5-4f16-b9f4-36270b931736.png
2025-07-06 17:17:07.869 +03:00 [INF] 📥 Saving 1 images to SubCategoryPhotos
2025-07-06 17:17:07.870 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:17:07.872 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 17:17:07.873 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 17:17:07.874 +03:00 [WRN] All new images failed to save
2025-07-06 17:17:07.876 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:17:07.877 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:17:07.891 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:17:07.895 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:17:07.897 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:17:07.898 +03:00 [INF] Description updated successfully
2025-07-06 17:17:07.900 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:17:07.902 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 2, IsActive: True, ModifiedAt: 7/6/2025 2:17:07 PM
2025-07-06 17:17:07.904 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:17:07.905 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:17:07.906 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:17:07.908 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:17:07.911 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:17:07.913 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:17:07.914 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:17:07.919 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:17:07.921 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 203.1582ms
2025-07-06 17:17:07.923 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:17:07.927 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1384 application/json; charset=utf-8 326.8536ms
2025-07-06 17:18:08.505 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------126837231757431907388844 6340288
2025-07-06 17:18:08.513 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:18:08.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:18:08.539 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:18:08.541 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:18:08.652 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:18:08.653 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:18:08.654 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:18:08.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:18:08.664 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: , IsActive: True
2025-07-06 17:18:08.665 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 2, KeptImages count: 1
2025-07-06 17:18:08.666 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 17:18:08.668 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:18:08.669 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 17:18:08.671 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:18:08.674 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:18:08.676 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:18:08.684 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:18:08.689 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:18:08.690 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:18:08.692 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:18:08.693 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/03e93dae-303c-497a-b39b-7162a0af0bbc.png
2025-07-06 17:18:08.695 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 17:18:08.696 +03:00 [WRN] Some new images had issues: Image #1: File size must be between 1 and 5MB
2025-07-06 17:18:08.699 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:18:08.700 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:18:08.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:18:08.706 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:18:08.708 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:18:08.709 +03:00 [INF] Description updated successfully
2025-07-06 17:18:08.710 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:18:08.712 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 2, IsActive: True, ModifiedAt: 7/6/2025 2:18:08 PM
2025-07-06 17:18:08.713 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:18:08.715 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:18:08.716 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:18:08.718 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:18:08.721 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:18:08.723 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:18:08.724 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:18:08.729 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:18:08.732 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 169.1625ms
2025-07-06 17:18:08.734 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:18:08.739 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1497 application/json; charset=utf-8 233.441ms
2025-07-06 17:19:17.579 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 17:19:19.899 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:19:20.001 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:19:20.077 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:19:20.099 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 17:19:20.149 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 17:19:21.184 +03:00 [INF] Executed DbCommand (114ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:19:21.554 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:19:21.699 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:19:23.084 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 17:19:23.091 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 17:19:23.279 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 17:19:23.456 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 17:19:23.606 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 17:19:23.700 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 17:19:23.704 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 17:19:23.705 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 17:19:23.750 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 17:19:23.778 +03:00 [INF] Server mrrobot:19248:e39a7d81 successfully announced in 22.2657 ms
2025-07-06 17:19:23.782 +03:00 [INF] Hosting environment: Development
2025-07-06 17:19:23.801 +03:00 [INF] Server mrrobot:19248:e39a7d81 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 17:19:23.804 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 17:19:23.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 512.1099ms
2025-07-06 17:19:24.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 17:19:24.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 17:19:24.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 17:19:24.787 +03:00 [INF] Server mrrobot:19248:e39a7d81 all the dispatchers started
2025-07-06 17:19:24.815 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 770.8637ms
2025-07-06 17:19:24.840 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 795.1ms
2025-07-06 17:19:24.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 835.8013ms
2025-07-06 17:19:25.029 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 17:19:25.402 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 373.4305ms
2025-07-06 17:19:31.390 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------495581636343723262386593 6340288
2025-07-06 17:19:31.596 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:19:31.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:19:31.774 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:19:31.865 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:19:33.050 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:19:33.076 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:19:33.081 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:19:33.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:19:33.281 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: , IsActive: True
2025-07-06 17:19:33.287 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 2, KeptImages count: 1
2025-07-06 17:19:33.291 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 17:19:33.295 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:19:33.297 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 17:19:33.313 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:19:33.352 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:19:33.498 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:19:33.667 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:19:34.704 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:19:34.715 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:19:34.767 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:19:34.778 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/a5fc3bc2-1a47-4fe4-a8e7-093b792fb611.png
2025-07-06 17:19:34.780 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 17:19:34.852 +03:00 [WRN] Some new images had issues: Image #1: File size must be between 1 and 5MB
2025-07-06 17:19:34.979 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:19:34.991 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:19:35.077 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:19:35.083 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:19:35.085 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:19:35.087 +03:00 [INF] Description updated successfully
2025-07-06 17:19:35.092 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:19:35.094 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 2, IsActive: True, ModifiedAt: 7/6/2025 2:19:35 PM
2025-07-06 17:19:35.095 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:19:35.096 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 17:19:35.113 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 17:19:35.114 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:19:35.114 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:19:35.116 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:19:35.130 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:19:35.140 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:19:35.141 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:19:35.199 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:19:35.278 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 3138.8889ms
2025-07-06 17:19:35.533 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:19:35.647 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1498 application/json; charset=utf-8 4257.0427ms
2025-07-06 17:20:15.409 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 17:20:19.477 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:20:19.559 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 17:20:19.723 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 17:20:19.965 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 17:20:20.011 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 17:20:20.958 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:20:21.555 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 17:20:21.609 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 17:20:22.598 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 17:20:22.605 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 17:20:22.762 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 17:20:22.982 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 17:20:23.091 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 17:20:23.166 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 17:20:23.172 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 17:20:23.385 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 17:20:23.432 +03:00 [INF] Server mrrobot:12020:348e7a96 successfully announced in 49.1372 ms
2025-07-06 17:20:23.516 +03:00 [INF] Hosting environment: Development
2025-07-06 17:20:23.546 +03:00 [INF] Server mrrobot:12020:348e7a96 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 17:20:23.596 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 17:20:23.766 +03:00 [INF] Server mrrobot:12020:348e7a96 all the dispatchers started
2025-07-06 17:20:24.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 17:20:24.860 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 17:20:24.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 459.4477ms
2025-07-06 17:20:24.864 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 17:20:24.880 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 17:20:24.888 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 28.0573ms
2025-07-06 17:20:24.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 43.3712ms
2025-07-06 17:20:24.993 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 128.8208ms
2025-07-06 17:20:25.049 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 17:20:25.248 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 199.4323ms
2025-07-06 17:20:27.585 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------547464396602366903424642 6340288
2025-07-06 17:20:27.768 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:20:27.820 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:20:27.877 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:20:27.916 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:20:28.549 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:20:28.561 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:20:28.564 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:20:28.672 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:20:28.703 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: , IsActive: True
2025-07-06 17:20:28.705 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 2, KeptImages count: 1
2025-07-06 17:20:28.709 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 17:20:28.714 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:20:28.717 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 17:20:28.718 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:20:28.731 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:20:28.832 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:20:28.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:20:29.010 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:20:29.013 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:20:29.040 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:20:29.041 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png
2025-07-06 17:20:29.046 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 17:20:29.058 +03:00 [WRN] Some new images had issues: Image #1: File size must be between 1 and 5MB
2025-07-06 17:20:29.060 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:20:29.072 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:20:29.097 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:20:29.141 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:20:29.145 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:20:29.155 +03:00 [INF] Description updated successfully
2025-07-06 17:20:29.156 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:20:29.161 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 2, IsActive: True, ModifiedAt: 7/6/2025 2:20:29 PM
2025-07-06 17:20:29.168 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:20:29.171 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 17:20:29.188 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 17:20:29.193 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:20:29.194 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:20:29.206 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:20:29.234 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:20:29.254 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:20:29.263 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:20:29.264 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:20:29.461 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:20:29.522 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 1599.018ms
2025-07-06 17:20:29.525 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:20:29.584 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1498 application/json; charset=utf-8 1999.2959ms
2025-07-06 17:20:46.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png - null null
2025-07-06 17:20:46.470 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:20:47.504 +03:00 [INF] No cached response available for this request.
2025-07-06 17:20:49.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png - null null
2025-07-06 17:20:49.253 +03:00 [INF] Sending file. Request path: '/SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png'. Physical path: 'D:\fashion\Projcet\E-Commers\E-Commers\wwwroot\SubCategoryPhotos\8046e224-55c3-427e-8f24-823d2e26d33a.png'
2025-07-06 17:20:49.385 +03:00 [INF] The response could not be cached for this request.
2025-07-06 17:20:49.388 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:20:49.388 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png - 200 77646 image/png 3087.3073ms
2025-07-06 17:20:49.422 +03:00 [INF] No cached response available for this request.
2025-07-06 17:20:49.440 +03:00 [INF] The file /SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png was not modified
2025-07-06 17:20:49.458 +03:00 [INF] The response could not be cached for this request.
2025-07-06 17:20:49.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/SubCategoryPhotos/8046e224-55c3-427e-8f24-823d2e26d33a.png - 304 null image/png 270.0719ms
2025-07-06 17:21:08.548 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------870184746306487124615453 6340289
2025-07-06 17:21:08.553 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:21:08.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:21:08.571 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:21:08.574 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:21:08.676 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:21:08.678 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:21:08.679 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:21:08.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:21:08.696 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True
2025-07-06 17:21:08.697 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 2, KeptImages count: 1
2025-07-06 17:21:08.698 +03:00 [INF] 📥 Saving 2 images to SubCategoryPhotos
2025-07-06 17:21:08.700 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:21:08.701 +03:00 [ERR] ❌ Failed to save image #1: File size must be between 1 and 5MB
2025-07-06 17:21:08.702 +03:00 [INF] 📥 Saving image to SubCategoryPhotos
2025-07-06 17:21:08.709 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 17:21:08.711 +03:00 [INF] Image added successfully (pending save)
2025-07-06 17:21:08.716 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:21:08.721 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:21:08.722 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:21:08.724 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:21:08.726 +03:00 [INF] ✅ Image saved: /SubCategoryPhotos/f553ec6c-6149-486d-be96-456c63904092.png
2025-07-06 17:21:08.732 +03:00 [WRN] Some images failed to save: Image #1: File size must be between 1 and 5MB
2025-07-06 17:21:08.734 +03:00 [WRN] Some new images had issues: Image #1: File size must be between 1 and 5MB
2025-07-06 17:21:08.735 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:21:08.736 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:21:08.746 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:21:08.751 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:21:08.752 +03:00 [INF] Updating CategoryId from 2 to 1
2025-07-06 17:21:08.757 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 1
2025-07-06 17:21:08.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 17:21:08.771 +03:00 [INF] CategoryId updated successfully to 1
2025-07-06 17:21:08.772 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:21:08.774 +03:00 [INF] Description updated successfully
2025-07-06 17:21:08.775 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:21:08.777 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True, ModifiedAt: 7/6/2025 2:21:08 PM
2025-07-06 17:21:08.778 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:21:08.779 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 17:21:08.781 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 17:21:08.782 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:21:08.784 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:21:08.786 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:21:08.798 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 255), @p9='?' (DbType = DateTime), @p10='?' (DbType = DateTime), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime), @p14='?' (DbType = Int32), @p15='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:21:08.805 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:21:08.808 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:21:08.809 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:21:08.816 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:21:08.820 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 242.8985ms
2025-07-06 17:21:08.834 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:21:08.845 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1498 application/json; charset=utf-8 296.9315ms
2025-07-06 17:21:22.064 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------487546883514501322064755 744
2025-07-06 17:21:22.071 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:21:22.078 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:21:22.085 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:21:22.087 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:21:22.108 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 17:21:22.113 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 17:21:22.114 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:21:22.121 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 17:21:22.129 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True
2025-07-06 17:21:22.130 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 0, KeptImages count: 1
2025-07-06 17:21:22.132 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 17:21:22.133 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 17:21:22.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 17:21:22.140 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 17:21:22.141 +03:00 [INF] Updating CategoryId from 2 to 1
2025-07-06 17:21:22.143 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 1
2025-07-06 17:21:22.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 17:21:22.149 +03:00 [INF] CategoryId updated successfully to 1
2025-07-06 17:21:22.150 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 17:21:22.152 +03:00 [INF] Description updated successfully
2025-07-06 17:21:22.154 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 17:21:22.155 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True, ModifiedAt: 7/6/2025 2:21:22 PM
2025-07-06 17:21:22.156 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 17:21:22.158 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 17:21:22.159 +03:00 [WRN] No changes detected for the SubCategory
2025-07-06 17:21:22.160 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 17:21:22.162 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 17:21:22.164 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 17:21:22.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 17:21:22.181 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 17:21:22.183 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 17:21:22.184 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 17:21:22.192 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:21:22.194 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 105.1007ms
2025-07-06 17:21:22.199 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 17:21:22.209 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1352 application/json; charset=utf-8 144.4539ms
2025-07-06 17:22:12.805 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=----WebKitFormBoundarye7GraW1x0LSDJYtA 69099
2025-07-06 17:22:12.810 +03:00 [INF] CORS policy execution successful.
2025-07-06 17:22:12.812 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:22:12.817 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 17:22:12.823 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 17:22:12.826 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 401 0 null 21.4819ms
2025-07-06 17:23:08.668 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------657872475202462815834246 160821
2025-07-06 17:23:08.672 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:23:08.676 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:23:08.682 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:08.685 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:08.687 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1/AddMainImage - 405 0 null 20.0187ms
2025-07-06 17:23:08.694 +03:00 [INF] Connection id "0HNDSJ0VBMAFA", Request id "0HNDSJ0VBMAFA:00000004": the application completed without reading the entire request body.
2025-07-06 17:23:16.068 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------687480677765215352506795 160821
2025-07-06 17:23:16.092 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:23:16.096 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:23:16.101 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:16.125 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:16.127 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1/AddMainImage - 405 0 null 58.9332ms
2025-07-06 17:23:16.140 +03:00 [INF] Connection id "0HNDSJ0VBMAFA", Request id "0HNDSJ0VBMAFA:00000005": the application completed without reading the entire request body.
2025-07-06 17:23:32.643 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------892717183236730687407214 160821
2025-07-06 17:23:32.696 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:23:32.762 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:23:32.773 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:32.775 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-06 17:23:32.777 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1/AddMainImage - 405 0 null 133.348ms
2025-07-06 17:23:32.782 +03:00 [INF] Connection id "0HNDSJ0VBMAFA", Request id "0HNDSJ0VBMAFA:00000006": the application completed without reading the entire request body.
2025-07-06 17:23:39.608 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------218479989150590130131463 160821
2025-07-06 17:23:39.649 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:23:39.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:23:39.683 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:23:39.697 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:23:39.712 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:23:39.714 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:23:39.724 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 21.9402ms
2025-07-06 17:23:39.727 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:23:39.761 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 152.7122ms
2025-07-06 17:24:11.154 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------964815351879299448550879 160825
2025-07-06 17:24:11.160 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:24:11.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:24:11.169 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:11.172 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:24:11.179 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:24:11.180 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:24:11.182 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 7.344ms
2025-07-06 17:24:11.185 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:11.198 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 44.6565ms
2025-07-06 17:24:17.807 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------527116034725251485547282 160824
2025-07-06 17:24:17.938 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:24:17.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:24:17.947 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:17.948 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:24:17.959 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:24:17.961 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:24:17.964 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 10.7975ms
2025-07-06 17:24:17.966 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:18.000 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 193.4405ms
2025-07-06 17:24:32.461 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------630616235763815936608475 160824
2025-07-06 17:24:32.466 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:24:32.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:24:32.475 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:32.478 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:24:32.483 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:24:32.485 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:24:32.490 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 9.4559ms
2025-07-06 17:24:32.495 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:32.533 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 71.9977ms
2025-07-06 17:24:46.229 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------520460227458972231284698 160820
2025-07-06 17:24:46.238 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:24:46.244 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:24:46.248 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:46.249 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:24:46.260 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:24:46.261 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:24:46.263 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 7.4428ms
2025-07-06 17:24:46.267 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:24:46.274 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 44.6118ms
2025-07-06 17:25:23.627 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 17:25:32.163 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=----WebKitFormBoundary442DbnQidT3dAFw2 69099
2025-07-06 17:25:32.171 +03:00 [INF] CORS policy execution successful.
2025-07-06 17:25:32.175 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 17:25:32.181 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 17:25:32.187 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:25:32.191 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 17:25:32.198 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 17:25:32.204 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 17:25:32.208 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 13.3196ms
2025-07-06 17:25:32.211 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 17:25:32.214 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 50.6412ms
2025-07-06 18:17:09.913 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:17:12.711 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:17:12.733 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:17:12.850 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:17:12.891 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:17:12.954 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:17:13.913 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:17:14.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:17:14.122 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:17:15.552 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:17:15.565 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:17:15.697 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:17:15.968 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:17:16.149 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:17:16.164 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:17:16.189 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:17:16.221 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:17:16.232 +03:00 [INF] Hosting environment: Development
2025-07-06 18:17:16.239 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:17:16.264 +03:00 [INF] Server mrrobot:14352:497bc7a9 successfully announced in 25.7282 ms
2025-07-06 18:17:16.270 +03:00 [INF] Server mrrobot:14352:497bc7a9 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:17:16.286 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 18:17:16.423 +03:00 [INF] Server mrrobot:14352:497bc7a9 all the dispatchers started
2025-07-06 18:17:28.277 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:17:29.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1360.7342ms
2025-07-06 18:17:29.713 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:17:29.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:17:29.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:17:30.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 652.2958ms
2025-07-06 18:17:30.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 411.9082ms
2025-07-06 18:17:30.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 805.5272ms
2025-07-06 18:17:30.819 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:17:32.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1563.963ms
2025-07-06 18:17:42.593 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/Login - application/json 75
2025-07-06 18:17:42.681 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:17:42.749 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 18:17:42.784 +03:00 [INF] Route matched with {action = "LoginAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.TokenDtos.TokensDto]]] LoginAsync(E_Commers.DtoModels.AccountDtos.LoginDTo) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 18:17:43.092 +03:00 [INF] In LoginAsync Method 
2025-07-06 18:17:43.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:17:43.236 +03:00 [INF] 🔐 Generating Access Token for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:17:43.332 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 18:17:43.386 +03:00 [INF] ✅ Access Token generated successfully for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:17:43.390 +03:00 [INF] 🔑 Generating Refresh Token for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:17:43.402 +03:00 [INF] RefreshToken Generated
2025-07-06 18:17:43.443 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.TokenDtos.TokensDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:17:43.475 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.LoginAsync (E-Commerce) in 679.1953ms
2025-07-06 18:17:43.482 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.LoginAsync (E-Commerce)'
2025-07-06 18:17:43.504 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/Login - 200 1408 application/json; charset=utf-8 910.7894ms
2025-07-06 18:18:07.189 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------031151393879807648243501 744
2025-07-06 18:18:07.239 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 2:25:58 PM', Current time (UTC): '7/6/2025 3:18:07 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 18:18:07.245 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 2:25:58 PM', Current time (UTC): '7/6/2025 3:18:07 PM'.
2025-07-06 18:18:07.248 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:18:07.350 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:18:07.371 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 18:18:07.379 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 18:18:07.382 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 401 0 null 193.3227ms
2025-07-06 18:18:17.152 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - multipart/form-data; boundary=--------------------------604837653841505332990203 744
2025-07-06 18:18:17.169 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:18:17.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:18:17.185 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 18:18:17.212 +03:00 [INF] Route matched with {action = "UpdateAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] UpdateAsync(Int32, E_Commers.DtoModels.CategoryDtos.UpdateSubCategoryDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:18:17.260 +03:00 [INF] Executing UpdateAsync for id: 1
2025-07-06 18:18:17.277 +03:00 [INF] Executing UpdateAsync for subCategoryId: 1
2025-07-06 18:18:17.280 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:18:17.391 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 18:18:17.517 +03:00 [INF] Update data received - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True
2025-07-06 18:18:17.521 +03:00 [INF] Image data - NewMainImage: False, NewImages count: 0, KeptImages count: 1
2025-07-06 18:18:17.525 +03:00 [INF] Updating name from 'subcategorysas1sas' to 'omargamal'
2025-07-06 18:18:17.526 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:18:17.543 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__trimmedName_0='?' (Size = 255), @__8__locals1_subCategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE ((`s`.`Name` = @__trimmedName_0) AND (`s`.`Id` <> @__8__locals1_subCategoryId_1)) AND `s`.`DeletedAt` IS NULL)
2025-07-06 18:18:17.551 +03:00 [INF] Name updated successfully to 'omargamal'
2025-07-06 18:18:17.554 +03:00 [INF] Updating CategoryId from 2 to 1
2025-07-06 18:18:17.560 +03:00 [INF] Executing GetByIdAsync for entity Category with ID: 1
2025-07-06 18:18:17.574 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`Id` = @__id_0
LIMIT 1
2025-07-06 18:18:17.581 +03:00 [INF] CategoryId updated successfully to 1
2025-07-06 18:18:17.583 +03:00 [INF] Updating description from 'anythsading category' to 'xdasdasdsad'
2025-07-06 18:18:17.584 +03:00 [INF] Description updated successfully
2025-07-06 18:18:17.586 +03:00 [INF] SubCategory 1 has changes, updating ModifiedAt timestamp
2025-07-06 18:18:17.588 +03:00 [INF] Final entity state - Name: 'omargamal', Description: 'xdasdasdsad', CategoryId: 1, IsActive: True, ModifiedAt: 7/6/2025 3:18:17 PM
2025-07-06 18:18:17.591 +03:00 [INF] Changes will be committed to database for SubCategory 1
2025-07-06 18:18:17.594 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:18:17.651 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:18:17.654 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:18:17.659 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:18:17.716 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:18:17.857 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 50), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p5='?' (Size = 255), @p6='?' (DbType = DateTime), @p7='?' (DbType = DateTime), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `SubCategories` SET `CategoryId` = @p0, `Description` = @p1, `ModifiedAt` = @p2, `Name` = @p3
WHERE `Id` = @p4;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:18:17.908 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:18:17.921 +03:00 [WRN] No cache entries found for tag: subcategory
2025-07-06 18:18:17.925 +03:00 [INF] Successfully updated SubCategory 1
2025-07-06 18:18:17.961 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:18:17.985 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce) in 768.1732ms
2025-07-06 18:18:17.991 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.UpdateAsync (E-Commerce)'
2025-07-06 18:18:17.994 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/SubCategory/1 - 200 1352 application/json; charset=utf-8 842.3442ms
2025-07-06 18:19:13.229 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------940665629156323735605619 160820
2025-07-06 18:19:13.242 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:19:13.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:19:13.260 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:19:13.271 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:19:13.294 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:19:13.298 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:19:13.306 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 29.9219ms
2025-07-06 18:19:13.309 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:19:13.316 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 86.9819ms
2025-07-06 18:19:43.710 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:19:46.576 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:19:46.595 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:19:46.626 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:19:46.649 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:19:46.702 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:19:47.360 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:19:47.563 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:19:47.610 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:19:50.571 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:19:50.580 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:19:50.787 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:19:51.086 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:19:52.164 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:19:52.169 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:19:52.173 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:19:52.410 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:19:52.417 +03:00 [INF] Hosting environment: Development
2025-07-06 18:19:52.450 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:19:52.471 +03:00 [INF] Server mrrobot:13488:71d6415d successfully announced in 58.6942 ms
2025-07-06 18:19:52.619 +03:00 [INF] Server mrrobot:13488:71d6415d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:19:52.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:19:53.362 +03:00 [INF] Server mrrobot:13488:71d6415d all the dispatchers started
2025-07-06 18:19:53.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 1052.8368ms
2025-07-06 18:19:53.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:19:53.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:19:53.682 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:19:53.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 185.5059ms
2025-07-06 18:19:53.879 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 197.6787ms
2025-07-06 18:19:53.983 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 303.8539ms
2025-07-06 18:19:54.040 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:19:54.279 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 238.9366ms
2025-07-06 18:20:56.997 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------151950352806465235817134 160820
2025-07-06 18:20:57.371 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:20:57.471 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:20:57.643 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:20:57.726 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:21:16.170 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:21:29.636 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:21:29.691 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 31951.8038ms
2025-07-06 18:21:29.699 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:21:29.719 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 32722.2469ms
2025-07-06 18:22:48.376 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:22:49.876 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:22:49.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:22:49.916 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:22:49.939 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:22:49.967 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:22:50.317 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:22:50.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:22:50.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:22:51.264 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:22:51.269 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:22:51.360 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:22:51.433 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:22:51.437 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:22:51.443 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:22:51.446 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:22:51.552 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:22:51.568 +03:00 [INF] Hosting environment: Development
2025-07-06 18:22:51.569 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:22:51.578 +03:00 [INF] Server mrrobot:17168:9ccae6df successfully announced in 18.3822 ms
2025-07-06 18:22:51.639 +03:00 [INF] Server mrrobot:17168:9ccae6df is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:22:51.724 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:22:51.853 +03:00 [INF] Server mrrobot:17168:9ccae6df all the dispatchers started
2025-07-06 18:22:52.026 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 301.1486ms
2025-07-06 18:22:52.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:22:52.128 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:22:52.142 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:22:52.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 322.1304ms
2025-07-06 18:22:52.456 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 334.1044ms
2025-07-06 18:22:52.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 365.9149ms
2025-07-06 18:22:52.577 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:22:52.734 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Error reading parameter(s) for action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) as [FromForm] attribute used with IFormFile. Please refer to https://github.com/domaindrivendev/Swashbuckle.AspNetCore#handle-forms-and-file-uploads for more information
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository, Func`3 parameterGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 18:22:52.750 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 172.79ms
2025-07-06 18:23:26.716 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:23:26.757 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 41.4767ms
2025-07-06 18:23:26.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:23:26.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:23:26.825 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:23:26.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 45.3328ms
2025-07-06 18:23:26.856 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 38.1898ms
2025-07-06 18:23:27.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.9524ms
2025-07-06 18:23:27.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:23:27.324 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Error reading parameter(s) for action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) as [FromForm] attribute used with IFormFile. Please refer to https://github.com/domaindrivendev/Swashbuckle.AspNetCore#handle-forms-and-file-uploads for more information
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository, Func`3 parameterGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 18:23:27.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 193.7556ms
2025-07-06 18:23:32.674 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:23:32.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 14.6995ms
2025-07-06 18:23:32.717 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:23:32.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:23:32.726 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:23:32.745 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 28.729ms
2025-07-06 18:23:32.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 36.9269ms
2025-07-06 18:23:32.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.9325ms
2025-07-06 18:23:32.813 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:23:32.992 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Error reading parameter(s) for action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) as [FromForm] attribute used with IFormFile. Please refer to https://github.com/domaindrivendev/Swashbuckle.AspNetCore#handle-forms-and-file-uploads for more information
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository, Func`3 parameterGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParametersAsync(ApiDescription apiDescription, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 18:23:33.016 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 202.8848ms
2025-07-06 18:23:38.030 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:23:39.406 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:23:39.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:23:39.444 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:23:39.464 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:23:39.492 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:23:39.819 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:23:39.889 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:23:39.927 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:23:40.500 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:23:40.505 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:23:40.585 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:23:40.602 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:23:40.606 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:23:40.608 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:23:40.610 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:23:40.625 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:23:40.628 +03:00 [INF] Hosting environment: Development
2025-07-06 18:23:40.655 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:23:40.679 +03:00 [INF] Server mrrobot:10732:273e43be successfully announced in 49.5659 ms
2025-07-06 18:23:40.687 +03:00 [INF] Server mrrobot:10732:273e43be is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:23:40.785 +03:00 [INF] Server mrrobot:10732:273e43be all the dispatchers started
2025-07-06 18:23:40.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:23:41.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 192.2624ms
2025-07-06 18:23:41.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:23:41.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:23:41.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:23:41.215 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 43.1907ms
2025-07-06 18:23:41.234 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 61.9922ms
2025-07-06 18:23:41.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 97.0465ms
2025-07-06 18:23:41.307 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:23:41.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 127.3834ms
2025-07-06 18:23:49.629 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------087059403131233526580729 160820
2025-07-06 18:23:49.752 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:23:49.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:23:49.891 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:23:49.947 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:23:50.325 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:23:50.337 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:23:50.376 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 410.3672ms
2025-07-06 18:23:50.418 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:23:50.436 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 207 application/json; charset=utf-8 802.6022ms
2025-07-06 18:26:01.035 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:26:01.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 27.6338ms
2025-07-06 18:26:01.131 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:26:01.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 13.5253ms
2025-07-06 18:26:01.145 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:26:01.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:26:01.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.6315ms
2025-07-06 18:26:01.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.7676ms
2025-07-06 18:26:01.498 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:26:01.522 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.TypeLoadException: Could not load type '<>f__AnonymousType22`8' from assembly 'E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.
   at System.Signature.GetSignature(Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Reflection.RuntimeMethodInfo.<get_Signature>g__LazyCreateSignature|25_0()
   at System.Reflection.RuntimeMethodInfo.GetParameters()
   at Microsoft.Extensions.Internal.PropertyHelper.IsInterestingProperty(PropertyInfo property)
   at Microsoft.Extensions.Internal.PropertyHelper.<GetProperties>g__AddInterestingProperties|39_0(List`1 propertyHelpers, Type type)
   at Microsoft.Extensions.Internal.PropertyHelper.GetProperties(Type type, ConcurrentDictionary`2 cache)
   at Microsoft.Extensions.Internal.PropertyHelper.GetVisibleProperties(Type type, ConcurrentDictionary`2 allPropertiesCache, ConcurrentDictionary`2 visiblePropertiesCache)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadataProvider.CreatePropertyDetails(ModelMetadataIdentity key)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadataProvider.GetMetadataForProperties(Type modelType)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Metadata.DefaultModelMetadata.get_Properties()
   at Microsoft.AspNetCore.Mvc.ApiExplorer.DefaultApiDescriptionProvider.PseudoModelBindingVisitor.Visit(ApiParameterDescriptionContext bindingContext, BindingSource ambientSource, String containerName)
   at Microsoft.AspNetCore.Mvc.ApiExplorer.DefaultApiDescriptionProvider.GetParameters(ApiParameterContext context)
   at Microsoft.AspNetCore.Mvc.ApiExplorer.DefaultApiDescriptionProvider.CreateApiDescription(ControllerActionDescriptor action, String httpMethod, String groupName)
   at Microsoft.AspNetCore.Mvc.ApiExplorer.DefaultApiDescriptionProvider.OnProvidersExecuting(ApiDescriptionProviderContext context)
   at Microsoft.AspNetCore.Mvc.ApiExplorer.ApiDescriptionGroupCollectionProvider.GetCollection(ActionDescriptorCollection actionDescriptors)
   at Microsoft.AspNetCore.Mvc.ApiExplorer.ApiDescriptionGroupCollectionProvider.get_ApiDescriptionGroups()
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutPaths(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-06 18:26:01.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 52.9867ms
2025-07-06 18:26:22.009 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:26:23.480 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:26:23.494 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:26:23.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:26:23.544 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:26:23.585 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:26:23.948 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:26:24.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:26:24.049 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:26:24.628 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:26:24.634 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:26:24.743 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:26:24.769 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:26:24.775 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:26:24.781 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:26:24.783 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:26:24.784 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:26:24.802 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:26:24.812 +03:00 [INF] Hosting environment: Development
2025-07-06 18:26:24.813 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:26:24.827 +03:00 [INF] Server mrrobot:1196:85615747 successfully announced in 19.1735 ms
2025-07-06 18:26:24.831 +03:00 [INF] Server mrrobot:1196:85615747 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:26:24.839 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 18:26:24.907 +03:00 [INF] Server mrrobot:1196:85615747 all the dispatchers started
2025-07-06 18:26:25.030 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 255.7216ms
2025-07-06 18:26:25.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:26:25.060 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:26:25.066 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:26:25.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 11.6773ms
2025-07-06 18:26:25.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 19.501ms
2025-07-06 18:26:25.128 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.6269ms
2025-07-06 18:26:25.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:26:25.308 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.6922ms
2025-07-06 18:26:29.778 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------352223165166269751062659 160820
2025-07-06 18:26:30.057 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:26:30.232 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:26:30.411 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:26:30.492 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:26:31.911 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:26:31.978 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:26:31.982 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:26:32.347 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t0`.`Id`, `t0`.`AltText`, `t0`.`CategoryId`, `t0`.`CollectionId`, `t0`.`CreatedAt`, `t0`.`DeletedAt`, `t0`.`FileSize`, `t0`.`FileType`, `t0`.`Folder`, `t0`.`Height`, `t0`.`IsMain`, `t0`.`ModifiedAt`, `t0`.`ProductId`, `t0`.`SubCategoryId`, `t0`.`Title`, `t0`.`UploadDate`, `t0`.`Url`, `t0`.`Width`
FROM (
    SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-06 18:26:32.397 +03:00 [INF] Removing existing main image with ID 8 from subcategory 1
2025-07-06 18:26:32.403 +03:00 [INF] ✅ Execute DeleteImageAsync for image ID: 8
2025-07-06 18:26:32.411 +03:00 [INF] Execute SoftDeleteAsync for entity Image with ID: 8
2025-07-06 18:26:32.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`AltText`, `i`.`CategoryId`, `i`.`CollectionId`, `i`.`CreatedAt`, `i`.`DeletedAt`, `i`.`FileSize`, `i`.`FileType`, `i`.`Folder`, `i`.`Height`, `i`.`IsMain`, `i`.`ModifiedAt`, `i`.`ProductId`, `i`.`SubCategoryId`, `i`.`Title`, `i`.`UploadDate`, `i`.`Url`, `i`.`Width`
FROM `Images` AS `i`
WHERE (`i`.`Id` = @__id_0) AND `i`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:26:32.531 +03:00 [INF] Image with ID: 8 soft deleted.
2025-07-06 18:26:32.736 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Images` SET `AltText` = @p0, `CategoryId` = @p1, `CollectionId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `FileSize` = @p5, `FileType` = @p6, `Folder` = @p7, `Height` = @p8, `IsMain` = @p9, `ModifiedAt` = @p10, `ProductId` = @p11, `SubCategoryId` = @p12, `Title` = @p13, `UploadDate` = @p14, `Url` = @p15, `Width` = @p16
WHERE `Id` = @p17;
SELECT ROW_COUNT();
2025-07-06 18:26:32.768 +03:00 [INF] 🗑️ Image marked as deleted: wwwroot\SubCategoryPhotos\bbb09573-e3af-4019-9976-acb86fd6137c.png
2025-07-06 18:26:32.777 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:26:32.801 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:26:32.877 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:26:32.930 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:26:32.967 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:26:32.973 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:26:33.027 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:26:33.031 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/65ef7d50-1d66-4453-a2bb-63272a4da0f8.png
2025-07-06 18:26:33.163 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:26:33.339 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:26:33.422 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 2888.454ms
2025-07-06 18:26:33.466 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:26:33.479 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 3701.3071ms
2025-07-06 18:27:07.122 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:27:07.132 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:27:07.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:27:07.168 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:27:07.179 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:27:07.200 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:27:07.206 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:27:07.211 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:27:07.222 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:27:07.232 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:27:07.357 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:27:07.404 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:27:07.414 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:27:07.425 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:27:07.497 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:27:07.511 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:27:07.534 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 347.7317ms
2025-07-06 18:27:07.536 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:27:07.544 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1268 application/json; charset=utf-8 422.7711ms
2025-07-06 18:28:40.633 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:28:40.739 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 106.113ms
2025-07-06 18:28:40.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:28:40.841 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:28:40.841 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:28:41.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 673.0043ms
2025-07-06 18:28:41.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 690.1476ms
2025-07-06 18:28:41.635 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 793.6187ms
2025-07-06 18:28:41.784 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:28:42.383 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 599.3394ms
2025-07-06 18:29:29.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:29:29.154 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 14.3512ms
2025-07-06 18:29:29.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:29:29.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:29:29.195 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:29:29.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 32.9446ms
2025-07-06 18:29:29.253 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 61.7322ms
2025-07-06 18:29:29.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.2788ms
2025-07-06 18:29:29.333 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:29:29.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.7668ms
2025-07-06 18:30:13.386 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:30:15.255 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:30:15.306 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:30:15.412 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:30:15.567 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:30:15.646 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:30:16.482 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:30:16.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:30:16.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:30:17.373 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:30:17.377 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:30:17.471 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:30:17.513 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:30:17.517 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:30:17.519 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:30:17.523 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:30:17.538 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:30:17.540 +03:00 [INF] Hosting environment: Development
2025-07-06 18:30:17.541 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:30:17.559 +03:00 [INF] Server mrrobot:7624:98fbd2d8 successfully announced in 11.3922 ms
2025-07-06 18:30:17.564 +03:00 [INF] Server mrrobot:7624:98fbd2d8 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:30:17.572 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 18:30:17.633 +03:00 [INF] Server mrrobot:7624:98fbd2d8 all the dispatchers started
2025-07-06 18:30:17.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:30:18.154 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 185.2455ms
2025-07-06 18:30:18.178 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:30:18.180 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:30:18.200 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:30:18.248 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 68.0177ms
2025-07-06 18:30:18.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 74.1396ms
2025-07-06 18:30:18.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.9276ms
2025-07-06 18:30:18.377 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:30:18.518 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.3001ms
2025-07-06 18:31:10.817 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------183911464053866956117525 160820
2025-07-06 18:31:10.938 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:31:10.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:31:11.061 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:31:11.092 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:31:11.467 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:31:11.479 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:31:11.482 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:31:11.507 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:31:11.545 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:31:11.571 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:31:11.699 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:31:11.860 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:31:11.922 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:31:11.924 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:31:11.967 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:31:11.971 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/911066f4-7bbf-4816-8669-b87a8f7865d0.png
2025-07-06 18:31:11.987 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:31:12.040 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:31:12.128 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:31:12.214 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:31:12.273 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 1156.6061ms
2025-07-06 18:31:12.292 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:31:12.312 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 1495.3683ms
2025-07-06 18:31:46.802 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:31:46.836 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:31:46.855 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:31:46.867 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:31:46.878 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:31:46.893 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:31:46.898 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:31:46.902 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:31:46.911 +03:00 [INF] Cache hit for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:31:46.962 +03:00 [INF] Cache hit for subcategory 1 with filters
2025-07-06 18:31:46.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:31:46.994 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 111.9759ms
2025-07-06 18:31:47.007 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:31:47.011 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1277 application/json; charset=utf-8 208.4272ms
2025-07-06 18:32:33.794 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:32:33.812 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 18.2468ms
2025-07-06 18:32:33.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:32:33.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:32:33.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:32:33.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 33.958ms
2025-07-06 18:32:33.892 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 38.9525ms
2025-07-06 18:32:33.922 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.2133ms
2025-07-06 18:32:34.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:32:34.142 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.797ms
2025-07-06 18:32:43.451 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:32:46.365 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:32:46.437 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:32:46.494 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:32:46.517 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:32:46.601 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:32:47.072 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:32:47.182 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:32:47.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:32:48.050 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:32:48.053 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:32:48.153 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:32:49.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:32:49.184 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------025109209794553826698925 160820
2025-07-06 18:32:49.295 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:32:49.334 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:32:49.336 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:32:49.337 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:32:49.384 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:32:49.395 +03:00 [INF] Hosting environment: Development
2025-07-06 18:32:49.408 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:32:49.411 +03:00 [INF] Server mrrobot:7256:004db051 successfully announced in 23.4205 ms
2025-07-06 18:32:49.426 +03:00 [INF] Server mrrobot:7256:004db051 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:32:49.446 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 18:32:49.462 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:32:49.570 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:32:49.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 435.7571ms
2025-07-06 18:32:49.665 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:32:49.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:32:49.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:32:49.711 +03:00 [INF] Server mrrobot:7256:004db051 all the dispatchers started
2025-07-06 18:32:49.732 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 67.0729ms
2025-07-06 18:32:49.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 78.1795ms
2025-07-06 18:32:49.802 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:32:49.879 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 199.9331ms
2025-07-06 18:32:49.924 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:32:50.026 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:32:50.356 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 329.4192ms
2025-07-06 18:32:51.243 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:32:51.310 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:32:51.313 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:32:51.351 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:32:51.384 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:32:51.404 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:32:51.585 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:32:52.176 +03:00 [INF] Executed DbCommand (164ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:32:52.540 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:32:52.546 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:32:52.602 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:32:52.606 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/7854f0a4-4510-4646-a800-6de94cac5606.png
2025-07-06 18:32:52.610 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:32:52.663 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:32:52.695 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:32:52.734 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:32:52.784 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 18:32:52.811 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:32:52.854 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 2686.5095ms
2025-07-06 18:32:52.878 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:32:52.895 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 3712.7459ms
2025-07-06 18:32:59.628 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:32:59.687 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:32:59.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:32:59.746 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:32:59.762 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:32:59.846 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:32:59.880 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:32:59.884 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:32:59.889 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:32:59.904 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:33:00.133 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:33:00.225 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:33:00.238 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:33:00.250 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:33:00.329 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:33:00.343 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:33:00.369 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 594.0031ms
2025-07-06 18:33:00.375 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:33:00.376 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1268 application/json; charset=utf-8 748.5221ms
2025-07-06 18:35:55.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:35:55.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 34.7329ms
2025-07-06 18:35:55.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:35:55.666 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:35:55.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:35:55.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.9611ms
2025-07-06 18:35:55.693 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 22.6977ms
2025-07-06 18:35:55.707 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.3689ms
2025-07-06 18:35:55.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:35:55.944 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 166.4703ms
2025-07-06 18:36:06.762 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:36:08.442 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:36:08.475 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:36:08.507 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:36:08.526 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:36:08.563 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:36:09.151 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:36:09.333 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:36:09.476 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:36:10.492 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:36:10.497 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:36:10.581 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:36:10.621 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:36:10.623 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:36:10.625 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:36:10.626 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:36:10.646 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:36:10.664 +03:00 [INF] Hosting environment: Development
2025-07-06 18:36:10.674 +03:00 [INF] Server mrrobot:7404:862a2404 successfully announced in 17.1622 ms
2025-07-06 18:36:10.681 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:36:10.692 +03:00 [INF] Server mrrobot:7404:862a2404 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:36:11.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:36:11.200 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 18:36:11.310 +03:00 [INF] Server mrrobot:7404:862a2404 all the dispatchers started
2025-07-06 18:36:11.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 290.8555ms
2025-07-06 18:36:11.472 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:36:11.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:36:11.473 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:36:11.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 40.2682ms
2025-07-06 18:36:11.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 39.4592ms
2025-07-06 18:36:11.578 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.6545ms
2025-07-06 18:36:11.650 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:36:11.812 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.5748ms
2025-07-06 18:36:16.670 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:36:16.808 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:36:16.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:36:16.961 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:36:17.005 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:36:17.410 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:36:17.419 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:36:17.427 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:36:17.442 +03:00 [INF] Cache hit for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:36:17.494 +03:00 [INF] Cache hit for subcategory 1 with filters
2025-07-06 18:36:17.558 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:36:17.617 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 596.0845ms
2025-07-06 18:36:17.622 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:36:17.632 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1277 application/json; charset=utf-8 961.5275ms
2025-07-06 18:36:38.261 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------507690013194521671144490 160820
2025-07-06 18:36:38.269 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:36:38.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:36:38.321 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:36:38.332 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:36:38.382 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:36:38.393 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:36:38.396 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:36:38.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:36:38.508 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:36:38.526 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:36:38.647 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:36:38.821 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:36:38.894 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:36:38.899 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:36:38.938 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:36:38.941 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/653951bc-bbe5-43f3-86e6-797f8da421a6.png
2025-07-06 18:36:38.946 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:36:39.030 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:36:39.068 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:36:39.117 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:36:39.132 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:36:39.142 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 804.4058ms
2025-07-06 18:36:39.143 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 18:36:39.145 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:36:39.150 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 889.3349ms
2025-07-06 18:36:58.836 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:36:58.845 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:36:58.850 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:36:58.861 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:36:58.863 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:36:58.880 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:36:58.883 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:36:58.885 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:36:58.889 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:36:58.904 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:36:59.099 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:36:59.159 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:36:59.173 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:36:59.183 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:36:59.198 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:36:59.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:36:59.212 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 344.6815ms
2025-07-06 18:36:59.234 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:36:59.238 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1363 application/json; charset=utf-8 402.0918ms
2025-07-06 18:38:53.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:38:53.788 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 16.3393ms
2025-07-06 18:38:53.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:38:53.835 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:38:53.845 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:38:53.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.631ms
2025-07-06 18:38:53.857 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 21.9696ms
2025-07-06 18:38:53.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.1895ms
2025-07-06 18:38:53.978 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:38:54.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.0639ms
2025-07-06 18:39:03.345 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------515199428120005249326752 160820
2025-07-06 18:39:03.423 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 3:32:43 PM', Current time (UTC): '7/6/2025 3:39:03 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 18:39:03.430 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 3:32:43 PM', Current time (UTC): '7/6/2025 3:39:03 PM'.
2025-07-06 18:39:03.432 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:39:03.443 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:39:03.450 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 18:39:03.462 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 18:39:03.464 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 401 0 null 119.0363ms
2025-07-06 18:39:03.479 +03:00 [INF] Connection id "0HNDSKBANI9JO", Request id "0HNDSKBANI9JO:00000004": the application completed without reading the entire request body.
2025-07-06 18:39:22.283 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - application/json 167
2025-07-06 18:39:22.293 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:39:22.307 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 18:39:22.317 +03:00 [INF] Route matched with {action = "RefreshTokenAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] RefreshTokenAsync(E_Commers.DtoModels.RefreshTokenDto) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 18:39:22.369 +03:00 [INF] In RefreshTokenAsync Method
2025-07-06 18:39:22.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-07-06 18:39:22.406 +03:00 [WRN] Can't Find user with this id:54f3c4dd-ad04-4f23-9523-b4ed366f6a75
2025-07-06 18:39:22.415 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 18:39:22.422 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce) in 98.6579ms
2025-07-06 18:39:22.436 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 18:39:22.439 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - 404 697 application/json; charset=utf-8 156.3635ms
2025-07-06 18:39:39.412 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - application/json 167
2025-07-06 18:39:39.492 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:39:39.506 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 18:39:39.508 +03:00 [INF] Route matched with {action = "RefreshTokenAsync", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.String]]] RefreshTokenAsync(E_Commers.DtoModels.RefreshTokenDto) on controller E_Commers.Controllers.AccountController (E-Commerce).
2025-07-06 18:39:39.519 +03:00 [INF] In RefreshTokenAsync Method
2025-07-06 18:39:39.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__p_0)
LIMIT 1
2025-07-06 18:39:39.530 +03:00 [INF] In ValidateRefreshTokenAsync Method
2025-07-06 18:39:39.533 +03:00 [INF] Valid Refreshtoken
2025-07-06 18:39:39.536 +03:00 [INF] 🔄 RefreshToken() started for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:39:39.543 +03:00 [INF] Successfully removed RefreshToken for User a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:39:39.547 +03:00 [INF] 🔐 Generating Access Token for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:39:39.578 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-07-06 18:39:39.604 +03:00 [INF] ✅ Access Token generated successfully for User ID: a88f210e-904a-4c67-9edf-ef8e3fa80ca5
2025-07-06 18:39:39.606 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 18:39:39.610 +03:00 [INF] Executed action E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce) in 96.9982ms
2025-07-06 18:39:39.613 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.AccountController.RefreshTokenAsync (E-Commerce)'
2025-07-06 18:39:39.615 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Account/refresh-token - 200 1240 application/json; charset=utf-8 203.9056ms
2025-07-06 18:39:57.271 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------252697920839140557161549 160820
2025-07-06 18:39:57.278 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:39:57.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:39:57.295 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:39:57.306 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:39:57.320 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:39:57.335 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:39:57.340 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:39:57.384 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:39:57.436 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:39:57.456 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:39:57.471 +03:00 [INF] Removing existing main image with ID 16 from subcategory 1
2025-07-06 18:39:57.477 +03:00 [INF] ✅ Execute DeleteImageAsync for image ID: 16
2025-07-06 18:39:57.486 +03:00 [WRN] ❌ Image file not found on disk: wwwroot\653951bc-bbe5-43f3-86e6-797f8da421a6.png
2025-07-06 18:39:57.490 +03:00 [ERR] Failed to delete existing main image: Image does not exist on disk
2025-07-06 18:39:57.518 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:39:57.525 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 211.6204ms
2025-07-06 18:39:57.536 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:39:57.548 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 1156 application/json; charset=utf-8 276.5545ms
2025-07-06 18:40:12.443 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------160810344238526071728537 102774
2025-07-06 18:40:12.923 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:40:12.951 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:40:13.090 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:40:13.093 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:40:13.103 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:40:13.106 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:40:13.107 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:40:13.138 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE `s`.`Id` = @__id_0
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:40:13.156 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:40:13.167 +03:00 [INF] Removing existing main image with ID 16 from subcategory 1
2025-07-06 18:40:13.168 +03:00 [INF] ✅ Execute DeleteImageAsync for image ID: 16
2025-07-06 18:40:13.170 +03:00 [WRN] ❌ Image file not found on disk: wwwroot\653951bc-bbe5-43f3-86e6-797f8da421a6.png
2025-07-06 18:40:13.171 +03:00 [ERR] Failed to delete existing main image: Image does not exist on disk
2025-07-06 18:40:13.184 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:40:13.186 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 87.808ms
2025-07-06 18:40:13.188 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:40:13.208 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 400 1156 application/json; charset=utf-8 764.5316ms
2025-07-06 18:41:12.751 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:41:14.615 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:41:14.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:41:14.698 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:41:14.731 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:41:14.814 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:41:15.561 +03:00 [INF] Executed DbCommand (106ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:41:15.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:41:15.729 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:41:16.397 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:41:16.405 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:41:16.495 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:41:16.513 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:41:16.514 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:41:16.516 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:41:16.520 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:41:16.553 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:41:16.576 +03:00 [INF] Hosting environment: Development
2025-07-06 18:41:16.581 +03:00 [INF] Server mrrobot:16604:d07c9223 successfully announced in 20.9138 ms
2025-07-06 18:41:16.592 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:41:16.599 +03:00 [INF] Server mrrobot:16604:d07c9223 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:41:16.607 +03:00 [INF] 2 servers were removed due to timeout
2025-07-06 18:41:16.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:41:16.859 +03:00 [INF] Server mrrobot:16604:d07c9223 all the dispatchers started
2025-07-06 18:41:17.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 214.374ms
2025-07-06 18:41:17.100 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:41:17.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:41:17.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:41:17.150 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 49.2597ms
2025-07-06 18:41:17.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.5751ms
2025-07-06 18:41:17.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 108.0024ms
2025-07-06 18:41:17.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:41:17.423 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.5898ms
2025-07-06 18:41:19.377 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------755661063868668805068822 102774
2025-07-06 18:41:19.520 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:41:19.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:41:19.676 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:41:19.713 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:41:20.202 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:41:20.208 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:41:20.211 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:41:20.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:41:20.314 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:41:20.339 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:41:20.472 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:41:20.703 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:41:20.823 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:41:20.826 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:41:20.903 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:41:20.909 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/85060ba7-1987-46cb-ae8f-7d5f0c96f3e5.png
2025-07-06 18:41:20.914 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:41:21.003 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:41:21.053 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:41:21.108 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:41:21.146 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 18:41:21.185 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:41:21.275 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 1526.7015ms
2025-07-06 18:41:21.740 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:41:21.749 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 2371.6795ms
2025-07-06 18:41:26.564 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:41:26.581 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 3:32:43 PM', Current time (UTC): '7/6/2025 3:41:26 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 18:41:26.588 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 3:32:43 PM', Current time (UTC): '7/6/2025 3:41:26 PM'.
2025-07-06 18:41:26.590 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:41:26.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:41:26.614 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-06 18:41:26.624 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-06 18:41:26.637 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 401 0 null 75.2843ms
2025-07-06 18:41:39.025 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:41:39.037 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:41:39.046 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:41:39.053 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:41:39.069 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:41:39.095 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:41:39.100 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:41:39.105 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:41:39.116 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:41:39.128 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:41:39.328 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:41:39.375 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:41:39.391 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:41:39.401 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:41:39.469 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:41:39.486 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:41:39.514 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 433.4299ms
2025-07-06 18:41:39.518 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:41:39.524 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1363 application/json; charset=utf-8 499.0792ms
2025-07-06 18:42:26.541 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------146556323526721455346012 102774
2025-07-06 18:42:26.550 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:42:26.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:42:26.573 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:42:26.580 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:42:26.604 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:42:26.607 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:42:26.610 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:42:26.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:42:26.636 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:42:26.643 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:42:26.647 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:42:26.666 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:42:26.674 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:42:26.677 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:42:26.683 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:42:26.685 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/bde0d332-806e-4467-8cad-6afbd9112c52.png
2025-07-06 18:42:26.688 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:42:26.691 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:42:26.742 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:42:26.754 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:42:26.762 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 18:42:26.765 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:42:26.772 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 184.4728ms
2025-07-06 18:42:26.788 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:42:26.796 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 254.618ms
2025-07-06 18:42:34.972 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:42:34.977 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:42:34.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:42:34.990 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:42:34.994 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:42:35.001 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:42:35.004 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:42:35.006 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:42:35.010 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:42:35.013 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:42:35.048 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:42:35.061 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:42:35.064 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:42:35.069 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:42:35.084 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:42:35.090 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 89.5675ms
2025-07-06 18:42:35.094 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:42:35.103 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1363 application/json; charset=utf-8 131.4677ms
2025-07-06 18:42:56.444 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:42:56.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 74.6763ms
2025-07-06 18:42:56.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:42:56.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:42:56.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:42:56.664 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 63.773ms
2025-07-06 18:42:56.677 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 69.6936ms
2025-07-06 18:42:56.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 126.1197ms
2025-07-06 18:42:56.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:42:57.810 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 953.584ms
2025-07-06 18:43:12.865 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:43:12.909 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 43.3612ms
2025-07-06 18:43:12.984 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:43:12.990 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:43:12.991 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:43:13.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 53.4432ms
2025-07-06 18:43:13.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 130.7625ms
2025-07-06 18:43:13.216 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 222.9239ms
2025-07-06 18:43:13.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:43:13.743 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 416.4923ms
2025-07-06 18:43:17.428 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:43:17.729 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:43:17.737 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:43:17.745 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:43:17.781 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:43:17.985 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:43:17.987 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:43:17.989 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:43:18.028 +03:00 [INF] Cache hit for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:43:18.099 +03:00 [INF] Cache hit for subcategory 1 with filters
2025-07-06 18:43:18.127 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:43:18.130 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 145.9681ms
2025-07-06 18:43:18.259 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:43:18.262 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1372 application/json; charset=utf-8 833.9651ms
2025-07-06 18:43:24.447 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------747104032598533032789438 102774
2025-07-06 18:43:24.497 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:43:24.515 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:43:24.535 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:43:24.554 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:43:24.641 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:43:24.649 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:43:24.651 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:43:24.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:43:24.669 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:43:24.677 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:43:24.682 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:43:24.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:43:24.703 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:43:24.704 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:43:24.705 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:43:24.706 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/df7b1950-0a3a-41b1-97bc-62e9c06fd99a.png
2025-07-06 18:43:24.711 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:43:24.724 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:43:24.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:43:24.744 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:43:24.761 +03:00 [INF] Removed 1 cache entries for tag: subcategory
2025-07-06 18:43:24.768 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:43:24.771 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 211.6282ms
2025-07-06 18:43:24.777 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:43:24.779 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 332.1557ms
2025-07-06 18:43:30.555 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:43:30.561 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:43:30.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:43:30.573 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:43:30.574 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:43:30.581 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:43:30.584 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:43:30.587 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:43:30.589 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:43:30.591 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:43:30.640 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:43:30.648 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:43:30.650 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:43:30.655 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:43:30.662 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:43:30.666 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 85.6664ms
2025-07-06 18:43:30.669 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:43:30.676 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1363 application/json; charset=utf-8 120.8169ms
2025-07-06 18:43:37.947 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 18:43:37.955 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 3:43:37 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-06 18:43:37.963 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/6/2025 1:25:30 PM', Current time (UTC): '7/6/2025 3:43:37 PM'.
2025-07-06 18:43:37.967 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:43:37.972 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:43:37.987 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 401 null application/json 40.6431ms
2025-07-06 18:43:45.315 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 18:43:45.530 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:43:45.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:43:45.549 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 18:43:45.561 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:43:45.569 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 18:43:45.583 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 18:43:45.586 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:43:45.588 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 18:43:45.590 +03:00 [WRN] Cache miss for key: subcategory_filtered__False_p1_ps10_
2025-07-06 18:43:45.637 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-06 18:43:45.676 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`AltText`, `t0`.`Title`, `t0`.`Width`, `t0`.`Height`, `t0`.`FileSize`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`c`, `t1`.`Id0`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id1`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`AltText`, `i`.`Title`, `i`.`Width`, `i`.`Height`, `i`.`FileSize`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Id` AS `Id0`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t2`.`Id` AS `Id1`, `t2`.`Color`, `t2`.`Size`, `t2`.`Price`, `t2`.`Quantity` AS `Quantity0`, `t2`.`CreatedAt`, `t2`.`ModifiedAt`, `t2`.`DeletedAt`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`
2025-07-06 18:43:45.688 +03:00 [INF] Setting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 18:43:45.691 +03:00 [INF] Cache set successfully for key: subcategory_filtered__False_p1_ps10_ with tags: [subcategory]
2025-07-06 18:43:45.695 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 18:43:45.703 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 137.7097ms
2025-07-06 18:43:45.706 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 18:43:45.709 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 200 601 application/json; charset=utf-8 394.5641ms
2025-07-06 18:44:40.445 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - null null
2025-07-06 18:44:40.449 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:44:40.455 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:44:40.459 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 18:44:40.462 +03:00 [INF] Route matched with {action = "GetAllAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]]] GetAllAsync(System.String, System.Nullable`1[System.Boolean], Boolean, Int32, Int32) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:44:40.473 +03:00 [INF] Executing GetAllAsync with filters
2025-07-06 18:44:40.475 +03:00 [INF] Executing FilterAsync with filters
2025-07-06 18:44:40.478 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:44:40.481 +03:00 [INF] Getting cache for key: subcategory_filtered__False_p1_ps10_
2025-07-06 18:44:40.488 +03:00 [INF] Cache hit for key: subcategory_filtered__False_p1_ps10_
2025-07-06 18:44:40.492 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-06 18:44:40.494 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce) in 22.7135ms
2025-07-06 18:44:40.497 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetAllAsync (E-Commerce)'
2025-07-06 18:44:40.499 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory?includeDeleted=false&page=1&pageSize=10 - 200 593 application/json; charset=utf-8 53.618ms
2025-07-06 18:44:48.469 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - multipart/form-data; boundary=--------------------------108584268098572381745384 102774
2025-07-06 18:44:48.476 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:44:48.488 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:44:48.496 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:44:48.499 +03:00 [INF] Route matched with {action = "AddMainImageAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.ImagesDtos.ImageDto]]] AddMainImageAsync(Int32, E_Commers.DtoModels.CategoryDtos.AddMainImageDto) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:44:48.510 +03:00 [INF] Executing AddMainImageAsync for id: 1
2025-07-06 18:44:48.511 +03:00 [INF] Executing AddMainImageToSubCategoryAsync for subCategoryId: 1
2025-07-06 18:44:48.513 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-06 18:44:48.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subCategoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`DeletedAt`, `s`.`Description`, `s`.`ImageId`, `s`.`IsActive`, `s`.`ModifiedAt`, `s`.`Name`
FROM `SubCategories` AS `s`
WHERE (`s`.`Id` = @__subCategoryId_0) AND `s`.`DeletedAt` IS NULL
LIMIT 1
2025-07-06 18:44:48.526 +03:00 [INF] 📥 Saving main image to SubCategoryPhotos
2025-07-06 18:44:48.530 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-06 18:44:48.536 +03:00 [INF] Image added successfully (pending save)
2025-07-06 18:44:48.540 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:44:48.545 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-06 18:44:48.548 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-06 18:44:48.551 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-06 18:44:48.553 +03:00 [INF] ✅ Main image saved: /SubCategoryPhotos/a7d160f6-e19e-402c-91bc-6835736184e2.png
2025-07-06 18:44:48.556 +03:00 [INF] Execute Update for entity SubCategory
2025-07-06 18:44:48.563 +03:00 [INF] SubCategory marked for update (pending save)
2025-07-06 18:44:48.573 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (Size = 255), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `SubCategoryId` = @p0
WHERE `Id` = @p1;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-06 18:44:48.581 +03:00 [INF] Removing cache by tag: subcategory
2025-07-06 18:44:48.590 +03:00 [INF] Removed 2 cache entries for tag: subcategory
2025-07-06 18:44:48.593 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:44:48.597 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce) in 90.8937ms
2025-07-06 18:44:48.599 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.AddMainImageAsync (E-Commerce)'
2025-07-06 18:44:48.604 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/SubCategory/1/AddMainImage - 200 1167 application/json; charset=utf-8 135.134ms
2025-07-06 18:44:53.480 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - null null
2025-07-06 18:44:53.727 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-06 18:44:53.776 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-06 18:44:53.783 +03:00 [INF] Executing endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:44:53.788 +03:00 [INF] Route matched with {action = "GetByIdAsync", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commers.DtoModels.Responses.ApiResponse`1[E_Commers.DtoModels.CategoryDtos.SubCategoryDto]]] GetByIdAsync(Int32, Boolean, Boolean) on controller E_Commers.Controllers.SubCategoryController (E-Commerce).
2025-07-06 18:44:53.792 +03:00 [INF] Executing GetByIdAsync for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:44:53.795 +03:00 [INF] Execute:GetSubCategoryByIdAsync in services for id: 1, isActive: True, includeDeleted: True
2025-07-06 18:44:53.799 +03:00 [INF] Getting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:44:53.804 +03:00 [WRN] Cache miss for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:44:53.805 +03:00 [INF] Executing GetSubCategoryById for id: 1
2025-07-06 18:44:53.840 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`IsActive`, `t`.`CategoryId`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t0`.`Id`, `t0`.`Url`, `t0`.`IsMain`, `t0`.`UploadDate`, `t0`.`FileType`, `t1`.`Id`, `t1`.`Name`, `t1`.`Description`, `t1`.`Quantity`, `t1`.`Gender`, `t1`.`SubCategoryId`, `t1`.`CreatedAt`, `t1`.`ModifiedAt`, `t1`.`DeletedAt`, `t1`.`Id0`, `t1`.`Id1`, `t1`.`Url`, `t1`.`IsMain`, `t1`.`FileType`, `t1`.`c`, `t1`.`Name0`, `t1`.`Description0`, `t1`.`DiscountPercent`, `t1`.`StartDate`, `t1`.`EndDate`, `t1`.`IsActive`, `t1`.`Id2`, `t1`.`Color`, `t1`.`Size`, `t1`.`Price`, `t1`.`Quantity0`, `t1`.`CreatedAt0`, `t1`.`ModifiedAt0`, `t1`.`DeletedAt0`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`Description`, `s`.`IsActive`, `s`.`CategoryId`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`IsActive`
    LIMIT 1
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`, `i`.`UploadDate`, `i`.`FileType`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
LEFT JOIN (
    SELECT `p`.`Id`, `p`.`Name`, `p`.`Description`, `p`.`Quantity`, `p`.`Gender`, `p`.`SubCategoryId`, `p`.`CreatedAt`, `p`.`ModifiedAt`, `p`.`DeletedAt`, `d`.`Id` AS `Id0`, `t2`.`Id` AS `Id1`, `t2`.`Url`, `t2`.`IsMain`, `t2`.`FileType`, `d`.`Id` IS NOT NULL AS `c`, `d`.`Name` AS `Name0`, `d`.`Description` AS `Description0`, `d`.`DiscountPercent`, `d`.`StartDate`, `d`.`EndDate`, `d`.`IsActive`, `t3`.`Id` AS `Id2`, `t3`.`Color`, `t3`.`Size`, `t3`.`Price`, `t3`.`Quantity` AS `Quantity0`, `t3`.`CreatedAt` AS `CreatedAt0`, `t3`.`ModifiedAt` AS `ModifiedAt0`, `t3`.`DeletedAt` AS `DeletedAt0`
    FROM `Products` AS `p`
    LEFT JOIN `Discount` AS `d` ON `p`.`DiscountId` = `d`.`Id`
    LEFT JOIN (
        SELECT `i0`.`Id`, `i0`.`Url`, `i0`.`IsMain`, `i0`.`FileType`, `i0`.`ProductId`
        FROM `Images` AS `i0`
        WHERE `i0`.`DeletedAt` IS NULL
    ) AS `t2` ON `p`.`Id` = `t2`.`ProductId`
    LEFT JOIN (
        SELECT `p0`.`Id`, `p0`.`Color`, `p0`.`Size`, `p0`.`Price`, `p0`.`Quantity`, `p0`.`CreatedAt`, `p0`.`ModifiedAt`, `p0`.`DeletedAt`, `p0`.`ProductId`
        FROM `ProductVariants` AS `p0`
        WHERE `p0`.`DeletedAt` IS NULL
    ) AS `t3` ON `p`.`Id` = `t3`.`ProductId`
    WHERE `p`.`DeletedAt` IS NULL
) AS `t1` ON `t`.`Id` = `t1`.`SubCategoryId`
ORDER BY `t`.`Id`, `t0`.`Id`, `t1`.`Id`, `t1`.`Id0`, `t1`.`Id1`
2025-07-06 18:44:53.858 +03:00 [INF] SubCategory with id: 1 exists
2025-07-06 18:44:53.860 +03:00 [INF] Setting cache for key: subcategoryid:1_active:True_deleted:True
2025-07-06 18:44:53.865 +03:00 [INF] Cache set successfully for key: subcategoryid:1_active:True_deleted:True with tags: [subcategory]
2025-07-06 18:44:53.874 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commers.DtoModels.Responses.ApiResponse`1[[E_Commers.DtoModels.CategoryDtos.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-06 18:44:53.877 +03:00 [INF] Executed action E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce) in 86.3047ms
2025-07-06 18:44:53.881 +03:00 [INF] Executed endpoint 'E_Commers.Controllers.SubCategoryController.GetByIdAsync (E-Commerce)'
2025-07-06 18:44:53.883 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/1?isActive=true&includeDeleted=true - 200 1363 application/json; charset=utf-8 410.6217ms
2025-07-06 18:46:16.831 +03:00 [INF] 1 servers were removed due to timeout
2025-07-06 18:50:56.806 +03:00 [INF] DB tables already exist. Exit install
2025-07-06 18:51:00.142 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:51:01.324 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-06 18:51:01.482 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-06 18:51:01.562 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-06 18:51:01.692 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-06 18:51:02.216 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:51:02.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-06 18:51:02.356 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-06 18:51:03.230 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-06 18:51:03.238 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-06 18:51:03.334 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-06 18:51:03.354 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-06 18:51:03.358 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-06 18:51:03.360 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-06 18:51:03.362 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-06 18:51:03.383 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-06 18:51:03.399 +03:00 [INF] Hosting environment: Development
2025-07-06 18:51:03.414 +03:00 [INF] Server mrrobot:12144:eeb8f963 successfully announced in 29.0788 ms
2025-07-06 18:51:03.416 +03:00 [INF] Content root path: D:\fashion\Projcet\E-Commers\E-Commers
2025-07-06 18:51:03.430 +03:00 [INF] Server mrrobot:12144:eeb8f963 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-06 18:51:03.759 +03:00 [INF] Server mrrobot:12144:eeb8f963 all the dispatchers started
2025-07-06 18:51:08.021 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:51:08.283 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 262.6369ms
2025-07-06 18:51:08.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:51:08.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:51:08.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:51:08.389 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 15.4628ms
2025-07-06 18:51:08.454 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 80.1498ms
2025-07-06 18:51:08.514 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 140.9798ms
2025-07-06 18:51:08.608 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:51:08.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 216.1431ms
2025-07-06 18:51:38.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-06 18:51:38.354 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 14.6578ms
2025-07-06 18:51:38.389 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-06 18:51:38.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-06 18:51:38.398 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-06 18:51:38.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.7049ms
2025-07-06 18:51:38.450 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 58.1389ms
2025-07-06 18:51:38.486 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.6325ms
2025-07-06 18:51:38.571 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-06 18:51:38.733 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 162.6119ms
2025-07-06 18:56:03.474 +03:00 [INF] 1 servers were removed due to timeout
