2025-07-21 17:41:44.691 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 17:41:47.572 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 17:41:47.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 17:41:47.699 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 17:41:47.742 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 17:41:47.782 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 17:41:48.227 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 17:41:48.306 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 17:41:48.368 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 17:41:50.105 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 17:41:50.107 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 17:41:50.229 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 17:41:50.253 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 17:41:50.257 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 17:41:50.259 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 17:41:50.260 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 17:41:50.279 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 17:41:50.281 +03:00 [INF] Hosting environment: Development
2025-07-21 17:41:50.284 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 17:41:50.315 +03:00 [INF] Server mrrobot:5248:867bf475 successfully announced in 19.9042 ms
2025-07-21 17:41:50.321 +03:00 [INF] Server mrrobot:5248:867bf475 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 17:41:50.329 +03:00 [INF] 1 servers were removed due to timeout
2025-07-21 17:41:50.448 +03:00 [INF] Server mrrobot:5248:867bf475 all the dispatchers started
2025-07-21 17:41:53.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 17:41:53.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 825.7144ms
2025-07-21 17:41:54.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 17:41:54.576 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 17:41:54.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 17:41:54.711 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 135.9161ms
2025-07-21 17:41:54.712 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 149.5613ms
2025-07-21 17:41:54.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 283.3781ms
2025-07-21 17:41:54.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 17:41:55.329 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 355.9075ms
2025-07-21 17:42:01.389 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CreatedAt`, `c`.`DeletedAt`, `c`.`Description`, `c`.`DisplayOrder`, `c`.`ImageId`, `c`.`IsActive`, `c`.`ModifiedAt`, `c`.`Name`
FROM `Categories` AS `c`
WHERE `c`.`DeletedAt` IS NOT NULL
2025-07-21 18:01:24.921 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?page=1&pageSize=10 - null null
2025-07-21 18:01:26.999 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:01:27.178 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:01:27.272 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:01:27.317 +03:00 [INF] Route matched with {action = "SearchForAdmin", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] SearchForAdmin(System.String, Boolean, Boolean, Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-21 18:01:27.701 +03:00 [INF] Executing SearchForAdmin with key=, isActive=True, includeDeleted=False, page=1, pageSize=10
2025-07-21 18:01:27.710 +03:00 [INF] Executing FilterAsync with filters
2025-07-21 18:01:27.718 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-21 18:01:27.732 +03:00 [INF] Getting cache for key: subcategory_filtered_True_False_p1_ps10_
2025-07-21 18:01:27.747 +03:00 [WRN] Cache miss for key: subcategory_filtered_True_False_p1_ps10_
2025-07-21 18:01:27.936 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE `s`.`IsActive` AND (`s`.`DeletedAt` IS NULL)
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-21 18:01:27.998 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:01:28.049 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce) in 717.3309ms
2025-07-21 18:01:28.055 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:01:28.067 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?page=1&pageSize=10 - 404 374 application/json; charset=utf-8 3145.6524ms
2025-07-21 18:01:58.039 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?key=&page=1&pageSize=10 - null null
2025-07-21 18:01:58.050 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:01:58.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:01:58.350 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:01:58.356 +03:00 [INF] Route matched with {action = "SearchForAdmin", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] SearchForAdmin(System.String, Boolean, Boolean, Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-21 18:01:58.375 +03:00 [INF] Executing SearchForAdmin with key=, isActive=True, includeDeleted=False, page=1, pageSize=10
2025-07-21 18:01:58.386 +03:00 [INF] Executing FilterAsync with filters
2025-07-21 18:01:58.388 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-21 18:01:58.391 +03:00 [INF] Getting cache for key: subcategory_filtered_True_False_p1_ps10_
2025-07-21 18:01:58.396 +03:00 [WRN] Cache miss for key: subcategory_filtered_True_False_p1_ps10_
2025-07-21 18:01:58.829 +03:00 [INF] Executed DbCommand (428ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE `s`.`IsActive` AND (`s`.`DeletedAt` IS NULL)
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-21 18:01:58.841 +03:00 [INF] Executing ObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:01:58.848 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce) in 478.9793ms
2025-07-21 18:01:58.852 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:01:58.860 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?key=&page=1&pageSize=10 - 404 374 application/json; charset=utf-8 820.7218ms
2025-07-21 18:02:08.875 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?key=&isActive=false&page=1&pageSize=10 - null null
2025-07-21 18:02:08.894 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:02:08.900 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:02:08.916 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:02:08.922 +03:00 [INF] Route matched with {action = "SearchForAdmin", controller = "SubCategory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto]]]] SearchForAdmin(System.String, Boolean, Boolean, Int32, Int32) on controller E_Commerce.Controllers.SubCategoryController (E-Commerce).
2025-07-21 18:02:08.950 +03:00 [INF] Executing SearchForAdmin with key=, isActive=False, includeDeleted=False, page=1, pageSize=10
2025-07-21 18:02:08.955 +03:00 [INF] Executing FilterAsync with filters
2025-07-21 18:02:08.961 +03:00 [INF] Execute GetAll for entity SubCategory
2025-07-21 18:02:08.962 +03:00 [INF] Getting cache for key: subcategory_filtered_False_False_p1_ps10_
2025-07-21 18:02:08.966 +03:00 [WRN] Cache miss for key: subcategory_filtered_False_False_p1_ps10_
2025-07-21 18:02:09.041 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`IsActive`, `t`.`CreatedAt`, `t`.`ModifiedAt`, `t`.`DeletedAt`, `t`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `s`.`Id`, `s`.`Name`, `s`.`IsActive`, `s`.`CreatedAt`, `s`.`ModifiedAt`, `s`.`DeletedAt`, `s`.`Description`
    FROM `SubCategories` AS `s`
    WHERE NOT (`s`.`IsActive`) AND (`s`.`DeletedAt` IS NULL)
    ORDER BY `s`.`Id`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`SubCategoryId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`SubCategoryId`
ORDER BY `t`.`Id`
2025-07-21 18:02:09.142 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.SubCategorydto.SubCategoryDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:02:09.152 +03:00 [INF] Executed action E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce) in 219.7933ms
2025-07-21 18:02:09.163 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.SubCategoryController.SearchForAdmin (E-Commerce)'
2025-07-21 18:02:09.165 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/SubCategory/search/admin?key=&isActive=false&page=1&pageSize=10 - 200 938 application/json; charset=utf-8 290.2779ms
2025-07-21 18:02:10.815 +03:00 [INF] Setting cache for key: subcategory_filtered_False_False_p1_ps10_
2025-07-21 18:02:11.055 +03:00 [INF] Cache set successfully for key: subcategory_filtered_False_False_p1_ps10_ with tags: [subcategorydata]
2025-07-21 18:02:46.363 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 126
2025-07-21 18:02:46.374 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:02:46.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:02:46.391 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-21 18:02:46.405 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:02:46.455 +03:00 [INF] Executing CreateProduct
2025-07-21 18:02:46.466 +03:00 [INF] Creating new product: zRI3 1
2025-07-21 18:02:46.531 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-21 18:02:46.557 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-07-21 18:02:46.575 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:02:46.585 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 170.5207ms
2025-07-21 18:02:46.590 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-21 18:02:46.597 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 404 238 application/json; charset=utf-8 232.4119ms
2025-07-21 18:02:58.161 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product - application/json 124
2025-07-21 18:02:58.170 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:02:58.175 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:02:58.184 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-21 18:02:58.189 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductDto]]] CreateProduct(E_Commerce.DtoModels.ProductDtos.CreateProductDto) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:02:58.202 +03:00 [INF] Executing CreateProduct
2025-07-21 18:02:58.206 +03:00 [INF] Creating new product: zRI31
2025-07-21 18:02:58.232 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `SubCategories` AS `s`
    WHERE (`s`.`Id` = @__id_0) AND `s`.`DeletedAt` IS NULL)
2025-07-21 18:02:58.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM `Products` AS `p`
    WHERE `p`.`Name` = @__name_0)
2025-07-21 18:02:58.255 +03:00 [INF] Executing CreateAsync for entity Product
2025-07-21 18:02:58.417 +03:00 [INF] Product added successfully (pending save)
2025-07-21 18:02:58.424 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:02:58.431 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:02:58.466 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:02:58.669 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (Size = 255), @p15='?' (DbType = DateTime), @p16='?' (DbType = DateTime), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Products` (`CreatedAt`, `DeletedAt`, `Description`, `DiscountId`, `FinalPrice`, `Gender`, `ImageId`, `IsActive`, `ModifiedAt`, `Name`, `Price`, `Quantity`, `SubCategoryId`, `fitType`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
SELECT `Id`
FROM `Products`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:02:58.767 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:02:58.783 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce) in 585.5735ms
2025-07-21 18:02:58.788 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.CreateProduct (E-Commerce)'
2025-07-21 18:02:58.793 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product - 201 441 application/json; charset=utf-8 632.3877ms
2025-07-21 18:03:00.821 +03:00 [INF] Removing cache by tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-21 18:03:00.861 +03:00 [INF] Removed 2 cache entries for tags: [product_search, categorywithdata, productwithvariantdata]
2025-07-21 18:03:20.090 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/1/images - null null
2025-07-21 18:03:20.101 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:03:20.107 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:03:20.117 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce)'
2025-07-21 18:03:20.127 +03:00 [INF] Route matched with {action = "GetProductImages", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] GetProductImages(Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:03:20.155 +03:00 [INF] Execute GetAll for entity Image
2025-07-21 18:03:20.168 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM `Images` AS `i`
WHERE (`i`.`ProductId` = @__productId_0) AND `i`.`DeletedAt` IS NULL
2025-07-21 18:03:20.180 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:03:20.220 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce) in 86.351ms
2025-07-21 18:03:20.226 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce)'
2025-07-21 18:03:20.234 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/1/images - 404 226 application/json; charset=utf-8 144.2266ms
2025-07-21 18:03:39.059 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/Product/1/images - multipart/form-data; boundary=--------------------------557390604203920982339879 69124
2025-07-21 18:03:39.077 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:03:39.084 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:03:39.092 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce)'
2025-07-21 18:03:39.106 +03:00 [INF] Route matched with {action = "AddProductImages", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] AddProductImages(Int32, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:03:39.161 +03:00 [INF] Adding images to product: 1
2025-07-21 18:03:39.166 +03:00 [INF] Executing GetByIdAsync for entity Product with ID: 1
2025-07-21 18:03:39.184 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
FROM `Products` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:03:39.209 +03:00 [INF] 📥 Saving 1 images to ProductPhotos
2025-07-21 18:03:39.215 +03:00 [INF] 📥 Saving image to ProductPhotos
2025-07-21 18:03:39.243 +03:00 [INF] Executing CreateAsync for entity Image
2025-07-21 18:03:39.342 +03:00 [INF] Image added successfully (pending save)
2025-07-21 18:03:39.380 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Images` (`AltText`, `CategoryId`, `CollectionId`, `CreatedAt`, `DeletedAt`, `FileSize`, `FileType`, `Folder`, `Height`, `IsMain`, `ModifiedAt`, `ProductId`, `SubCategoryId`, `Title`, `UploadDate`, `Url`, `Width`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `Id`
FROM `Images`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:03:39.394 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:03:39.397 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:03:39.400 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:03:39.402 +03:00 [INF] ✅ Image saved: /ProductPhotos/b7b0fbe9-1816-4ebf-b576-13ba7a412846.png
2025-07-21 18:03:39.406 +03:00 [INF] Execute Update for entity Image
2025-07-21 18:03:39.409 +03:00 [INF] Image marked for update (pending save)
2025-07-21 18:03:39.417 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:03:39.420 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:03:39.425 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:03:39.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p17='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Int64), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p18='?' (Size = 255), @p19='?' (DbType = DateTime), @p20='?' (DbType = DateTime), @p21='?' (Size = 4000), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime), @p26='?' (Size = 255), @p27='?' (DbType = DateTime), @p28='?' (DbType = DateTime), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `Images` SET `AltText` = @p0, `CategoryId` = @p1, `CollectionId` = @p2, `CreatedAt` = @p3, `DeletedAt` = @p4, `FileSize` = @p5, `FileType` = @p6, `Folder` = @p7, `Height` = @p8, `IsMain` = @p9, `ModifiedAt` = @p10, `ProductId` = @p11, `SubCategoryId` = @p12, `Title` = @p13, `UploadDate` = @p14, `Url` = @p15, `Width` = @p16
WHERE `Id` = @p17;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:03:39.475 +03:00 [INF] Successfully added 1 images to product 1
2025-07-21 18:03:39.483 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:03:39.489 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce) in 372.0451ms
2025-07-21 18:03:39.502 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.AddProductImages (E-Commerce)'
2025-07-21 18:03:39.512 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/Product/1/images - 201 235 application/json; charset=utf-8 452.8385ms
2025-07-21 18:03:48.065 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/1/images - null null
2025-07-21 18:03:48.076 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:03:48.085 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:03:48.095 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce)'
2025-07-21 18:03:48.098 +03:00 [INF] Route matched with {action = "GetProductImages", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ImagesDtos.ImageDto]]]] GetProductImages(Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:03:48.110 +03:00 [INF] Execute GetAll for entity Image
2025-07-21 18:03:48.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `i`.`Id`, `i`.`Url`, `i`.`IsMain`
FROM `Images` AS `i`
WHERE (`i`.`ProductId` = @__productId_0) AND `i`.`DeletedAt` IS NULL
2025-07-21 18:03:48.127 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ImagesDtos.ImageDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:03:48.137 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce) in 28.1081ms
2025-07-21 18:03:48.143 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductImages (E-Commerce)'
2025-07-21 18:03:48.145 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/1/images - 200 247 application/json; charset=utf-8 79.7002ms
2025-07-21 18:04:04.134 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - null null
2025-07-21 18:04:04.152 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:04:04.169 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:04:04.175 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-21 18:04:04.189 +03:00 [INF] Route matched with {action = "GetProductsForAdmin", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[System.Collections.Generic.List`1[E_Commerce.DtoModels.ProductDtos.ProductListItemDto]]]] GetProductsForAdmin(System.Nullable`1[System.Boolean], System.Nullable`1[System.Boolean], Int32, Int32) on controller E_Commerce.Controllers.ProductController (E-Commerce).
2025-07-21 18:04:04.225 +03:00 [INF] Getting cache for key: advsearch__________False_1_10__
2025-07-21 18:04:04.234 +03:00 [WRN] Cache miss for key: advsearch__________False_1_10__
2025-07-21 18:04:04.238 +03:00 [INF] Execute GetAll for entity Product
2025-07-21 18:04:04.338 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`Name`, `t`.`Description`, `t`.`Quantity`, `t`.`Gender`, `t`.`SubCategoryId`, `t`.`Price`, CASE
    WHEN `d`.`Id` IS NOT NULL AND `d`.`IsActive` THEN `t`.`Price` - (`t`.`Price` * (`d`.`DiscountPercent` / 100.0))
    ELSE `t`.`Price`
END, `d`.`Id` IS NOT NULL, `d`.`Id`, `d`.`DiscountPercent`, `d`.`IsActive`, `d`.`StartDate`, `d`.`EndDate`, `d`.`Name`, `d`.`Description`, `t0`.`Id`, `t0`.`Url`
FROM (
    SELECT `p`.`Id`, `p`.`Description`, `p`.`DiscountId`, `p`.`Gender`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`
    FROM `Products` AS `p`
    ORDER BY `p`.`Name`
    LIMIT @__p_1 OFFSET @__p_0
) AS `t`
LEFT JOIN `Discount` AS `d` ON `t`.`DiscountId` = `d`.`Id`
LEFT JOIN (
    SELECT `i`.`Id`, `i`.`Url`, `i`.`ProductId`
    FROM `Images` AS `i`
    WHERE `i`.`DeletedAt` IS NULL
) AS `t0` ON `t`.`Id` = `t0`.`ProductId`
ORDER BY `t`.`Name`, `t`.`Id`, `d`.`Id`
2025-07-21 18:04:04.392 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[System.Collections.Generic.List`1[[E_Commerce.DtoModels.ProductDtos.ProductListItemDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-21 18:04:04.404 +03:00 [INF] Executed action E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce) in 203.7146ms
2025-07-21 18:04:04.421 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductController.GetProductsForAdmin (E-Commerce)'
2025-07-21 18:04:04.427 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7288/api/Product/admin/list?page=1&pageSize=10 - 200 1561 application/json; charset=utf-8 292.5544ms
2025-07-21 18:04:10.876 +03:00 [INF] Setting cache for key: advsearch__________False_1_10__
2025-07-21 18:04:10.922 +03:00 [INF] Cache set successfully for key: advsearch__________False_1_10__ with tags: [product_search]
2025-07-21 18:04:46.500 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json 157
2025-07-21 18:04:46.509 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:04:46.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:04:46.527 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:04:46.537 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:04:46.581 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 31.5554ms
2025-07-21 18:04:46.586 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:04:46.596 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at System.ComponentModel.DataAnnotations.StringLengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:04:46.665 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 500 null text/plain; charset=utf-8 164.6472ms
2025-07-21 18:06:12.891 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json 102
2025-07-21 18:06:12.909 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:06:12.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:06:12.939 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:06:12.943 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:06:12.955 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 2.9571ms
2025-07-21 18:06:12.958 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:06:12.961 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at System.ComponentModel.DataAnnotations.StringLengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:06:12.993 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 500 null text/plain; charset=utf-8 101.9955ms
2025-07-21 18:10:51.433 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json-patch+json 103
2025-07-21 18:10:51.496 +03:00 [INF] CORS policy execution successful.
2025-07-21 18:10:51.549 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:10:51.610 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:10:51.629 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:10:51.638 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:10:51.723 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 76.3616ms
2025-07-21 18:10:51.733 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:10:51.743 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at System.ComponentModel.DataAnnotations.StringLengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:10:51.823 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 500 null text/plain; charset=utf-8 391.4857ms
2025-07-21 18:11:47.304 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:11:52.137 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:11:52.161 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:11:52.213 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:11:52.253 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:11:52.324 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:11:52.974 +03:00 [INF] Executed DbCommand (139ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:11:53.102 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:11:53.146 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:11:55.243 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:11:55.248 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:11:55.509 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:11:55.653 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:11:55.656 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:11:55.659 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:11:55.661 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:11:55.754 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:11:55.800 +03:00 [INF] Server mrrobot:20928:48ece1ad successfully announced in 42.1578 ms
2025-07-21 18:11:55.826 +03:00 [INF] Hosting environment: Development
2025-07-21 18:11:55.841 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:11:55.843 +03:00 [INF] Server mrrobot:20928:48ece1ad is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:11:57.123 +03:00 [INF] Server mrrobot:20928:48ece1ad all the dispatchers started
2025-07-21 18:11:57.436 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:11:57.859 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 440.6017ms
2025-07-21 18:11:57.951 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:11:57.952 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:11:58.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:11:58.112 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 160.0185ms
2025-07-21 18:11:58.154 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 203.4569ms
2025-07-21 18:11:58.243 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 208.8333ms
2025-07-21 18:11:58.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:11:58.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 472.0239ms
2025-07-21 18:12:12.224 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json 102
2025-07-21 18:12:12.604 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:12:12.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:12:12.857 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:12:12.946 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:12:13.903 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 941.4812ms
2025-07-21 18:12:13.910 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:12:22.981 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at System.ComponentModel.DataAnnotations.StringLengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:12:23.121 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 500 null text/plain; charset=utf-8 10899.2595ms
2025-07-21 18:16:22.556 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:16:22.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 111.5299ms
2025-07-21 18:16:22.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:16:22.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:16:22.781 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:16:22.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 184.4733ms
2025-07-21 18:16:23.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 223.8609ms
2025-07-21 18:16:23.043 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.6965ms
2025-07-21 18:16:23.147 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:16:23.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 352.2009ms
2025-07-21 18:16:42.674 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:16:42.689 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 16.6397ms
2025-07-21 18:16:42.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:16:42.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:16:42.755 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:16:42.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 46.3844ms
2025-07-21 18:16:42.793 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 38.7207ms
2025-07-21 18:16:42.888 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 133.7895ms
2025-07-21 18:16:42.980 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:16:43.373 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 392.3384ms
2025-07-21 18:16:56.432 +03:00 [INF] 1 servers were removed due to timeout
2025-07-21 18:21:32.875 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:21:36.009 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:21:36.032 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:21:36.094 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:21:36.123 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:21:36.177 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:21:36.741 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:21:36.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:21:36.905 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:21:38.545 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:21:38.549 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:21:38.748 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:21:39.429 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:21:39.435 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:21:39.464 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:21:39.465 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:21:39.575 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:21:39.949 +03:00 [INF] Server mrrobot:20640:3e6d505f successfully announced in 203.0007 ms
2025-07-21 18:21:39.995 +03:00 [INF] Hosting environment: Development
2025-07-21 18:21:40.037 +03:00 [INF] Server mrrobot:20640:3e6d505f is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:21:40.040 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:21:41.049 +03:00 [INF] Server mrrobot:20640:3e6d505f all the dispatchers started
2025-07-21 18:21:41.094 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:21:41.542 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 514.5975ms
2025-07-21 18:21:41.626 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:21:41.627 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:21:41.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:21:41.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 22.265ms
2025-07-21 18:21:41.686 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 62.8407ms
2025-07-21 18:21:41.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 174.7405ms
2025-07-21 18:21:41.882 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:21:42.303 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 421.3325ms
2025-07-21 18:22:25.288 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json 88
2025-07-21 18:22:25.645 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:22:25.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:22:25.866 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:22:25.934 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:22:29.408 +03:00 [INF] Adding variant to product: 1
2025-07-21 18:22:29.648 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:22:29.812 +03:00 [INF] Executing CreateAsync for entity ProductVariant
2025-07-21 18:22:29.930 +03:00 [INF] ProductVariant added successfully (pending save)
2025-07-21 18:22:29.939 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:22:29.949 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:22:29.953 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:22:29.957 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:22:30.020 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:22:30.509 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p24='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = DateTime), @p12='?' (Size = 50), @p13='?' (DbType = Int32), @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Boolean), @p18='?' (DbType = DateTime), @p19='?' (Size = 20), @p20='?' (DbType = Decimal), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p25='?' (Size = 255), @p26='?' (DbType = DateTime), @p27='?' (DbType = DateTime), @p28='?' (Size = 4000), @p29='?' (DbType = Int32), @p30='?' (DbType = DateTime), @p31='?' (DbType = Int32), @p32='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ProductVariants` (`Color`, `CreatedAt`, `DeletedAt`, `IsActive`, `Length`, `ModifiedAt`, `ProductId`, `Quantity`, `Size`, `Waist`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT `Id`
FROM `ProductVariants`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();

UPDATE `Products` SET `CreatedAt` = @p10, `DeletedAt` = @p11, `Description` = @p12, `DiscountId` = @p13, `FinalPrice` = @p14, `Gender` = @p15, `ImageId` = @p16, `IsActive` = @p17, `ModifiedAt` = @p18, `Name` = @p19, `Price` = @p20, `Quantity` = @p21, `SubCategoryId` = @p22, `fitType` = @p23
WHERE `Id` = @p24;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:22:30.904 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:22:31.141 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:22:31.186 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 5229.5995ms
2025-07-21 18:22:31.254 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:22:31.284 +03:00 [INF] Removed 1 cache entries for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:22:31.341 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 201 319 application/json; charset=utf-8 6052.6412ms
2025-07-21 18:24:05.071 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:24:05.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 63.6005ms
2025-07-21 18:24:05.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:24:05.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:24:05.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:24:05.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 7.5649ms
2025-07-21 18:24:05.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.9884ms
2025-07-21 18:24:05.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 65.9796ms
2025-07-21 18:24:05.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:24:05.718 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]. See inner exception
 ---> System.TypeLoadException: Could not load type 'E_Commerce.Services.ProductServices.IProductDiscountService' from assembly 'E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' due to value type mismatch.
   at System.Signature.GetSignature(Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Reflection.RuntimeMethodInfo.<get_Signature>g__LazyCreateSignature|25_0()
   at System.Reflection.RuntimePropertyInfo.GetIndexParametersSpan()
   at System.Reflection.RuntimePropertyInfo.GetIndexParameters()
   at System.Attribute.GetIndexParameterTypes(PropertyInfo element)
   at System.Attribute.InternalGetCustomAttributes(PropertyInfo element, Type type, Boolean inherit)
   at System.Attribute.GetCustomAttributes(MemberInfo element, Type attributeType, Boolean inherit)
   at System.Attribute.GetCustomAttribute(MemberInfo element, Type attributeType, Boolean inherit)
   at System.Reflection.CustomAttributeExtensions.GetCustomAttribute[T](MemberInfo element)
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.<GetDataPropertiesFor>b__6_1(PropertyInfo property)
   at System.Linq.Enumerable.ArrayWhereIterator`1.ToArray(ReadOnlySpan`1 source, Func`2 predicate)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at System.Linq.Enumerable.OrderedIterator`2.MoveNext()
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.GetDataPropertiesFor(Type objectType, Type& extensionDataType)
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.GetDataContractForType(Type type)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GetDataContractFor(Type modelType)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.CreateResponseMediaType(Type modelType, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.<>c__DisplayClass42_0.<GenerateResponse>b__2(String contentType)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponse(ApiDescription apiDescription, SchemaRepository schemaRepository, String statusCode, ApiResponseType apiResponseType)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponses(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:24:05.806 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 435.4742ms
2025-07-21 18:24:17.419 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:24:17.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 90.4491ms
2025-07-21 18:24:17.568 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:24:17.590 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:24:17.587 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:24:19.291 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 1723.9867ms
2025-07-21 18:24:19.335 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 1748.2479ms
2025-07-21 18:24:19.366 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1776.5849ms
2025-07-21 18:24:19.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:24:19.641 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - E_Commerce.Controllers.OrderController.GetOrderById (E-Commerce). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.OrderDtos.OrderDto]. See inner exception
 ---> System.TypeLoadException: Could not load type 'E_Commerce.Services.ProductServices.IProductDiscountService' from assembly 'E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' due to value type mismatch.
   at System.Signature.GetSignature(Void* pCorSig, Int32 cCorSig, RuntimeFieldHandleInternal fieldHandle, IRuntimeMethodInfo methodHandle, RuntimeType declaringType)
   at System.Reflection.RuntimeMethodInfo.<get_Signature>g__LazyCreateSignature|25_0()
   at System.Reflection.RuntimePropertyInfo.GetIndexParametersSpan()
   at System.Attribute.GetIndexParameterTypes(PropertyInfo element)
   at System.Attribute.InternalGetCustomAttributes(PropertyInfo element, Type type, Boolean inherit)
   at System.Attribute.GetCustomAttributes(MemberInfo element, Type attributeType, Boolean inherit)
   at System.Reflection.CustomAttributeExtensions.GetCustomAttribute[T](MemberInfo element)
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.<GetDataPropertiesFor>b__6_1(PropertyInfo property)
   at System.Linq.Enumerable.ArrayWhereIterator`1.ToArray(ReadOnlySpan`1 source, Func`2 predicate)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at System.Linq.Enumerable.OrderedIterator`2.MoveNext()
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.GetDataPropertiesFor(Type objectType, Type& extensionDataType)
   at Swashbuckle.AspNetCore.SwaggerGen.JsonSerializerDataContractResolver.GetDataContractForType(Type type)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GetDataContractFor(Type modelType)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForMember(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, DataProperty dataProperty)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateObjectSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass12_0.<GenerateConcreteSchema>b__3()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.CreateResponseMediaType(Type modelType, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.<>c__DisplayClass42_0.<GenerateResponse>b__2(String contentType)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponse(ApiDescription apiDescription, SchemaRepository schemaRepository, String statusCode, ApiResponseType apiResponseType)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponses(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`3 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:24:19.728 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 300.7605ms
2025-07-21 18:24:48.273 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:24:50.468 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:24:50.484 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:24:50.510 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:24:50.531 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:24:50.566 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:24:50.942 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:24:51.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:24:51.050 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:24:51.671 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:24:51.677 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:24:51.778 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:24:51.800 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:24:51.804 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:24:51.807 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:24:51.808 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:24:51.831 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:24:51.852 +03:00 [INF] Hosting environment: Development
2025-07-21 18:24:51.853 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:24:51.864 +03:00 [INF] Server mrrobot:21984:e25be134 successfully announced in 17.9855 ms
2025-07-21 18:24:52.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:24:52.253 +03:00 [INF] Server mrrobot:21984:e25be134 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:24:52.346 +03:00 [INF] Server mrrobot:21984:e25be134 all the dispatchers started
2025-07-21 18:24:52.494 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 306.5611ms
2025-07-21 18:24:52.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:24:52.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:24:52.537 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:24:52.586 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 52.8686ms
2025-07-21 18:24:52.597 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 60.0528ms
2025-07-21 18:24:52.648 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.5283ms
2025-07-21 18:24:52.736 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:24:53.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 357.6552ms
2025-07-21 18:25:12.671 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - application/json 88
2025-07-21 18:25:12.805 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:25:12.898 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:25:12.985 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:25:13.019 +03:00 [INF] Route matched with {action = "AddVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] AddVariant(Int32, E_Commerce.DtoModels.ProductDtos.CreateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:25:13.554 +03:00 [INF] Adding variant to product: 1
2025-07-21 18:25:13.690 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:25:13.869 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:25:13.908 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce) in 875.0098ms
2025-07-21 18:25:13.913 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.AddVariant (E-Commerce)'
2025-07-21 18:25:13.922 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7288/api/ProductVariant/add?productId=1 - 400 256 application/json; charset=utf-8 1250.945ms
2025-07-21 18:25:38.577 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 84
2025-07-21 18:25:38.586 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:25:38.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:25:38.620 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:25:38.630 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:25:38.665 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 23.3414ms
2025-07-21 18:25:38.670 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:25:38.673 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at System.ComponentModel.DataAnnotations.StringLengthAttribute.IsValid(Object value)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(Object value, ValidationContext validationContext)
   at System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(Object value, ValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.DataAnnotations.DataAnnotationsModelValidator.Validate(ModelValidationContext validationContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.ValidateNode()
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitChildren(IValidationStrategy strategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitComplexType(IValidationStrategy defaultStrategy)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.VisitImplementation(ModelMetadata& metadata, String& key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Validation.ValidationVisitor.Visit(ModelMetadata metadata, String key, Object model)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ObjectModelValidator.Validate(ActionContext actionContext, ValidationStateDictionary validationState, String prefix, Object model, ModelMetadata metadata, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.EnforceBindRequiredAndValidate(ObjectModelValidator baseObjectValidator, ActionContext actionContext, ParameterDescriptor parameter, ModelMetadata metadata, ModelBindingContext modelBindingContext, ModelBindingResult modelBindingResult, Object container)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCaching.ResponseCachingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at SecurityStampMiddleware.Invoke(HttpContext context) in D:\project_fashion\E-Commerce-API-main\MiddleWares\SecurityStampMiddleware.cs:line 75
   at E_Commerce.Middleware.UserAuthenticationMiddleware.InvokeAsync(HttpContext context) in D:\project_fashion\E-Commerce-API-main\Middleware\UserAuthenticationMiddleware.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 18:25:38.744 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 500 null text/plain; charset=utf-8 166.9295ms
2025-07-21 18:27:02.396 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:27:02.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 32.7418ms
2025-07-21 18:27:02.466 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:27:02.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 11.034ms
2025-07-21 18:27:02.491 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:27:02.496 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:27:02.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.0077ms
2025-07-21 18:27:02.515 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.717ms
2025-07-21 18:27:02.864 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:27:03.172 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 308.3198ms
2025-07-21 18:30:16.981 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:30:19.020 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:30:19.034 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:30:19.061 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:30:19.080 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:30:19.108 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:30:19.476 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:30:19.551 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:30:19.577 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:30:20.366 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:30:20.369 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:30:20.461 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:30:20.493 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:30:20.495 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:30:20.497 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:30:20.499 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:30:20.515 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:30:20.521 +03:00 [INF] Hosting environment: Development
2025-07-21 18:30:20.522 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:30:20.536 +03:00 [INF] Server mrrobot:23440:6ba1a024 successfully announced in 14.0194 ms
2025-07-21 18:30:20.544 +03:00 [INF] Server mrrobot:23440:6ba1a024 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:30:20.555 +03:00 [INF] 2 servers were removed due to timeout
2025-07-21 18:30:21.153 +03:00 [INF] Server mrrobot:23440:6ba1a024 all the dispatchers started
2025-07-21 18:30:21.299 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:30:21.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 160.1702ms
2025-07-21 18:30:21.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:30:21.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:30:21.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:30:21.531 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 10.7973ms
2025-07-21 18:30:21.545 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.8125ms
2025-07-21 18:30:21.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2396ms
2025-07-21 18:30:22.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:30:22.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 265.3958ms
2025-07-21 18:31:31.146 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:31:31.164 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 18.3377ms
2025-07-21 18:31:31.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:31:31.252 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:31:31.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 18.7067ms
2025-07-21 18:31:31.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:31:31.283 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 29.2507ms
2025-07-21 18:31:31.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.3325ms
2025-07-21 18:31:31.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:31:31.965 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 354.78ms
2025-07-21 18:31:53.865 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 72
2025-07-21 18:31:54.134 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:31:54.226 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:31:54.308 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:31:54.358 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:31:55.472 +03:00 [INF] Updating variant: 1
2025-07-21 18:31:55.501 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-07-21 18:31:55.517 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:31:55.568 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-07-21 18:31:55.585 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__variant_ProductId_0='?' (DbType = Int32), @__8__locals1_id_1='?' (DbType = Int32), @__8__locals1_dto_Color_2='?' (Size = 4000), @__8__locals1_dto_Size_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (((`p`.`ProductId` = @__variant_ProductId_0) AND (`p`.`Id` <> @__8__locals1_id_1)) AND `p`.`DeletedAt` IS NULL) AND ((`p`.`Color` = @__8__locals1_dto_Color_2) AND (`p`.`Size` = @__8__locals1_dto_Size_3))
LIMIT 1
2025-07-21 18:31:55.592 +03:00 [INF] Execute Update for entity ProductVariant
2025-07-21 18:31:55.604 +03:00 [INF] ProductVariant marked for update (pending save)
2025-07-21 18:31:55.610 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:31:55.616 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:31:55.684 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:31:55.878 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `Color` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `IsActive` = @p3, `Length` = @p4, `ModifiedAt` = @p5, `ProductId` = @p6, `Quantity` = @p7, `Size` = @p8, `Waist` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:31:56.122 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:31:56.260 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:31:56.265 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:31:56.324 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `FinalPrice` = @p4, `Gender` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9, `Price` = @p10, `Quantity` = @p11, `SubCategoryId` = @p12, `fitType` = @p13
WHERE `Id` = @p14;
SELECT ROW_COUNT();
2025-07-21 18:31:56.485 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:31:56.532 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 2159.3903ms
2025-07-21 18:31:56.540 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:31:56.553 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 200 295 application/json; charset=utf-8 2688.1712ms
2025-07-21 18:32:01.350 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:32:01.366 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:32:16.985 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:32:16.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 8.8433ms
2025-07-21 18:32:17.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:32:17.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 5.5361ms
2025-07-21 18:32:17.395 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:32:17.400 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:32:17.406 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.0381ms
2025-07-21 18:32:17.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.4705ms
2025-07-21 18:32:19.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:32:19.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 253.1617ms
2025-07-21 18:33:08.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:33:08.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 22.4485ms
2025-07-21 18:33:08.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:33:08.521 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 12.2811ms
2025-07-21 18:33:08.535 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:33:08.544 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:33:08.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.2597ms
2025-07-21 18:33:08.567 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 22.5105ms
2025-07-21 18:33:08.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:33:09.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.0382ms
2025-07-21 18:33:20.640 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 72
2025-07-21 18:33:20.653 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:33:20.666 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:33:20.678 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:33:20.696 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:33:20.718 +03:00 [INF] Updating variant: 1
2025-07-21 18:33:20.736 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-07-21 18:33:20.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:33:20.744 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-07-21 18:33:20.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__variant_ProductId_0='?' (DbType = Int32), @__8__locals1_id_1='?' (DbType = Int32), @__8__locals1_dto_Color_2='?' (Size = 4000), @__8__locals1_dto_Size_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (((`p`.`ProductId` = @__variant_ProductId_0) AND (`p`.`Id` <> @__8__locals1_id_1)) AND `p`.`DeletedAt` IS NULL) AND ((`p`.`Color` = @__8__locals1_dto_Color_2) AND (`p`.`Size` = @__8__locals1_dto_Size_3))
LIMIT 1
2025-07-21 18:33:20.755 +03:00 [INF] Execute Update for entity ProductVariant
2025-07-21 18:33:20.757 +03:00 [INF] ProductVariant marked for update (pending save)
2025-07-21 18:33:20.759 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:33:20.761 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:33:20.766 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:33:20.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `Color` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `IsActive` = @p3, `Length` = @p4, `ModifiedAt` = @p5, `ProductId` = @p6, `Quantity` = @p7, `Size` = @p8, `Waist` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:33:20.788 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:33:20.800 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:33:20.801 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:33:20.808 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `FinalPrice` = @p4, `Gender` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9, `Price` = @p10, `Quantity` = @p11, `SubCategoryId` = @p12, `fitType` = @p13
WHERE `Id` = @p14;
SELECT ROW_COUNT();
2025-07-21 18:33:20.851 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:33:20.859 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 157.145ms
2025-07-21 18:33:20.865 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:33:20.870 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 200 296 application/json; charset=utf-8 230.3004ms
2025-07-21 18:33:21.442 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:33:21.706 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:33:25.663 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 72
2025-07-21 18:33:25.675 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:33:25.682 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:33:25.703 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:33:25.710 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:33:25.735 +03:00 [INF] Updating variant: 1
2025-07-21 18:33:25.747 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-07-21 18:33:25.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:33:25.761 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-07-21 18:33:25.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__variant_ProductId_0='?' (DbType = Int32), @__8__locals1_id_1='?' (DbType = Int32), @__8__locals1_dto_Color_2='?' (Size = 4000), @__8__locals1_dto_Size_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (((`p`.`ProductId` = @__variant_ProductId_0) AND (`p`.`Id` <> @__8__locals1_id_1)) AND `p`.`DeletedAt` IS NULL) AND ((`p`.`Color` = @__8__locals1_dto_Color_2) AND (`p`.`Size` = @__8__locals1_dto_Size_3))
LIMIT 1
2025-07-21 18:33:25.777 +03:00 [INF] Execute Update for entity ProductVariant
2025-07-21 18:33:25.779 +03:00 [INF] ProductVariant marked for update (pending save)
2025-07-21 18:33:25.784 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:33:25.786 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:33:25.791 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:33:25.798 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `Color` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `IsActive` = @p3, `Length` = @p4, `ModifiedAt` = @p5, `ProductId` = @p6, `Quantity` = @p7, `Size` = @p8, `Waist` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:33:25.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:33:25.825 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:33:25.829 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:33:25.836 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `FinalPrice` = @p4, `Gender` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9, `Price` = @p10, `Quantity` = @p11, `SubCategoryId` = @p12, `fitType` = @p13
WHERE `Id` = @p14;
SELECT ROW_COUNT();
2025-07-21 18:33:25.864 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:33:25.869 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 152.1214ms
2025-07-21 18:33:25.872 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:33:25.875 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 200 295 application/json; charset=utf-8 212.1234ms
2025-07-21 18:33:31.479 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:33:31.496 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:34:20.623 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:34:22.968 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:34:22.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:34:23.034 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:34:23.054 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:34:23.104 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:34:23.532 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:34:23.600 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:34:23.632 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:34:24.267 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:34:24.270 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:34:24.362 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:34:24.382 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:34:24.385 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:34:24.388 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:34:24.390 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:34:24.406 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:34:24.407 +03:00 [INF] Hosting environment: Development
2025-07-21 18:34:24.414 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:34:24.429 +03:00 [INF] Server mrrobot:19300:a76df063 successfully announced in 17.4629 ms
2025-07-21 18:34:24.436 +03:00 [INF] Server mrrobot:19300:a76df063 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:34:24.451 +03:00 [INF] 1 servers were removed due to timeout
2025-07-21 18:34:24.578 +03:00 [INF] Server mrrobot:19300:a76df063 all the dispatchers started
2025-07-21 18:34:24.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:34:25.038 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 176.1242ms
2025-07-21 18:34:25.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:34:25.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 9.0394ms
2025-07-21 18:34:25.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:34:25.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:34:25.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 21.2048ms
2025-07-21 18:34:25.126 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.3632ms
2025-07-21 18:34:25.388 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:34:25.614 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 226.2293ms
2025-07-21 18:34:33.764 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 72
2025-07-21 18:34:34.908 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:34:35.053 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:34:35.173 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:34:35.295 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:34:36.896 +03:00 [INF] Updating variant: 1
2025-07-21 18:34:36.961 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-07-21 18:34:37.030 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:34:37.108 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-07-21 18:34:37.131 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__variant_ProductId_0='?' (DbType = Int32), @__8__locals1_id_1='?' (DbType = Int32), @__8__locals1_dto_Color_2='?' (Size = 4000), @__8__locals1_dto_Size_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (((`p`.`ProductId` = @__variant_ProductId_0) AND (`p`.`Id` <> @__8__locals1_id_1)) AND `p`.`DeletedAt` IS NULL) AND ((`p`.`Color` = @__8__locals1_dto_Color_2) AND (`p`.`Size` = @__8__locals1_dto_Size_3))
LIMIT 1
2025-07-21 18:34:37.143 +03:00 [INF] Execute Update for entity ProductVariant
2025-07-21 18:34:37.156 +03:00 [INF] ProductVariant marked for update (pending save)
2025-07-21 18:34:37.160 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:34:37.165 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:34:37.260 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:34:37.458 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `Color` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `IsActive` = @p3, `Length` = @p4, `ModifiedAt` = @p5, `ProductId` = @p6, `Quantity` = @p7, `Size` = @p8, `Waist` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:34:37.671 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:34:37.780 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:34:37.786 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:34:37.868 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `FinalPrice` = @p4, `Gender` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9, `Price` = @p10, `Quantity` = @p11, `SubCategoryId` = @p12, `fitType` = @p13
WHERE `Id` = @p14;
SELECT ROW_COUNT();
2025-07-21 18:34:37.987 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:34:38.031 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 2717.7809ms
2025-07-21 18:34:38.039 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:34:38.045 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 200 320 application/json; charset=utf-8 4281.7199ms
2025-07-21 18:34:44.741 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:34:44.762 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:34:52.300 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - application/json 72
2025-07-21 18:34:52.311 +03:00 [INF] Executing UserAuthenticationMiddleware
2025-07-21 18:34:52.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`SecurityStamp`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`Id` = @__userId_0)
LIMIT 1
2025-07-21 18:34:52.342 +03:00 [INF] Executing endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:34:52.347 +03:00 [INF] Route matched with {action = "UpdateVariant", controller = "ProductVariant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[E_Commerce.DtoModels.Responses.ApiResponse`1[E_Commerce.DtoModels.ProductDtos.ProductVariantDto]]] UpdateVariant(Int32, E_Commerce.DtoModels.ProductDtos.UpdateProductVariantDto) on controller E_Commerce.Controllers.ProductVariantController (E-Commerce).
2025-07-21 18:34:52.361 +03:00 [INF] Updating variant: 1
2025-07-21 18:34:52.376 +03:00 [INF] Executing GetByIdAsync for entity ProductVariant with ID: 1
2025-07-21 18:34:52.386 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE `p`.`Id` = @__id_0
LIMIT 1
2025-07-21 18:34:52.394 +03:00 [INF] Execute GetAll for entity ProductVariant
2025-07-21 18:34:52.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__variant_ProductId_0='?' (DbType = Int32), @__8__locals1_id_1='?' (DbType = Int32), @__8__locals1_dto_Color_2='?' (Size = 4000), @__8__locals1_dto_Size_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Color`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`IsActive`, `p`.`Length`, `p`.`ModifiedAt`, `p`.`ProductId`, `p`.`Quantity`, `p`.`Size`, `p`.`Waist`
FROM `ProductVariants` AS `p`
WHERE (((`p`.`ProductId` = @__variant_ProductId_0) AND (`p`.`Id` <> @__8__locals1_id_1)) AND `p`.`DeletedAt` IS NULL) AND ((`p`.`Color` = @__8__locals1_dto_Color_2) AND (`p`.`Size` = @__8__locals1_dto_Size_3))
LIMIT 1
2025-07-21 18:34:52.415 +03:00 [INF] Execute Update for entity ProductVariant
2025-07-21 18:34:52.418 +03:00 [INF] ProductVariant marked for update (pending save)
2025-07-21 18:34:52.422 +03:00 [INF] Execute AddAdminOpreationAsync
2025-07-21 18:34:52.426 +03:00 [INF] Executing CreateAsync for entity AdminOperationsLog
2025-07-21 18:34:52.434 +03:00 [INF] AdminOperationsLog added successfully (pending save)
2025-07-21 18:34:52.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p10='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p11='?' (Size = 255), @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime), @p17='?' (DbType = Int32), @p18='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE `ProductVariants` SET `Color` = @p0, `CreatedAt` = @p1, `DeletedAt` = @p2, `IsActive` = @p3, `Length` = @p4, `ModifiedAt` = @p5, `ProductId` = @p6, `Quantity` = @p7, `Size` = @p8, `Waist` = @p9
WHERE `Id` = @p10;
SELECT ROW_COUNT();

INSERT INTO `adminOperationsLogs` (`AdminId`, `CreatedAt`, `DeletedAt`, `Description`, `ItemId`, `ModifiedAt`, `OperationType`, `Timestamp`)
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
SELECT `Id`
FROM `adminOperationsLogs`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-07-21 18:34:52.458 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`CreatedAt`, `t`.`DeletedAt`, `t`.`Description`, `t`.`DiscountId`, `t`.`FinalPrice`, `t`.`Gender`, `t`.`ImageId`, `t`.`IsActive`, `t`.`ModifiedAt`, `t`.`Name`, `t`.`Price`, `t`.`Quantity`, `t`.`SubCategoryId`, `t`.`fitType`, `p0`.`Id`, `p0`.`Color`, `p0`.`CreatedAt`, `p0`.`DeletedAt`, `p0`.`IsActive`, `p0`.`Length`, `p0`.`ModifiedAt`, `p0`.`ProductId`, `p0`.`Quantity`, `p0`.`Size`, `p0`.`Waist`
FROM (
    SELECT `p`.`Id`, `p`.`CreatedAt`, `p`.`DeletedAt`, `p`.`Description`, `p`.`DiscountId`, `p`.`FinalPrice`, `p`.`Gender`, `p`.`ImageId`, `p`.`IsActive`, `p`.`ModifiedAt`, `p`.`Name`, `p`.`Price`, `p`.`Quantity`, `p`.`SubCategoryId`, `p`.`fitType`
    FROM `Products` AS `p`
    WHERE (`p`.`Id` = @__productId_0) AND `p`.`DeletedAt` IS NULL
    LIMIT 1
) AS `t`
LEFT JOIN `ProductVariants` AS `p0` ON `t`.`Id` = `p0`.`ProductId`
ORDER BY `t`.`Id`
2025-07-21 18:34:52.469 +03:00 [INF] Execute Update for entity Product
2025-07-21 18:34:52.473 +03:00 [INF] Product marked for update (pending save)
2025-07-21 18:34:52.482 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p14='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (Size = 50), @p3='?' (DbType = Int32), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?' (Size = 20), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
UPDATE `Products` SET `CreatedAt` = @p0, `DeletedAt` = @p1, `Description` = @p2, `DiscountId` = @p3, `FinalPrice` = @p4, `Gender` = @p5, `ImageId` = @p6, `IsActive` = @p7, `ModifiedAt` = @p8, `Name` = @p9, `Price` = @p10, `Quantity` = @p11, `SubCategoryId` = @p12, `fitType` = @p13
WHERE `Id` = @p14;
SELECT ROW_COUNT();
2025-07-21 18:34:52.518 +03:00 [INF] Executing OkObjectResult, writing value of type 'E_Commerce.DtoModels.Responses.ApiResponse`1[[E_Commerce.DtoModels.ProductDtos.ProductVariantDto, E-Commerce, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 18:34:52.524 +03:00 [INF] Executed action E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce) in 168.6413ms
2025-07-21 18:34:52.529 +03:00 [INF] Executed endpoint 'E_Commerce.Controllers.ProductVariantController.UpdateVariant (E-Commerce)'
2025-07-21 18:34:52.531 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7288/api/ProductVariant/update/1 - 200 320 application/json; charset=utf-8 231.5349ms
2025-07-21 18:34:54.669 +03:00 [INF] Removing cache by tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:34:54.675 +03:00 [WRN] No cache entries found for tags: [productwithvariantdata, product_search, variantdata]
2025-07-21 18:39:24.484 +03:00 [INF] 1 servers were removed due to timeout
2025-07-21 18:42:56.034 +03:00 [INF] DB tables already exist. Exit install
2025-07-21 18:42:58.140 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:42:58.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='Fashion_Site' AND TABLE_NAME='__EFMigrationsHistory';
2025-07-21 18:42:58.200 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-07-21 18:42:58.220 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 18:42:58.249 +03:00 [INF] User profile is available. Using 'C:\Users\DELL\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 18:42:58.649 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:42:58.724 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedName_0
LIMIT 1
2025-07-21 18:42:58.750 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Discriminator`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`, `a`.`Age`, `a`.`CreateAt`, `a`.`DeletedAt`, `a`.`ImageId`, `a`.`LastVisit`, `a`.`Name`, `a`.`ProfilePicture`
FROM `AspNetUsers` AS `a`
WHERE (`a`.`Discriminator` = 'Customer') AND (`a`.`NormalizedEmail` = @__normalizedEmail_0)
LIMIT 2
2025-07-21 18:42:59.409 +03:00 [INF] Now listening on: https://localhost:7288
2025-07-21 18:42:59.416 +03:00 [INF] Now listening on: http://localhost:5069
2025-07-21 18:42:59.506 +03:00 [ERR] Index was outside the bounds of the array.
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at Hangfire.MySql.MySqlStorage.<>c.<ToString>b__14_1(String[] x)
   at System.Linq.Enumerable.ArraySelectIterator`2.MoveNext()
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at Hangfire.MySql.MySqlStorage.ToString()
2025-07-21 18:42:59.543 +03:00 [INF] Starting Hangfire Server using job storage: '<Connection string can not be parsed>'
2025-07-21 18:42:59.544 +03:00 [INF] Using the following options for SQL Server job storage:
2025-07-21 18:42:59.545 +03:00 [INF]     Queue poll interval: 00:00:10.
2025-07-21 18:42:59.547 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-07-21 18:42:59.577 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 18:42:59.594 +03:00 [INF] Hosting environment: Development
2025-07-21 18:42:59.595 +03:00 [INF] Content root path: D:\project_fashion\E-Commerce-API-main
2025-07-21 18:42:59.602 +03:00 [INF] Server mrrobot:9312:0d52049e successfully announced in 17.9089 ms
2025-07-21 18:42:59.611 +03:00 [INF] Server mrrobot:9312:0d52049e is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-07-21 18:42:59.736 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.html - null null
2025-07-21 18:42:59.836 +03:00 [INF] Server mrrobot:9312:0d52049e all the dispatchers started
2025-07-21 18:42:59.967 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.html - 200 null text/html;charset=utf-8 231.7226ms
2025-07-21 18:43:00.065 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/index.js - null null
2025-07-21 18:43:00.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_vs/browserLink - null null
2025-07-21 18:43:00.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/index.js - 200 null application/javascript;charset=utf-8 6.1385ms
2025-07-21 18:43:00.085 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 18:43:00.104 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.2705ms
2025-07-21 18:43:00.115 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.96ms
2025-07-21 18:43:00.418 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - null null
2025-07-21 18:43:00.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7288/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 285.4452ms
2025-07-21 18:47:59.730 +03:00 [INF] 1 servers were removed due to timeout
